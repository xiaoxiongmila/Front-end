!function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}(function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))switch(typeof e[t]){case"function":break;case"object":e[t]=function(t){var n=t.slice(1),r=e[t[0]];return function(e,t,s){r.apply(this,[e,t,s].concat(n))}}(e[t]);break;default:e[t]=e[e[t]]}return e}([function(e,t,n){e.exports=n(342)},,function(e,t,n){"use strict";var r=n(3),i=r.dispatcher,s=window.__ob||new i({});window.__ob||(window.__ob=s),window.PDR=window.PDR||{},window.PDR.ob=s,e.exports=s},function(e,t,n){e.exports.define=n(4),e.exports.dispatcher=n(6),e.exports.util=n(5)},function(e,t,n){function r(e,t){var n,r=function(){},u=t.prototype;r.prototype=u,n=e.prototype=new r,n.constructor=e,$.each(Array.prototype.slice.apply(arguments,[2]),function(t,n){"function"==typeof n&&(n=n.prototype),i.mixin(e.prototype,n)}),n.superclass=s(u)}var i=n(5),s=function(e){var t=function(){var e=(t.caller||{}).name,n=arguments.length,r=this,i=arguments.callee.superclass;if(!e)for(var s in r)if(r[s]==t.caller){e=s;break}if(n>0&&e){var o=Array.prototype.slice.call(arguments,0);return Array.prototype.splice.apply(o,[0,1]),i[e](o)}return i};return t.superclass=e,t};e.exports=function(){var e=arguments.length,t=arguments[0],n=arguments[e-1],i="function"==typeof n.initialize?n.initialize:function(){t.apply&&t.apply(this,arguments)};if(e>1){var s=[i,t].concat(Array.prototype.slice.call(arguments).slice(1,e-1),n);r.apply(null,s)}else i.prototype=n,i.prototype.constructor=i;return i}},function(e,t){function n(e){return['"',+e,'"'].join("")}function r(e){var t,n,r,i=["["],s=e.length;for(n=0;s>n;n++)switch(r=e[n],typeof r){case"undefined":case"function":case"unknown":break;default:t&&i.push(","),i.push(a.jsonEncode(r)),t=1}return i.push("]"),i.join("")}function i(e){return/["\\\x00-\x1f]/.test(e)&&(e=e.replace(/["\\\x00-\x1f]/g,function(e){var t=u[e];return t?t:(t=e.charCodeAt(),"\\u00"+Math.floor(t/16).toString(16)+(t%16).toString(16))})),['"',e,'"'].join("")}var s=this,o=0,u={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},a=e.exports={mixin:function(e,t){if(e=e||{},t){for(var n in t){var r=t[n];void 0!==r&&(e[n]=r)}var i="function"==typeof window.Event&&t instanceof window.Event;!i&&t.hasOwnProperty&&t.hasOwnProperty("toString")&&(e.toString=t.toString)}return e},bind:function(e,t){var n=Array.prototype.slice.apply(arguments,[2]);return function(){var r=n.concat(Array.prototype.slice.apply(arguments,[0]));return e.apply(t,r)}},bindAsEventListener:function(e,t){return function(n){return e.call(t,n||window.event)}},createUniqueID:function(e){return e=null===e||void 0===e?"pc_game_":e.replace(/\./g,"_"),e+o++},g:function(e){var e="[object String]"==Object.prototype.toString.call(e)?document.getElementById(e):!!e&&"object"==typeof e&&e;return e||null},jsonEncode:function(e){switch(typeof e){case"undefined":return'""';case"number":return['"',e,'"'].join("");case"string":return i(e);case"boolean":return['"',e,'"'].join("");default:if(null===e)return'""';if(e instanceof Array)return r(e);if(e instanceof Date)return n(e);var t,s,o=["{"];for(var u in e)if(e.hasOwnProperty(u))switch(s=e[u],typeof s){case"undefined":case"unknown":case"function":break;default:t&&o.push(","),t=1,o.push(a.jsonEncode(u)+":"+a.jsonEncode(s))}return o.push("}"),o.join("")}},trim:function(e){return e=String(e),e.trim?e.trim():e.replace(new RegExp("(^[\\s\\t\\xa0\\u3000]+)|([\\u3000\\xa0\\s\\t]+$)","g"),"")},camelCase:function(e){return e=a.trim(e),1!==e.length&&/[_.\- ]+/.test(e)?e.replace(/^[_.\- ]+/,"").replace(/[_.\- ]+(\w|$)/g,function(e,t){return t.toUpperCase()}):e},getTime:function(e,t){var n=new Date(1e3*e),r=new Date,i=n.getUTCFullYear(),s=r.getUTCFullYear(),o=n.getUTCMonth()+1,u=r.getUTCMonth()+1,a=n.getDate(),f=r.getDate(),l=n.getHours(),c=n.getMinutes(),h=n.getSeconds(),p=i!=s||o!=u||a!=f||t,d=i+"-"+(10>o?"0"+o:o)+"-"+(10>a?"0"+a:a)+" "+(10>l?"0"+l:l)+":"+(10>c?"0"+c:c)+":"+(10>h?"0"+h:h),v=(10>l?"0"+l:l)+":"+(10>c?"0"+c:c)+":"+(10>h?"0"+h:h);return p?d:v},insert2TextArea:function(e,t){if(document.selection){e.focus();var n=document.selection.createRange();n.txt=t,e.focus()}else if(e.selectionStart||"0"==e.selectionStart){var r=e.selectionStart,i=e.selectionEnd,s=e.scrollTop;e.value=e.value.substring(0,r)+t+e.value.substring(i,e.value.length),e.focus(),e.selectionStart=r+t.length,e.selectionEnd=r+t.length,e.scrollTop=s}else e.value+=t,e.focus()},encodeHtml:function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")},requestAnimation:function(){var e=s.requestAnimationFrame||s.webkitRequestAnimationFrame||s.mozRequestAnimationFrame||s.oRequestAnimationFrame||s.msRequestAnimationFrame||function(e,t){s.setTimeout(e,16)};return function(t,n){e.apply(s,[t,n])}}()}},function(e,t,n){var r=n(4),i=n(5),s={observers:null,element:function(e){return e.target||e.srcElement},stop:function(e,t){t||(e.preventDefault?e.preventDefault():e.returnValue=!1),e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},on:function(e,t,n,r){var o=t.split(" "),u=o.length,f=u;if(0==u)return!1;var l=i.g(e),c=s;if(r=r||!1,c.observers||(c.observers={}),!l._eventCacheID){var h="eventCacheID_";l.id&&(h=l.id+"_"+h),l._eventCacheID=i.createUniqueID(h)}for(;f--;)c._on(l,o[f],n,r);return l},_on:function(e,t,n,r){var i=e._eventCacheID,o=s;o.observers[i]||(o.observers[i]=[]),o.observers[i].push({element:e,name:t,observer:n,useCapture:r}),e.addEventListener?e.addEventListener(t,n,r):e.attachEvent&&e.attachEvent("on"+t,n)},stopObservingElement:function(e){var t=i.g(e),n=t._eventCacheID;this._removeElementObservers(o.event.observers[n])},stopEventObserver:function(e,t){var n=i.g(e)._eventCacheID,r=s,o=r.observers[n];if(o)for(var u=o.length;u--;){var f=o[u];if(t==f.name){var l=new Array(f.element,f.name,f.observer,f.useCapture);r.un.apply(this,l)}}},_removeElementObservers:function(e){if(e)for(var t=e.length;t--;){var n=e[t],r=new Array(n.element,n.name,n.observer,n.useCapture);s.un.apply(this,r)}},un:function(e,t,n,r){var o=t.split(" "),u=o.length,f=u;if(0==u)return!1;var l=i.g(e),c=l._eventCacheID,h=!1;for(r=r||!1;f--;)h=s._un(l,o[f],n,r,c);return h},_un:function(e,t,n,r,i){"keypress"==t&&(navigator.appVersion.match(/Konqueror|Safari|KHTML/)||e.detachEvent)&&(t="keydown");var o=!1,u=s.observers[i];if(u)for(var f=0;!o&&f<u.length;){var l=u[f];if(l.name==t&&l.observer==n&&l.useCapture==r){u.splice(f,1),0==u.length&&(s.observers[i]=null),o=!0;break}f++}return o&&(e.removeEventListener?e.removeEventListener(t,n,r):e&&e.detachEvent&&e.detachEvent("on"+t,n)),o},unloadCache:function(){if(s&&s.observers){for(var e in s.observers){var t=s.observers[e];s._removeElementObservers.apply(this,[t])}s.observers=!1}}};e.exports=r({BROWSER_EVENTS:["mouseover","mouseout","mousedown","mouseup","mousemove","click","dblclick","rightclick","dblrightclick","resize","focus","blur","touchstart","touchmove","touchend","keydown"],listeners:null,obj:null,initialize:function(e,t){i.mixin(this,t),this.obj=e,this.listeners={},null!=this.el&&(this.fallThrough=this.fallThrough||!1,this.attachToElement())},attachToElement:function(){this.el?s.stopObservingElement(this.el):this.eventHandler=i.bindAsEventListener(this.handleBrowserEvent,this);for(var e=0,t=this.BROWSER_EVENTS.length;t>e;e++)s.on(this.BROWSER_EVENTS[e],this.eventHandler);s.on("dragstart",s.stop)},handleBrowserEvent:function(e){var t=e.type,n=this.listeners[t];if(n&&0!=n.length){var r=e.touches;if(r&&r[0]){for(var i,s=0,o=0,u=r.length,a=0;u>a;++a)i=r[a],s+=i.clientX,o+=i.clientY;e.clientX=s/u,e.clientY=o/u}this.triggerEvent(t,e)}},destroy:function(){this.listeners=null,this.obj=null,this.fallThrough=null},on:function(e,t,n){if(null!=t){(null==n||void 0==n)&&(n=this.obj);var r=this.listeners[e];r||(r=[],this.listeners[e]=r);var i={obj:n,func:t};r.push(i)}},un:function(e,t,n){null==n&&(n=this.obj);var r=this.listeners[e];if(null!=r)for(var i=0,s=r.length;s>i;i++)if(r[i].obj==n&&r[i].func==t){r.splice(i,1);break}},triggerEvent:function(e,t){var n=this.listeners[e];if(!n||0==n.length)return void 0;null==t&&(t={}),t.obj=this.obj,t.el=this.el,t.type||(t.type=e),n=n.slice();for(var r,i=0,o=n.length;o>i;i++){var u=n[i];if(r=u.func.apply(u.obj,[t]),r===!1)break}return this.fallThrough||s.stop(t),r},remove:function(e){null!=this.listeners[e]&&(this.listeners[e]=[])},register:function(e){for(var t in e)"scope"!=t&&e.hasOwnProperty(t)&&this.on(t,e[t],e.scope)},unregister:function(e){for(var t in e)"scope"!=t&&e.hasOwnProperty(t)&&this.un(t,e[t],e.scope)}})},function(e,t,n){"use strict";function r(){$(document).on("shown.bs.modal",".x-modal",function(e){var t=$(e.target),n=$(".x-modal-content",t);$(".x-modal-hide",t),("auto"===n.css("top")||"0px"===n.css("top"))&&n.css({top:"38.2%",marginTop:0-.382*n.height()}),("auto"===n.css("left")||"0px"===n.css("left"))&&n.css({left:"50%",marginTop:0-.5*n.width()})}),$(document).on("click",".x-modal-hide",function(e){var t=$(e.target),n=t.parents(".x-modal");n.modal("hide")})}function i(e){e.title=e.title||!1,e.content=e.content||!1;var t=$(s(e));return t.on("hidden.bs.modal",function(){t.off(),t.remove(),t=null}),t.appendTo("body"),t.modal("show"),t}n(8);var s=n(9),o=n(18),u=n(19);r(),e.exports={show:i,confirm:function(e){var t=$.Deferred();e=e||{},e.title=e.title||"\u8bf7\u786e\u8ba4\uff1a",e.content=o({content:e.content||""});var n=i(e);return n.on("click","button, a",function(e){var r=$(e.target);r.is(".j-sure")?t.resolve():t.reject(),n.modal("hide")}),t.promise()},alert:function(e){e=e||{},e.title=e.title||"\u8bf7\u786e\u8ba4\uff1a",e.content=u({content:e.content||""});var t=i(e);t.on("click","button",function(e){$(e.target),t.modal("hide")})}}},function(e,t){+function(e){"use strict";function t(t,r){return this.each(function(){var s=e(this),o=s.data("bs.modal"),u=e.extend({},n.DEFAULTS,s.data(),"object"==typeof t&&t);o||s.data("bs.modal",o=new n(this,u)),"string"==typeof t?o[t](r):u.show&&o.show(r)})}var n=function(t,n){this.options=n,this.$body=e(document.body),this.$element=e(t),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,e.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};n.VERSION="3.3.6",n.TRANSITION_DURATION=300,n.BACKDROP_TRANSITION_DURATION=150,n.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},n.prototype.toggle=function(e){return this.isShown?this.hide():this.show(e)},n.prototype.show=function(t){var r=this,i=e.Event("show.bs.modal",{relatedTarget:t});this.$element.trigger(i),this.isShown||i.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',e.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){r.$element.one("mouseup.dismiss.bs.modal",function(t){e(t.target).is(r.$element)&&(r.ignoreBackdropClick=!0)})}),this.backdrop(function(){var i=e.support.transition&&r.$element.hasClass("fade");r.$element.parent().length||r.$element.appendTo(r.$body),r.$element.show().scrollTop(0),r.adjustDialog(),i&&r.$element[0].offsetWidth,r.$element.addClass("in"),r.enforceFocus();var s=e.Event("shown.bs.modal",{relatedTarget:t});i?r.$dialog.one("bsTransitionEnd",function(){r.$element.trigger("focus").trigger(s)}).emulateTransitionEnd(n.TRANSITION_DURATION):r.$element.trigger("focus").trigger(s)}))},n.prototype.hide=function(t){t&&t.preventDefault(),t=e.Event("hide.bs.modal"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),e(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),e.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",e.proxy(this.hideModal,this)).emulateTransitionEnd(n.TRANSITION_DURATION):this.hideModal())},n.prototype.enforceFocus=function(){e(document).off("focusin.bs.modal").on("focusin.bs.modal",e.proxy(function(e){this.$element[0]===e.target||this.$element.has(e.target).length||this.$element.trigger("focus")},this))},n.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",e.proxy(function(e){27==e.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},n.prototype.resize=function(){this.isShown?e(window).on("resize.bs.modal",e.proxy(this.handleUpdate,this)):e(window).off("resize.bs.modal")},n.prototype.hideModal=function(){var e=this;this.$element.hide(),this.backdrop(function(){e.$body.removeClass("modal-open"),e.resetAdjustments(),e.resetScrollbar(),e.$element.trigger("hidden.bs.modal")})},n.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},n.prototype.backdrop=function(t){var r=this,i=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var s=e.support.transition&&i;if(this.$backdrop=e(document.createElement("div")).addClass("modal-backdrop "+i).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",e.proxy(function(e){return this.ignoreBackdropClick?void (this.ignoreBackdropClick=!1):void (e.target===e.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),s&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!t)return;s?this.$backdrop.one("bsTransitionEnd",t).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):t()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var o=function(){r.removeBackdrop(),t&&t()};e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",o).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):o()}else t&&t()},n.prototype.handleUpdate=function(){this.adjustDialog()},n.prototype.adjustDialog=function(){var e=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&e?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!e?this.scrollbarWidth:""})},n.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},n.prototype.checkScrollbar=function(){var e=window.innerWidth;if(!e){var t=document.documentElement.getBoundingClientRect();e=t.right-Math.abs(t.left)}this.bodyIsOverflowing=document.body.clientWidth<e,this.scrollbarWidth=this.measureScrollbar()},n.prototype.setScrollbar=function(){var e=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",e+this.scrollbarWidth)},n.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},n.prototype.measureScrollbar=function(){var e=document.createElement("div");e.className="modal-scrollbar-measure",this.$body.append(e);var t=e.offsetWidth-e.clientWidth;return this.$body[0].removeChild(e),t};var r=e.fn.modal;e.fn.modal=t,e.fn.modal.Constructor=n,e.fn.modal.noConflict=function(){return e.fn.modal=r,this},e(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(n){var r=e(this),i=r.attr("href"),s=e(r.attr("data-target")||i&&i.replace(/.*(?=#[^\s]+$)/,"")),o=s.data("bs.modal")?"toggle":e.extend({remote:!/#/.test(i)&&i},s.data(),r.data());r.is("a")&&n.preventDefault(),s.one("show.bs.modal",function(e){e.isDefaultPrevented()||s.one("hidden.bs.modal",function(){r.is(":visible")&&r.trigger("focus")})}),t.call(s,o,this)})}(jQuery)},function(e,t,n){var r=n(10);e.exports=(r["default"]||r).template({1:function(e,t,n,r){var i;return this.escapeExpression((i=null!=(i=t.modalClassName||(null!=e?e.modalClassName:e))?i:t.helperMissing,"function"==typeof i?i.call(e,{name:"modalClassName",hash:{},data:r}):i))},3:function(e,t,n,r){var i,s;return'    <div class="x-modal-hd">\n      <h3 class="x-modal-title">'+(null!=(s=null!=(s=t.title||(null!=e?e.title:e))?s:t.helperMissing,i="function"==typeof s?s.call(e,{name:"title",hash:{},data:r}):s)?i:"")+"</h3>\n    </div>\n"},5:function(e,t,n,r){var i,s;return'    <div class="x-modal-bd">\n      '+(null!=(s=null!=(s=t.content||(null!=e?e.content:e))?s:t.helperMissing,i="function"==typeof s?s.call(e,{name:"content",hash:{},data:r}):s)?i:"")+"\n    </div>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,r){var i;return'<div class="x-modal fade '+(null!=(i=t["if"].call(e,null!=e?e.modalClassName:e,{name:"if",hash:{},fn:this.program(1,r,0),inverse:this.noop,data:r}))?i:"")+'">\n  <div class="x-modal-content">\n'+(null!=(i=t["if"].call(e,null!=e?e.title:e,{name:"if",hash:{},fn:this.program(3,r,0),inverse:this.noop,data:r}))?i:"")+'    <span class="x-modal-hide">&times;</span>\n'+(null!=(i=t["if"].call(e,null!=e?e.content:e,{name:"if",hash:{},fn:this.program(5,r,0),inverse:this.noop,data:r}))?i:"")+"  </div>\n</div>\n"},useData:!0})},function(e,t,n){e.exports=n(11)["default"]},function(e,t,n){"use strict";function r(){var e=new o.HandlebarsEnvironment;return h.extend(e,o),e.SafeString=a["default"],e.Exception=l["default"],e.Utils=h,e.escapeExpression=h.escapeExpression,e.VM=d,e.template=function(t){return d.template(t,e)},e}var i=function(e){return e&&e.__esModule?e:{"default":e}};t.__esModule=!0;var s=n(13),o=i(s),u=n(15),a=i(u),f=n(14),l=i(f),c=n(12),h=i(c),p=n(16),d=i(p),v=n(17),m=i(v),g=r();g.create=r,m["default"](g),g["default"]=g,t["default"]=g,e.exports=t["default"]},function(e,t){"use strict";function n(e){return f[e]}function r(e){for(var t=1;t<arguments.length;t++)for(var n in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],n)&&(e[n]=arguments[t][n]);return e}function i(e,t){for(var n=0,r=e.length;r>n;n++)if(e[n]===t)return n;return-1}function s(e){if("string"!=typeof e){if(e&&e.toHTML)return e.toHTML();if(null==e)return"";if(!e)return e+"";e=""+e}return c.test(e)?e.replace(l,n):e}function o(e){return e||0===e?d(e)&&0===e.length?!0:!1:!0}function u(e,t){return e.path=t,e}function a(e,t){return(e?e+".":"")+t}t.__esModule=!0,t.extend=r,t.indexOf=i,t.escapeExpression=s,t.isEmpty=o,t.blockParams=u,t.appendContextPath=a;var f={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},l=/[&<>"'`]/g,c=/[&<>"'`]/,h=Object.prototype.toString;t.toString=h;var p=function(e){return"function"==typeof e};p(/x/)&&(t.isFunction=p=function(e){return"function"==typeof e&&"[object Function]"===h.call(e)});var p;t.isFunction=p;var d=Array.isArray||function(e){return e&&"object"==typeof e?"[object Array]"===h.call(e):!1};t.isArray=d},function(e,t,n){"use strict";function r(e,t){this.helpers=e||{},this.partials=t||{},i(this)}function i(e){e.registerHelper("helperMissing",function(){if(1===arguments.length)return void 0;throw new l["default"]('Missing helper: "'+arguments[arguments.length-1].name+'"')}),e.registerHelper("blockHelperMissing",function(t,n){var r=n.inverse,i=n.fn;if(t===!0)return i(this);if(t===!1||null==t)return r(this);if(d(t))return t.length>0?(n.ids&&(n.ids=[n.name]),e.helpers.each(t,n)):r(this);if(n.data&&n.ids){var o=s(n.data);o.contextPath=a.appendContextPath(n.data.contextPath,n.name),n={data:o}}return i(t,n)}),e.registerHelper("each",function(e,t){function n(t,n,i){f&&(f.key=t,f.index=n,f.first=0===n,f.last=!!i,c&&(f.contextPath=c+t)),u+=r(e[t],{data:f,blockParams:a.blockParams([e[t],t],[c+t,null])})}if(!t)throw new l["default"]("Must pass iterator to #each");var r=t.fn,i=t.inverse,o=0,u="",f=void 0,c=void 0;if(t.data&&t.ids&&(c=a.appendContextPath(t.data.contextPath,t.ids[0])+"."),v(e)&&(e=e.call(this)),t.data&&(f=s(t.data)),e&&"object"==typeof e)if(d(e))for(var h=e.length;h>o;o++)n(o,o,o===e.length-1);else{var p=void 0;for(var m in e)e.hasOwnProperty(m)&&(p&&n(p,o-1),p=m,o++);p&&n(p,o-1,!0)}return 0===o&&(u=i(this)),u}),e.registerHelper("if",function(e,t){return v(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||a.isEmpty(e)?t.inverse(this):t.fn(this)}),e.registerHelper("unless",function(t,n){return e.helpers["if"].call(this,t,{fn:n.inverse,inverse:n.fn,hash:n.hash})}),e.registerHelper("with",function(e,t){v(e)&&(e=e.call(this));var n=t.fn;if(a.isEmpty(e))return t.inverse(this);if(t.data&&t.ids){var r=s(t.data);r.contextPath=a.appendContextPath(t.data.contextPath,t.ids[0]),t={data:r}}return n(e,t)}),e.registerHelper("log",function(t,n){var r=n.data&&null!=n.data.level?parseInt(n.data.level,10):1;e.log(r,t)}),e.registerHelper("lookup",function(e,t){return e&&e[t]})}function s(e){var t=a.extend({},e);return t._parent=e,t}var o=function(e){return e&&e.__esModule?e:{"default":e}};t.__esModule=!0,t.HandlebarsEnvironment=r,t.createFrame=s;var u=n(12),a=o(u),f=n(14),l=o(f),c="3.0.1";t.VERSION=c;var h=6;t.COMPILER_REVISION=h;var p={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1"};t.REVISION_CHANGES=p;var d=a.isArray,v=a.isFunction,m=a.toString,g="[object Object]";r.prototype={constructor:r,logger:y,log:b,registerHelper:function(e,t){if(m.call(e)===g){if(t)throw new l["default"]("Arg not supported with multiple helpers");a.extend(this.helpers,e)}else this.helpers[e]=t},unregisterHelper:function(e){delete this.helpers[e]},registerPartial:function(e,t){if(m.call(e)===g)a.extend(this.partials,e);else{if("undefined"==typeof t)throw new l["default"]("Attempting to register a partial as undefined");this.partials[e]=t}},unregisterPartial:function(e){delete this.partials[e]}};var y={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:1,log:function(e,t){if("undefined"!=typeof console&&y.level<=e){var n=y.methodMap[e];(console[n]||console.log).call(console,t)}}};t.logger=y;var b=y.log;t.log=b},function(e,t){"use strict";function n(e,t){var s=t&&t.loc,o=void 0,u=void 0;s&&(o=s.start.line,u=s.start.column,e+=" - "+o+":"+u);for(var a=Error.prototype.constructor.call(this,e),f=0;f<r.length;f++)this[r[f]]=a[r[f]];Error.captureStackTrace&&Error.captureStackTrace(this,n),s&&(this.lineNumber=o,this.column=u)}t.__esModule=!0;var r=["description","fileName","lineNumber","message","name","number","stack"];n.prototype=new Error,t["default"]=n,e.exports=t["default"]},function(e,t){"use strict";function n(e){this.string=e}t.__esModule=!0,n.prototype.toString=n.prototype.toHTML=function(){return""+this.string},t["default"]=n,e.exports=t["default"]},function(e,t,n){"use strict";function r(e){var t=e&&e[0]||1,n=v.COMPILER_REVISION;if(t!==n){if(n>t){var r=v.REVISION_CHANGES[n],i=v.REVISION_CHANGES[t];throw new d["default"]("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+r+") or downgrade your runtime to an older version ("+i+").")}throw new d["default"]("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")}}function i(e,t){function n(n,r,i){i.hash&&(r=h.extend({},r,i.hash)),n=t.VM.resolvePartial.call(this,n,r,i);var s=t.VM.invokePartial.call(this,n,r,i);if(null==s&&t.compile&&(i.partials[i.name]=t.compile(n,e.compilerOptions,t),s=i.partials[i.name](r,i)),null!=s){if(i.indent){for(var o=s.split("\n"),u=0,a=o.length;a>u&&(o[u]||u+1!==a);u++)o[u]=i.indent+o[u];s=o.join("\n")}return s}throw new d["default"]("The partial "+i.name+" could not be compiled when running in runtime-only mode")}function r(t){var n=void 0===arguments[1]?{}:arguments[1],s=n.data;r._setup(n),!n.partial&&e.useData&&(s=f(t,s));var o=void 0,u=e.useBlockParams?[]:void 0;return e.useDepths&&(o=n.depths?[t].concat(n.depths):[t]),e.main.call(i,t,i.helpers,i.partials,s,u,o)}if(!t)throw new d["default"]("No environment passed to template");if(!e||!e.main)throw new d["default"]("Unknown template object: "+typeof e);t.VM.checkRevision(e.compiler);var i={strict:function(e,t){if(t in e)return e[t];throw new d["default"]('"'+t+'" not defined in '+e)},lookup:function(e,t){for(var n=e.length,r=0;n>r;r++)if(e[r]&&null!=e[r][t])return e[r][t]},lambda:function(e,t){return"function"==typeof e?e.call(t):e},escapeExpression:h.escapeExpression,invokePartial:n,fn:function(t){return e[t]},programs:[],program:function(e,t,n,r,i){var o=this.programs[e],u=this.fn(e);return t||i||r||n?o=s(this,e,u,t,n,r,i):o||(o=this.programs[e]=s(this,e,u)),o},data:function(e,t){for(;e&&t--;)e=e._parent;return e},merge:function(e,t){var n=e||t;return e&&t&&e!==t&&(n=h.extend({},t,e)),n},noop:t.VM.noop,compilerInfo:e.compiler};return r.isTop=!0,r._setup=function(n){n.partial?(i.helpers=n.helpers,i.partials=n.partials):(i.helpers=i.merge(n.helpers,t.helpers),e.usePartial&&(i.partials=i.merge(n.partials,t.partials)))},r._child=function(t,n,r,o){if(e.useBlockParams&&!r)throw new d["default"]("must pass block params");if(e.useDepths&&!o)throw new d["default"]("must pass parent depths");return s(i,t,e[t],n,0,r,o)},r}function s(e,t,n,r,i,s,o){function u(t){var i=void 0===arguments[1]?{}:arguments[1];return n.call(e,t,e.helpers,e.partials,i.data||r,s&&[i.blockParams].concat(s),o&&[t].concat(o))}return u.program=t,u.depth=o?o.length:0,u.blockParams=i||0,u}function o(e,t,n){return e?e.call||n.name||(n.name=e,e=n.partials[e]):e=n.partials[n.name],e}function u(e,t,n){if(n.partial=!0,void 0===e)throw new d["default"]("The partial "+n.name+" could not be found");return e instanceof Function?e(t,n):void 0}function a(){return""}function f(e,t){return t&&"root"in t||(t=t?v.createFrame(t):{},t.root=e),t}var l=function(e){return e&&e.__esModule?e:{"default":e}};t.__esModule=!0,t.checkRevision=r,t.template=i,t.wrapProgram=s,t.resolvePartial=o,t.invokePartial=u,t.noop=a;var c=n(12),h=l(c),p=n(14),d=l(p),v=n(13)},function(e,t){(function(n){"use strict";t.__esModule=!0,t["default"]=function(e){var t="undefined"!=typeof n?n:window,r=t.Handlebars;e.noConflict=function(){t.Handlebars===e&&(t.Handlebars=r)}},e.exports=t["default"]}).call(t,function(){return this}())},function(e,t,n){var r=n(10);e.exports=(r["default"]||r).template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,r){var i,s;return'<div class="x-modal-confirm">\n  '+(null!=(s=null!=(s=t.content||(null!=e?e.content:e))?s:t.helperMissing,i="function"==typeof s?s.call(e,{name:"content",hash:{},data:r}):s)?i:"")+'\n</div>\n<div class="x-modal-btns">\n  <button class="x-modal-btn j-sure">\u786e\u5b9a</button><button class="x-modal-btn x-modal-btn-cancel">\u53d6\u6d88</button>\n</div>'},useData:!0})},function(e,t,n){var r=n(10);e.exports=(r["default"]||r).template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,r){var i,s;return'<div class="x-modal-confirm">\n  '+(null!=(s=null!=(s=t.content||(null!=e?e.content:e))?s:t.helperMissing,i="function"==typeof s?s.call(e,{name:"content",hash:{},data:r}):s)?i:"")+'\n</div>\n<div class="x-modal-btns">\n  <button class="x-modal-btn j-sure">\u786e\u5b9a</button>\n</div>'},useData:!0})},,function(e,t){function n(e,t,n){var i=$(u),s="id-"+$.now();f[s]=i,t.data("tip-id",s),i.appendTo(document.body),i.html(n),i.css(r(e.pageX,e.pageY,i)),i.addClass("x-tips-show")}function r(e,t,n){var r,i,s={x:5,y:15},o=$(document.body).width(),u=$(document.body).height(),a=n.outerWidth(),f=n.outerHeight();return r=e+a+s.x>o?e-a-s.x:e+s.x,i=t+f+s.y>u?t-f-s.y:t+s.y,{left:r,top:i}}function i(e){var t=e.data("tip-id"),n=f[t];n&&(n.removeClass("x-tips-show"),setTimeout(function(){n.remove()},o))}var s=$(document);if(!s.data("x-tips-init")){s.data("x-tips-init",!0);var o=350,u='<div class="x-tips"></div>',a="data-tips",f={};s.on("mouseenter","["+a+"]",function(e){var t=$(this);n(e,t,t.attr(a))}),s.on("mouseleave","["+a+"]",function(){var e=$(this);i(e)})}},,,function(e,t){e.exports=function(e,t,n,r){switch(t){case"==":return e==n?r.fn(this):r.inverse(this);case"!=":return e!=n?r.fn(this):r.inverse(this);case"===":return e===n?r.fn(this):r.inverse(this);case"!==":return e!==n?r.fn(this):r.inverse(this);case"<":return n>e?r.fn(this):r.inverse(this);case">":return e>n?r.fn(this):r.inverse(this);case">=":return e>=n?r.fn(this):r.inverse(this);case"<=":return n>=e?r.fn(this):r.inverse(this);case"&&":return e&&n?r.fn(this):r.inverse(this);case"||":return e||n?r.fn(this):r.inverse(this);default:return r.inverse(this)}}},function(e,t){"use strict";e.exports=function(e){if(e&&-1===e.indexOf("/dmfd/")){var t=document.createElement("a");t.href=e,e=t.protocol+"//"+t.hostname+"/dmfd/200_200_100"+("/"==t.pathname[0]?t.pathname:"/"+t.pathname)}return e}},function(e,t,n){var r=n(10);e.exports=(r["default"]||r).template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,r){var i;return'<div class="panda-search '+this.escapeExpression((i=null!=(i=t.ctCls||(null!=e?e.ctCls:e))?i:t.helperMissing,"function"==typeof i?i.call(e,{name:"ctCls",hash:{},data:r}):i))+'">\r\n  <form name="room-search" action="/search" method="get" target="_top" class="search-form">\r\n    <input type="text" name="kw" value="\u641c\u6e38\u620f/\u4e3b\u64ad" autocomplete="off" class="search-key search-default">\r\n    <div class="search-submit-btn">\r\n      <input type="submit" class="search-submit">\r\n    </div>\r\n  </form>\r\n</div>'},useData:!0})},function(e,t,n){"use strict";function r(e,t){s=$(e),s.data("initialized")||(s.data("initialized",!0),s.html(o($.extend({},t))),i(s.find(".panda-search")))}function i(e){var t=$(e),n=t.find(".search-key");t.find(".search-form").submit(function(e){var t=n.val();return t=$.trim(t),t&&"\u641c\u6e38\u620f/\u4e3b\u64ad"!=t?void n.val(t.substring(0,15)):!1}),n.focus(function(){var e=n.val();e=$.trim(e),"\u641c\u6e38\u620f/\u4e3b\u64ad"==e&&n.val(""),n.removeClass("search-default")}).blur(function(){var e=n.val();e=$.trim(e),e||n.addClass("search-default").val("\u641c\u6e38\u620f/\u4e3b\u64ad")})}var s,o=n(26);e.exports={init:r,initSearch:i}},function(e,t,n){"use strict";var r=n(29);e.exports=n(31),e.exports.logout=function(){return r.logout()},e.exports.rucInterface=r},function(e,t,n){"use strict";function r(e,t){return t=t||{},$.ajax("http://u.panda.tv/"+e,{data:t,dataType:"jsonp",jsonp:"_jp"})}function i(e,t){return t=t||{},$.ajax("https://u.panda.tv/"+e,{data:t,dataType:"jsonp",jsonp:"_jp"})}function s(e){var t=$.Deferred();return $.when(i("ajax_aeskey")).then(function(n){var r=n.data||"";r=v.enc.Utf8.parse(r);var i=v.enc.Utf8.parse("995d1b5ebbac3761"),s=v.AES.encrypt(e,r,{iv:i,mode:v.mode.CBC,padding:v.pad.ZeroPadding}).toString();t.resolve(s)}).fail(function(){t.resolve(null)}),t.promise()}function o(e,t){var n=$.Deferred(),r=v.enc.Utf8.parse(e),i=v.enc.Utf8.parse("995d1b5ebbac3761"),s=v.AES.encrypt(t,r,{iv:i,mode:v.mode.CBC,padding:v.pad.ZeroPadding}).toString();return n.resolve(s),n}function u(e){return i("ajax_login",e)}function a(e){return i("ajax_mobile_register",e)}function f(){return r("logout")}function l(){var e=$.Deferred();return r("auth").then(function(t){0==t.errno&&t.data?e.resolve(t.data):e.resolve(null)}),e.promise()}function c(e){var t=$.Deferred();return r("ajax_check_nickname",e).then(function(e){0==e.errno&&e.data?t.resolve(e.data):t.resolve(null)}),t.promise()}function h(e,t){var n=$.Deferred();return e=$.extend(e,t),r("ajax_send_register_sms",e).then(function(e){0==e.errno?n.resolve():n.reject(e)}),n.promise()}function p(e){var t=$.Deferred();return e=$.extend(e,{smsType:"remoteLoginCtrlMsg"}),r("ajax_send_sms",e).then(function(e){0==e.errno?t.resolve():t.reject(e)}),t.promise()}function d(e){var t=$.Deferred();return r("geoinfo").then(function(e){0!=e.errno||e.data?t.resolve({data:1}):t.resolve(e.data)}),t.promise()}var v=n(30),m={getAesWord:o,aesPassword:s,login:u,regist:a,logout:f,getUserInfo:l,checkNickNameRepeat:c,requestRegistVCode:h,requestLoginVCode:p,getIpInfo:d};e.exports=m},function(e,t){var n=e.exports=n||function(e,t){var n={},r=n.lib={},i=function(){},s=r.Base={extend:function(e){i.prototype=this;var t=new i;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},o=r.WordArray=s.extend({init:function(e,n){e=this.words=e||[],this.sigBytes=n!=t?n:4*e.length},toString:function(e){return(e||a).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes;if(e=e.sigBytes,this.clamp(),r%4)for(var i=0;e>i;i++
)t[r+i>>>2]|=(n[i>>>2]>>>24-8*(i%4)&255)<<24-8*((r+i)%4);else if(65535<n.length)for(i=0;e>i;i+=4)t[r+i>>>2]=n[i>>>2];else t.push.apply(t,n);return this.sigBytes+=e,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-8*(n%4),t.length=e.ceil(n/4)},clone:function(){var e=s.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n=[],r=0;t>r;r+=4)n.push(4294967296*e.random()|0);return new o.init(n,t)}}),u=n.enc={},a=u.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],r=0;e>r;r++){var i=t[r>>>2]>>>24-8*(r%4)&255;n.push((i>>>4).toString(16)),n.push((15&i).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,n=[],r=0;t>r;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-4*(r%8);return new o.init(n,t/2)}},f=u.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],r=0;e>r;r++)n.push(String.fromCharCode(t[r>>>2]>>>24-8*(r%4)&255));return n.join("")},parse:function(e){for(var t=e.length,n=[],r=0;t>r;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-8*(r%4);return new o.init(n,t)}},l=u.Utf8={stringify:function(e){try{return decodeURIComponent(escape(f.stringify(e)))}catch(t){throw Error("Malformed UTF-8 data")}},parse:function(e){return f.parse(unescape(encodeURIComponent(e)))}},c=r.BufferedBlockAlgorithm=s.extend({reset:function(){this._data=new o.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=l.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,r=n.words,i=n.sigBytes,s=this.blockSize,u=i/(4*s),u=t?e.ceil(u):e.max((0|u)-this._minBufferSize,0);if(t=u*s,i=e.min(4*t,i),t){for(var a=0;t>a;a+=s)this._doProcessBlock(r,a);a=r.splice(0,t),n.sigBytes-=i}return new o.init(a,i)},clone:function(){var e=s.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});r.Hasher=c.extend({cfg:s.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){c.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return(new e.init(n)).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return(new h.HMAC.init(e,n)).finalize(t)}}});var h=n.algo={};return n}(Math);!function(){var e=n,t=e.lib.WordArray;e.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,r=this._map;e.clamp(),e=[];for(var i=0;n>i;i+=3)for(var s=(t[i>>>2]>>>24-8*(i%4)&255)<<16|(t[i+1>>>2]>>>24-8*((i+1)%4)&255)<<8|t[i+2>>>2]>>>24-8*((i+2)%4)&255,o=0;4>o&&n>i+.75*o;o++)e.push(r.charAt(s>>>6*(3-o)&63));if(t=r.charAt(64))for(;e.length%4;)e.push(t);return e.join("")},parse:function(e){var n=e.length,r=this._map,i=r.charAt(64);i&&(i=e.indexOf(i),-1!=i&&(n=i));for(var i=[],s=0,o=0;n>o;o++)if(o%4){var u=r.indexOf(e.charAt(o-1))<<2*(o%4),a=r.indexOf(e.charAt(o))>>>6-2*(o%4);i[s>>>2]|=(u|a)<<24-8*(s%4),s++}return t.create(i,s)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(e){function t(e,t,n,r,i,s,o){return e=e+(t&n|~t&r)+i+o,(e<<s|e>>>32-s)+t}function r(e,t,n,r,i,s,o){return e=e+(t&r|n&~r)+i+o,(e<<s|e>>>32-s)+t}function i(e,t,n,r,i,s,o){return e=e+(t^n^r)+i+o,(e<<s|e>>>32-s)+t}function s(e,t,n,r,i,s,o){return e=e+(n^(t|~r))+i+o,(e<<s|e>>>32-s)+t}for(var o=n,u=o.lib,a=u.WordArray,f=u.Hasher,u=o.algo,l=[],c=0;64>c;c++)l[c]=4294967296*e.abs(e.sin(c+1))|0;u=u.MD5=f.extend({_doReset:function(){this._hash=new a.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,n){for(var o=0;16>o;o++){var u=n+o,a=e[u];e[u]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8)}var o=this._hash.words,u=e[n+0],a=e[n+1],f=e[n+2],c=e[n+3],h=e[n+4],p=e[n+5],d=e[n+6],v=e[n+7],m=e[n+8],g=e[n+9],y=e[n+10],b=e[n+11],w=e[n+12],E=e[n+13],S=e[n+14],x=e[n+15],T=o[0],N=o[1],C=o[2],k=o[3],T=t(T,N,C,k,u,7,l[0]),k=t(k,T,N,C,a,12,l[1]),C=t(C,k,T,N,f,17,l[2]),N=t(N,C,k,T,c,22,l[3]),T=t(T,N,C,k,h,7,l[4]),k=t(k,T,N,C,p,12,l[5]),C=t(C,k,T,N,d,17,l[6]),N=t(N,C,k,T,v,22,l[7]),T=t(T,N,C,k,m,7,l[8]),k=t(k,T,N,C,g,12,l[9]),C=t(C,k,T,N,y,17,l[10]),N=t(N,C,k,T,b,22,l[11]),T=t(T,N,C,k,w,7,l[12]),k=t(k,T,N,C,E,12,l[13]),C=t(C,k,T,N,S,17,l[14]),N=t(N,C,k,T,x,22,l[15]),T=r(T,N,C,k,a,5,l[16]),k=r(k,T,N,C,d,9,l[17]),C=r(C,k,T,N,b,14,l[18]),N=r(N,C,k,T,u,20,l[19]),T=r(T,N,C,k,p,5,l[20]),k=r(k,T,N,C,y,9,l[21]),C=r(C,k,T,N,x,14,l[22]),N=r(N,C,k,T,h,20,l[23]),T=r(T,N,C,k,g,5,l[24]),k=r(k,T,N,C,S,9,l[25]),C=r(C,k,T,N,c,14,l[26]),N=r(N,C,k,T,m,20,l[27]),T=r(T,N,C,k,E,5,l[28]),k=r(k,T,N,C,f,9,l[29]),C=r(C,k,T,N,v,14,l[30]),N=r(N,C,k,T,w,20,l[31]),T=i(T,N,C,k,p,4,l[32]),k=i(k,T,N,C,m,11,l[33]),C=i(C,k,T,N,b,16,l[34]),N=i(N,C,k,T,S,23,l[35]),T=i(T,N,C,k,a,4,l[36]),k=i(k,T,N,C,h,11,l[37]),C=i(C,k,T,N,v,16,l[38]),N=i(N,C,k,T,y,23,l[39]),T=i(T,N,C,k,E,4,l[40]),k=i(k,T,N,C,u,11,l[41]),C=i(C,k,T,N,c,16,l[42]),N=i(N,C,k,T,d,23,l[43]),T=i(T,N,C,k,g,4,l[44]),k=i(k,T,N,C,w,11,l[45]),C=i(C,k,T,N,x,16,l[46]),N=i(N,C,k,T,f,23,l[47]),T=s(T,N,C,k,u,6,l[48]),k=s(k,T,N,C,v,10,l[49]),C=s(C,k,T,N,S,15,l[50]),N=s(N,C,k,T,p,21,l[51]),T=s(T,N,C,k,w,6,l[52]),k=s(k,T,N,C,c,10,l[53]),C=s(C,k,T,N,y,15,l[54]),N=s(N,C,k,T,a,21,l[55]),T=s(T,N,C,k,m,6,l[56]),k=s(k,T,N,C,x,10,l[57]),C=s(C,k,T,N,d,15,l[58]),N=s(N,C,k,T,E,21,l[59]),T=s(T,N,C,k,h,6,l[60]),k=s(k,T,N,C,b,10,l[61]),C=s(C,k,T,N,f,15,l[62]),N=s(N,C,k,T,g,21,l[63]);o[0]=o[0]+T|0,o[1]=o[1]+N|0,o[2]=o[2]+C|0,o[3]=o[3]+k|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,i=8*t.sigBytes;n[i>>>5]|=128<<24-i%32;var s=e.floor(r/4294967296);for(n[(i+64>>>9<<4)+15]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),n[(i+64>>>9<<4)+14]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),t.sigBytes=4*(n.length+1),this._process(),t=this._hash,n=t.words,r=0;4>r;r++)i=n[r],n[r]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8);return t},clone:function(){var e=f.clone.call(this);return e._hash=this._hash.clone(),e}}),o.MD5=f._createHelper(u),o.HmacMD5=f._createHmacHelper(u)}(Math),function(){var e=n,t=e.lib,r=t.Base,i=t.WordArray,t=e.algo,s=t.EvpKDF=r.extend({cfg:r.extend({keySize:4,hasher:t.MD5,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n=this.cfg,r=n.hasher.create(),s=i.create(),o=s.words,u=n.keySize,n=n.iterations;o.length<u;){a&&r.update(a);var a=r.update(e).finalize(t);r.reset();for(var f=1;n>f;f++)a=r.finalize(a),r.reset();s.concat(a)}return s.sigBytes=4*u,s}});e.EvpKDF=function(e,t,n){return s.create(n).compute(e,t)}}(),n.lib.Cipher||function(e){var t=n,r=t.lib,i=r.Base,s=r.WordArray,o=r.BufferedBlockAlgorithm,u=t.enc.Base64,a=t.algo.EvpKDF,f=r.Cipher=o.extend({cfg:i.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,n){this.cfg=this.cfg.extend(n),this._xformMode=e,this._key=t,this.reset()},reset:function(){o.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(e){return{encrypt:function(t,n,r){return("string"==typeof n?v:d).encrypt(e,t,n,r)},decrypt:function(t,n,r){return("string"==typeof n?v:d).decrypt(e,t,n,r)}}}});r.StreamCipher=f.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var l=t.mode={},c=function(t,n,r){var i=this._iv;i?this._iv=e:i=this._prevBlock;for(var s=0;r>s;s++)t[n+s]^=i[s]},h=(r.BlockCipherMode=i.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}})).extend();h.Encryptor=h.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize;c.call(this,e,t,r),n.encryptBlock(e,t),this._prevBlock=e.slice(t,t+r)}}),h.Decryptor=h.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize,i=e.slice(t,t+r);n.decryptBlock(e,t),c.call(this,e,t,r),this._prevBlock=i}}),l=l.CBC=h,h=(t.pad={}).Pkcs7={pad:function(e,t){for(var n=4*t,n=n-e.sigBytes%n,r=n<<24|n<<16|n<<8|n,i=[],o=0;n>o;o+=4)i.push(r);n=s.create(i,n),e.concat(n)},unpad:function(e){e.sigBytes-=255&e.words[e.sigBytes-1>>>2]}},r.BlockCipher=f.extend({cfg:f.cfg.extend({mode:l,padding:h}),reset:function(){f.reset.call(this);var e=this.cfg,t=e.iv,e=e.mode;if(this._xformMode==this._ENC_XFORM_MODE)var n=e.createEncryptor;else n=e.createDecryptor,this._minBufferSize=1;this._mode=n.call(e,this,t&&t.words)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else t=this._process(!0),e.unpad(t);return t},blockSize:4});var p=r.CipherParams=i.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),l=(t.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext;return e=e.salt,(e?s.create([1398893684,1701076831]).concat(e).concat(t):t).toString(u)},parse:function(e){e=u.parse(e);var t=e.words;if(1398893684==t[0]&&1701076831==t[1]){var n=s.create(t.slice(2,4));t.splice(0,4),e.sigBytes-=16}return p.create({ciphertext:e,salt:n})}},d=r.SerializableCipher=i.extend({cfg:i.extend({format:l}),encrypt:function(e,t,n,r){r=this.cfg.extend(r);var i=e.createEncryptor(n,r);return t=i.finalize(t),i=i.cfg,p.create({ciphertext:t,key:n,iv:i.iv,algorithm:e,mode:i.mode,padding:i.padding,blockSize:e.blockSize,formatter:r.format})},decrypt:function(e,t,n,r){return r=this.cfg.extend(r),t=this._parse(t,r.format),e.createDecryptor(n,r).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),t=(t.kdf={}).OpenSSL={execute:function(e,t,n,r){return r||(r=s.random(8)),e=a.create({keySize:t+n}).compute(e,r),n=s.create(e.words.slice(t),4*n),e.sigBytes=4*t,p.create({key:e,iv:n,salt:r})}},v=r.PasswordBasedCipher=d.extend({cfg:d.cfg.extend({kdf:t}),encrypt:function(e,t,n,r){return r=this.cfg.extend(r),n=r.kdf.execute(n,e.keySize,e.ivSize),r.iv=n.iv,e=d.encrypt.call(this,e,t,n.key,r),e.mixIn(n),e},decrypt:function(e,t,n,r){return r=this.cfg.extend(r),t=this._parse(t,r.format),n=r.kdf.execute(n,e.keySize,e.ivSize,t.salt),r.iv=n.iv,d.decrypt.call(this,e,t,n.key,r)}})}(),function(){for(var e=n,t=e.lib.BlockCipher,r=e.algo,i=[],s=[],o=[],u=[],a=[],f=[],l=[],c=[],h=[],p=[],d=[],v=0;256>v;v++)d[v]=128>v?v<<1:v<<1^283;for(var m=0,g=0,v=0;256>v;v++){var y=g^g<<1^g<<2^g<<3^g<<4,y=y>>>8^255&y^99;i[m]=y,s[y]=m;var b=d[m],w=d[b],E=d[w],S=257*d[y]^16843008*y;o[m]=S<<24|S>>>8,u[m]=S<<16|S>>>16,a[m]=S<<8|S>>>24,f[m]=S,S=16843009*E^65537*w^257*b^16843008*m,l[y]=S<<24|S>>>8,c[y]=S<<16|S>>>16,h[y]=S<<8|S>>>24,p[y]=S,m?(m=b^d[d[d[E^b]]],g^=d[d[g]]):m=g=1}var x=[0,1,2,4,8,16,32,64,128,27,54],r=r.AES=t.extend({_doReset:function(){for(var e=this._key,t=e.words,n=e.sigBytes/4,e=4*((this._nRounds=n+6)+1),r=this._keySchedule=[],s=0;e>s;s++)if(n>s)r[s]=t[s];else{var o=r[s-1];s%n?n>6&&4==s%n&&(o=i[o>>>24]<<24|i[o>>>16&255]<<16|i[o>>>8&255]<<8|i[255&o]):(o=o<<8|o>>>24,o=i[o>>>24]<<24|i[o>>>16&255]<<16|i[o>>>8&255]<<8|i[255&o],o^=x[s/n|0]<<24),r[s]=r[s-n]^o}for(t=this._invKeySchedule=[],n=0;e>n;n++)s=e-n,o=n%4?r[s]:r[s-4],t[n]=4>n||4>=s?o:l[i[o>>>24]]^c[i[o>>>16&255]]^h[i[o>>>8&255]]^p[i[255&o]]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,o,u,a,f,i)},decryptBlock:function(e,t){var n=e[t+1];e[t+1]=e[t+3],e[t+3]=n,this._doCryptBlock(e,t,this._invKeySchedule,l,c,h,p,s),n=e[t+1],e[t+1]=e[t+3],e[t+3]=n},_doCryptBlock:function(e,t,n,r,i,s,o,u){for(var a=this._nRounds,f=e[t]^n[0],l=e[t+1]^n[1],c=e[t+2]^n[2],h=e[t+3]^n[3],p=4,d=1;a>d;d++)var v=r[f>>>24]^i[l>>>16&255]^s[c>>>8&255]^o[255&h]^n[p++],m=r[l>>>24]^i[c>>>16&255]^s[h>>>8&255]^o[255&f]^n[p++],g=r[c>>>24]^i[h>>>16&255]^s[f>>>8&255]^o[255&l]^n[p++],h=r[h>>>24]^i[f>>>16&255]^s[l>>>8&255]^o[255&c]^n[p++],f=v,l=m,c=g;v=(u[f>>>24]<<24|u[l>>>16&255]<<16|u[c>>>8&255]<<8|u[255&h])^n[p++],m=(u[l>>>24]<<24|u[c>>>16&255]<<16|u[h>>>8&255]<<8|u[255&f])^n[p++],g=(u[c>>>24]<<24|u[h>>>16&255]<<16|u[f>>>8&255]<<8|u[255&l])^n[p++],h=(u[h>>>24]<<24|u[f>>>16&255]<<16|u[l>>>8&255]<<8|u[255&c])^n[p++],e[t]=v,e[t+1]=m,e[t+2]=g,e[t+3]=h},keySize:8});e.AES=t._createHelper(r)}(),n.pad.ZeroPadding={pad:function(e,t){var n=4*t;e.clamp(),e.sigBytes+=n-(e.sigBytes%n||n)},unpad:function(e){for(var t=e.words,n=e.sigBytes-1;!(t[n>>>2]>>>24-n%4*8&255);)n--;e.sigBytes=n+1}}},function(e,t,n){"use strict";function r(e){for(var t in T)for(var n=T[t].length;n--;)if(T[t][n]==e)return t;return"ruc_error_common_msg"}function i(){try{window.top.location.reload()}catch(e){window.top.location.href=window.top.location.href}}function s(e){var t=$.Deferred();return 0==e.errno?t.resolve(e.data):t.reject(e),t.promise()}n(47),n(48),n(49)(window.jQuery);var o=n(3),u=o.dispatcher,a=o.util,f=o.define,l=null,c=n(71),h=n(29),p=n(86),d=n(32),v=!1,m=!1,g="380",y="310",b={out:"360","in":"310",verifyIn:"380",verifyOut:"420"},w=n(87),E=n(88),S=n(89),x=(n(90),n(91),n(92)),T={ruc_error_common_msg:[-100,-8,1420,1421],ruc_error_text_name:[-1,1303],ruc_error_text_password:[-2],ruc_error_text_confirm:[-3],ruc_error_text_nickname:[-4,1501,1502,1503],ruc_error_text_auth:[-5,1408,1406,1407],ruc_error_text_agreement:[-6],ruc_error_text_code:[-7,1422],ruc_error_text_realname:[-9],ruc_error_text_id_card:[-10]},N={showType:"login",registFunc:i,loginFunc:i},C=f({event:null,container:null,el:null,preKeyV:null,isVisible:!1,countdownButton:new p,initialize:function(){this.event=new u(this)},customLoginAndRegisterCallback:function(e){e.hasOwnProperty("login")&&"function"==typeof e.login&&(N.loginFunc=e.login),e.hasOwnProperty("register")&&"function"==typeof e.register&&(N.registFunc=e.register)},_render:function(e){var t=a.mixin(N,e);this.container||(this.el=$('<div class="ruc-dialog-container" style="display: none;"></div>'),this.el.css({filter:"progid:DXImageTransform.Microsoft.gradient(startColorstr=#BF000000,endColorstr=#BF000000)"}),this.el.html(w({type:"ruc-dialog-new-container"})),this.container=$(t.container||document.body),this.initEvent()),this.buildEl(t)},close:function(){this.isVisible&&(this.el.fadeOut(),this.isVisible=!1)},initEvent:function(){this.el.on("click",".ruc-dialog-close",a.bind(this.close,this)),$(document).keyup(a.bindAsEventListener(this.onSubmit,this)),$(document).keydown(a.bindAsEventListener(this.onKeyDown,this)),this.el.on("blur","input",a.bindAsEventListener(this.checkInput,this)),this.el.on("click",".ruc-goto-login-btn",a.bindAsEventListener(this.tabClickHandler,this)),this.el.on("click",".ruc-goto-register-btn",a.bindAsEventListener(this.tabClickHandler,this)),this.el.on("focus","input",a.bind(this.inputfocusUIControl,this)),this.el.on("click",".chose-check-box",a.bindAsEventListener(this.inputCheckSelcted,this)),this.initRegistEvent(),this.initLoginEvent()},tabClickHandler:function(e){var t=$(e.target);t.hasClass("selected")||(this.el.find(".ruc-dialog-header").children().removeClass("selected"),t.addClass("selected"),t.hasClass("ruc-goto-login-btn")?this.login():(PANDA_MONITOR.nlog({pae:"open",paew:"popup_layer_tab"}),this.regist()))},onKeyDown:function(e){var t=e.keyCode||e.which;this.preKeyV=t,e.stopPropagation()},onSubmit:function(e){if(this.isVisible&&!e.ctrlKey){var t=e.keyCode||e.which;13==t&&13==this.preKeyV&&this.el.find(".input-item-btn").click(),e.stopPropagation()}},checkInput:function(e){var t=this,n=$(e.target)[0].value,r=$(e.target).attr("name"),i=null;switch($(e.target).parent().removeClass("chosen"),$("#ruc_login_btn").hasClass("disabled")&&($("#ruc_error_common_msg").html(""),$("#ruc_login_btn").removeClass("disabled")),r){case"account":i=c.checkPhone(n);break;case"password":i=c.checkPassword(n);break;case"confirm":i=c.checkConfirm($(".ruc-input-register-password")[0].value,n);break;case"nickname":i=c.checkNickName(n);break;case"auth":case"voice-verify":i=c.checkAuth(n);break;case"agreement":return $(".agreement-checkbox").prop("checked")&&$("#ruc_error_text_agreement").html(""),!1;case"code":i=c.checkCode(n);break;case"captcha":i=c.checkCaptcha(n);break;case"realname":i=c.checkRealname(n);break;case"idcard":i=c.checkIDCard(n);break;default:return!1}return i.then(function(){$(e.target).hasClass("ruc-input-register-name")&&$("#ruc-send-auth-code-btn").addClass("cn-click");var t=$(e.target).nextAll(".input-item-error-text"),n=t.html();""!=n&&t.html(""),$(e.target).next(".icon-ok").css("visibility","visible")}).fail(function(n){var r=n.errmsg,i=$(e.target).nextAll(".input-item-error-text"),s=i.html();s!=r&&i.html(r),-1===n.errno&&$("#ruc-send-auth-code-btn").removeClass("cn-click"),$(e.target).next(".icon-ok").css("visibility","hidden"),t._logError()}),!1},initRegistEvent:function(){this.el.on("click","#ruc-go-login",a.bind(this.login,this)),this.el.on("click","#ruc_regist_btn",a.bind(this.registUser,this)),this.el.on("click","#ruc-send-auth-code-btn",a.bind(this.authCodeHandler,this)).on("keyup","#ruc-send-auth-code-btn",function(e){var t=e.which;(13===t||108===t)&&PANDA_MONITOR.nlog({pae:"key_enter",paew:"auth_code_btn"})}),this.countdownButton=null,this.countdownButton=new p,this.countdownButton.initialize({}),this.el.on("focus",".ruc-register-container input",function(e){PANDA_MONITOR.nlog({pae:"focus",paew:e.currentTarget.name})})},initLoginEvent:function(){this.el.on("click","#ruc-go-register",a.bind(this.regist,this)),this.el.on("click","#ruc_login_btn",a.bind(this.loginUser,this)),this.el.on("click","#ruc-send-voice-verify-btn",a.bind(this.sendVoiceVerify,this)),this.countdownButton=null,this.countdownButton=new p,this.countdownButton.initialize({})},thirdLoginUser:function(e){var t="",n=window.top.location.href,r="http://www.panda.tv/rucbind?href="+n,i=window.PANDA_MONITOR&&window.PANDA_MONITOR.monitorParams?window.PANDA_MONITOR.monitorParams.psrc||"":"";this.el.find(".third-way-list-item a").on("click",function(){return t=$(this).data("type"),window.top.location.href="https://u.panda.tv/third_login?type="+t+"&redirect="+encodeURIComponent(r)+"&__plat=pc_web&__guid="+$.cookie("__guid")+"&psrc="+i,!1})},inputfocusUIControl:function(e){$(e.target).parent().addClass("chosen")},inputCheckSelcted:function(e){var t=this.el.find(".chose-check-box");t.toggleClass("checked")},sendVoiceVerify:function(e){if("disable"!=this.countdownButton.state){var t=$(".ruc-input-login-name")[0].value,n=c.checkPhone(t),r=this;n.then(function(){h.requestLoginVCode({mobile:t}).then(function(){r.countdownButton.start($(e.target))}).fail(function(e){r.submitFail(e)})}).fail(function(e){r.submitFail(e)})}},authCodeHandler:function(e){if(PANDA_MONITOR.nlog({pae:"click",paew:"auth_code_btn"}),"disable"!=this.countdownButton.state){var t=$(".ruc-input-register-name")[0].value,n=c.checkPhone(t),r=this;return n.then(function(){d.init().then(function(n){var i=h.requestRegistVCode;i({mobile:t,clientType:"web"},n).then(function(){r.countdownButton.start($(e.target))}).fail(function(e){r.submitFail(e)})})}).fail(function(e){r.submitFail(e)}),!1}},registUser:function(){if(PANDA_MONITOR.nlog({pae:"click",paew:"register_btn"}),$("#ruc_error_common_msg").empty(),!$(".input-item-error-text:not(:empty)").length){var e=$(".ruc-input-register-name")[0].value,t=$("#ruc-register-password-field")[0].value,n=$(".ruc-input-register-nickname")[0].value,r=$(".ruc-input-register-auth")[0].value,i=$(".agreement-checkbox").hasClass("checked"),o=this;return n=$.trim(n),c.checkRegisterInfo(e,t,r,n,i).then(function(){return h.aesPassword(t)}).then(function(t){return h.regist({mobile:e,password:t,vcode:r,nickname:encodeURI(encodeURI(n)),__plat:"pc_web",__guid:$.cookie("__guid"),psrc:window.PANDA_MONITOR&&window.PANDA_MONITOR.monitorParams?window.PANDA_MONITOR.monitorParams.psrc||"":"",refer:window.location.href})}).then(function(e){return s(e)}).then(a.bind(this.registSuccess,this)).fail(function(e){o._logError(),o.submitFail(e)}),!1}},registSuccess:function(e){this._trigger("Register-Success",e),N.registFunc()},submitFail:function(e){var t=e.errno||-100,n=r(t);switch(this.el.find(".input-item-error-text").each(function(e,t){$(t).html("")}),t){case 1407:$("#"+n).addClass("service-register-error-text");break;case 1801:$("#"+n).addClass("service-login-error-text");break;case 1303:$("#ruc-send-auth-code-btn").removeClass("cn-click");break;case 1303:$("#ruc-send-auth-code-btn").removeClass("cn-click");break;case 1001:return $("#"+n).html(e.errmsg),$(".common-error-msg-container").css("display","table"),void $("#ruc_login_btn").html("\u7acb\u5373\u767b\u5f55")}"ruc_error_common_msg"==n&&$(".common-error-msg-container").css("display","table"),$("#"+n).html(e.errmsg),$("#"+n).prev(".icon-ok").css("visibility","hidden"),$("#ruc_login_btn").removeClass("disabled").html("\u7acb\u5373\u767b\u5f55")},loginUser:function(){if(!$(".input-item-error-text:not(:empty)").length&&!$("#ruc_login_btn").hasClass("disabled")){$("#ruc_error_common_msg").empty().parent().hide();var e=$(".ruc-input-login-name")[0].value,t=$("#ruc-input-password-field")[0].value,n=$("#ruc-input-voice-verify")[0].value,r="",i=this;return(v?d.init().then(function(n){return r=n,c.checkLoginInfo(e,t)}):c.checkLoginInfo(e,t)).then(function(){return c.checkVoiceCode(m,n)}).then(function(){return $("#ruc_login_btn").addClass("disabled").html("\u767b\u5f55\u4e2d..."),h.aesPassword(t)}).then(function(t){return h.login($.extend({account:e,password:t,rsms:n,sign:r,__plat:"pc_web",__guid:$.cookie("__guid"),psrc:window.PANDA_MONITOR&&window.PANDA_MONITOR.monitorParams?window.PANDA_MONITOR.monitorParams.psrc||"":"",refer:window.location.href},{}))}).then(function(e){return s(e)}).then(function(e){i.loginSuccess(e),v=!1,r=""}).fail(function(e){e&&"close"!=e.type&&(i.submitFail(e),1802==e.errno&&(v=!0),1901==e.errno&&(m=!0,i.showVoiceVerify()),r="")}),!1}},loginSuccess:function(e){this._trigger("Login-Success",e),N.loginFunc()},buildEl:function(e){"login"==e.showType?this.buildLoginEl():this.buildRegistEl(),this.container.find(this.el).length||this.container.append(this.el);var t=this;window.setTimeout(function(){t.isVisible||t.show()},0)},buildRegistEl:function(){var e=this.el.find(".ruc-dialog-content").html(""),t=$(window).height()-20,n=460,r=this.el,i=r.find("#ruc_dialog_container"),s=r.find(".ruc-dialog-content");r.find(".ruc-dialog-header").children().removeClass("selected"),r.find(".ruc-goto-register-btn").addClass("selected"),i.animate({height:n},255,function(){e.html(S()),$("input").placeholder(),n>=t?s.height(n):s.height("auto")})},buildLoginEl:function(){var e=this,t=this.el.find(".ruc-dialog-content").html("");this.el.find(".ruc-dialog-header").children().removeClass("selected"),this.el.find(".ruc-goto-login-btn").addClass("selected"),h.getIpInfo().always(function(n){n.data||(y=b.out,g=b.verifyOut),e.changeDialogSize(y,g),t.html(E(n)),e.thirdLoginUser(),m&&e.el.find(".login-voice-verify").show(),$("input").placeholder()})},changeDialogSize:function(e,t){this.el.find("#ruc_dialog_container").animate({height:m?t:e},255)},buildIdentityEl:function(){var e=this.el.find(".ruc-dialog-content").html("");this.el.find(".ruc-dialog-header").children("a").remove(),this.el.find(".ruc-dialog-header").append('<span class="identity-title">\u9632\u6c89\u8ff7\u8ba4\u8bc1</span>'),this.el.find("#ruc_dialog_container").animate({height:303},255,function(){e.html(x()),$("input").placeholder()});var t=this;this.el.on("click","#ruc_identity_btn",function(){var e=$(".ruc-input-real-name").val(),n=$(".ruc-input-id-card").val();$.when(c.checkIDCard(n),c.checkRealname(e)).then(function(){$.ajax("/ajax_anti_addiction",{data:{idCard:n}}).always(N.registFunc())}).fail(function(e){t.submitFail(e)})}),this.el.on("click.identity",".ruc-dialog-close",function(){N.registFunc()})},showVoiceVerify:function(){this.el.find(".login-voice-verify").show(),this.changeDialogSize(y,g)},show:function(){this.el.fadeIn(),this.isVisible=!0},login:function(e){var t=$.isFunction(e)?N:e||{};return t.showType="login",this._render(t),!1},regist:function(e){var t=$.isFunction(e)?N:e||{};return t.showType="regist",this._render(t),!1},on:function(e,t){return this.event.on(e,t)},un:function(e,t){return this.event.un(e,t)},_trigger:function(e){return this.event.triggerEvent(e)},_logError:function(){this.el.find(".ruc-register-container .input-item-error-text").each(function(){var e=$(this),t=e.siblings("input").attr("name");e.text()&&t&&PANDA_MONITOR.nlog({pmsg:e.text(),pae:"show_error",paew:t})})}});e.exports=l?l:l=new C},function(e,t,n){"use strict";function r(e){return h(),p=$.Deferred(),y=e,i(),o(),p.promise()}function i(){window.Geetest||$.getScript(PDR.getProtocol()+"//api.geetest.com/get.php?callback=geetestSdkReadyHandler").fail(s)}function s(){$.getScript(PDR.getProtocol()+"//static.geetest.com/static/js/geetest.5.5.9.js").done(u)}function o(){b?b.abort():b=$.ajax({url:PDR.getProtocol()+"//verify.panda.tv/captcha/get?app=pandatv",dataType:"json",data:{_:$.now()}}).done(function(e){0==e.errno&&e.data?(g=e.data,u()):c("\u9a8c\u8bc1\u7801\u52a0\u8f7d\u5931\u8d25\uff0c\u8bf7\u5237\u65b0\u9875\u9762\u91cd\u8bd5\uff01")}).fail(function(){c("\u9a8c\u8bc1\u7801\u52a0\u8f7d\u5931\u8d25\uff0c\u8bf7\u5237\u65b0\u9875\u9762\u91cd\u8bd5\uff01")}).always(function(){b=null})}function u(){window.Geetest&&g&&a(g)}function a(e){var t="#geetest-content",n="embed";y&&y.container?(t=y.container,n="float"):f();var r=new window.Geetest({gt:e.gt,challenge:e.challenge,product:n,offline:0==e.success});r.appendTo(t),r.onReady(function(){$(".geetest-font").hide()}),r.onSuccess(function(){$.when(r.getValidate()).then(function(e){l(e),r.disable()})})}function f(){v=d.popup(m(),{confirm:{cancelButton:".geetest-close-btn"},customContainerClassName:"main-geetest-container",customPosition:y?y.customDialogPosition:null}),v.closeSignal.addOnce(function(){p&&p.reject({type:"close"})})}function l(e){$.ajax({url:PDR.getProtocol()+"//verify.panda.tv/captcha/verifyCode",dataType:"json",data:{challenge:e.geetest_challenge,validate:e.geetest_validate,seccode:e.geetest_seccode,app:"pandatv",_:$.now()}}).done(function(e){0==e.errno?setTimeout(function(){p.resolve(e.data),v&&v.close()},1500):(c("\u9a8c\u8bc1\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5!"),p.reject())}).fail(function(){c("\u9a8c\u8bc1\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5!"),p.reject()})}function c(e){d.popup(e,{delayClose:1500})}function h(){g=null,y=null}var p=null,d=n(33),v=null,m=n(46),g=null,y=null,b=null;window.geetestSdkReadyHandler=function(){u()},e.exports={init:r}},function(e,t,n){"use strict";e.exports=n(34)},function(e,t,n){"use strict";function r(e){y||(p=s(e),p.append(v),y=!0)}function i(e,t){y||r(null),t=t||{};var n=o(e,t);return c(n),p.append(n.$container),n.$container.css(a(n.$container,t.customPosition)),n.closeSignal.addOnce(h),n.open(),f(t),n}function s(e){return e?"[object String]"===Object.prototype.toString.call(e)||1===e.nodeType?$(e):e instanceof jQuery?e:void 0:$("body")}function o(e,t){var n=u(t);if(e instanceof jQuery)return m.createByJQuery(n,e,t);if("[object String]"===Object.prototype.toString.call(e))return m.createByHTML(n,e,t);if(e instanceof g){if(!e.closeSignal)throw new TypeError("content is Destroyed","King.js parseContentParameter");return e}}function u(e){var t="dialog-container-"+Math.ceil(1e5*Math.random()),n=$('<div class="dialog-container" id="'+t+'"></div>');return e&&e.hasOwnProperty("customContainerClassName")?n.addClass(e.customContainerClassName):n.addClass("default-box"),e&&e.hasOwnProperty("zIndex")&&!isNaN(e.zIndex.dialog)&&n.css("zIndex",parseInt(e.zIndex.dialog)),n}function a(e,t){var n=document.documentElement.clientWidth-e.width()>>1,r=document.documentElement.clientHeight-e.height()>>1;if(t){var i=isNaN(parseInt(t.left))?0:parseInt(t.left),s=isNaN(parseInt(t.top))?0:parseInt(t.top);t.mode&&"absolute"!=t.mode?(n+=i,r+=s):(n=i,r=s)}return{left:n,top:r}}function f(e){var t={};e&&e.hasOwnProperty("zIndex")&&!isNaN(e.zIndex.overlay)&&(t.zIndex=parseInt(e.zIndex.overlay)),v.css(t),v.fadeIn(200)}function l(){d||(v.fadeOut(200),p.removeClass("dialog-wrap"))}function c(e){var t=d;d=e,t&&t.close()}function h(e){e==d&&(d=null,l())}var p=null,d=null,v=$('<div class="dialog-overlay"></div>'),m=n(35),g=n(37),y=!1;e.exports.popup=i,e.exports.initialize=r},function(e,t,n){(function(t){"use strict";function r(e,n,r){var i=new a;return i.$container=e,i.content=n,t(e,i,r),i}function i(e,t,n){var i=r(e,t,n);return e.append(t),i}function s(e,t,n){var i=r(e,t,n);return e.html(t),i}function o(e){}function t(e,t,n){n=n||{},n.hasOwnProperty("closeButton")&&f.create(f.SKILL_TYPE.CLOSE_BUTTON,e,t,n),n.hasOwnProperty("confirm")&&f.create(f.SKILL_TYPE.CONFIRM,e,t,n.confirm),n.hasOwnProperty("delayClose")&&f.create(f.SKILL_TYPE.AUTO_CLOSE,e,t,n),n.hasOwnProperty("autoDestroy")&&(t.isAutoDestroy=Boolean(n.autoDestroy)),n.hasOwnProperty("customData")&&(t.customData=n.customData),u(e,t,n.animation)}function u(e,t,n){n=$.extend({"in":{duration:200,targetValue:1},out:{duration:200,targetValue:0}},n),t.openAnimation=f.create(f.SKILL_TYPE.FADE_IN,e,t,n["in"]),t.closeAnimation=f.create(f.SKILL_TYPE.FADE_OUT,e,t,n.out)}var a=n(37),f=n(40);e.exports.createByJQuery=i,e.exports.createByHTML=s,e.exports.createByCustomDialog=o}).call(t,n(36))},function(e,t){function n(){f&&o&&(f=!1,o.length?a=o.concat(a):l=-1,a.length&&r())}function r(){if(!f){var e=setTimeout(n);f=!0;for(var t=a.length;t;){for(o=a,a=[];++l<t;)o&&o[l].run();l=-1,t=a.length}o=null,f=!1,clearTimeout(e)}}function i(e,t){this.fun=e,this.array=t}function s(){}var o,u=e.exports={},a=[],f=!1,l=-1;u.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];a.push(new i(e,t)),1!==a.length||f||setTimeout(r,0)},i.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=s,u.addListener=s,u.once=s,u.off=s,u.removeListener=s,u.removeAllListeners=s,u.emit=s,u.binding=function(e){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(e){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},function(e,t,n){"use strict";function r(){this.closeSignal=new i,this.openSignal=new i,this.$container=null,this.openAnimation=null,this.closeAnimation=null,this.skillList=[],this.isAutoDestroy=!0,this.customData=null}var i=n(38);r.prototype.initialize=function(){},r.prototype.open=function(){this.openAnimation?(this.openAnimation.completedSignal.addOnce(this,this._openAnimationCompletedHandler),this.openAnimation.start()):this.openSignal.dispatch(this)},r.prototype.close=function(){this.closeAnimation?(this.closeAnimation.completedSignal.addOnce(this,this._closeAnimationCompletedHandler),this.closeAnimation.start()):this.$container.remove(),this.closeSignal&&this.closeSignal.dispatch(this)},r.prototype.destroy=function(){if(this.$container=null,this.closeSignal.removeAll(),this.closeSignal=null,this.openSignal.removeAll(),this.openSignal=null,this.openAnimation&&(this.openAnimation.destroy(),this.openAnimation=null),this.closeAnimation&&(this.closeAnimation.destroy(),this.closeAnimation=null),this.skillList&&this.skillList.length>0){for(var e=0;e<this.skillList.length;++e)this.skillList[e].destroy();this.skillList=[]}this.customData=null},r.prototype._closeAnimationCompletedHandler=function(){this.isAutoDestroy?(this.$container.remove(),this.destroy()):this.$container.detach()},r.prototype._openAnimationCompletedHandler=function(){this.openSignal.dispatch(this)},e.exports=r},function(e,t,n){function r(){this.handlerList=[]}var i=n(39);r.prototype.add=function(e,t){return this.addHandlerToList(e,t,!1)},r.prototype.addOnce=function(e,t){return this.addHandlerToList(e,t,!0)},r.prototype.remove=function(e){var t=this.findHandlerByFunc(e);t&&(t.handler.destroy(),this.handlerList.splice(t.index,1))},r.prototype.removeAll=function(){var e=this.handlerList.length;if(e>0){for(var t=0;e>t;t++)this.handlerList[t].destroy();this.handlerList=[]}},r.prototype.dispatch=function(){for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);for(var n,r=this.handlerList.length,i=0,i=0;r>i;i++)n=this.handlerList[i],n.func.apply(n.listener,e);for(i=this.handlerList.length;i>0;)i--,n=this.handlerList[i],n.isDispatchOnce&&(n.destroy(),this.handlerList.splice(i,1))},r.prototype.hasHandler=function(e){var t=this.handlerList.length;if(t>0)for(var n,r=0;t>r;r++)if(n=this.handlerList[r],n.func==e)return!0;return!1},r.prototype.addHandlerToList=function(e,t,n){return"function"==typeof e&&(t=e,e=null),"undefined"==typeof e||"function"!=typeof t?!1:this.hasHandler(t)?!1:(this.handlerList
.push(new i(e,t,n)),!0)},r.prototype.findHandlerByFunc=function(e){for(var t,n=this.handlerList.length,r=0;n>r;r++)if(t=this.handlerList[r],t.func==e)return{index:r,handler:t};return null},r.prototype.findHandler=function(e){for(var t,n=this.handlerList.length,r=0;n>r;r++)if(t=this.handlerList[r],t==e)return{index:r,handler:t};return null},e.exports=r},function(e,t){function n(e,t,n){this.listener=e,this.func=t,this.isDispatchOnce=n?!0:!1}n.prototype.destroy=function(){this.listener=null,this.func=null},e.exports=n},function(e,t,n){"use strict";function r(e,t,n,r){var h;switch(e){case i.CLOSE_BUTTON:h=new o;break;case i.AUTO_CLOSE:h=new s;break;case i.CONFIRM:h=new u;break;case i.FADE_IN:h=new a;break;case i.FADE_OUT:h=new f;break;default:throw new TypeError("Type not found, type is "+e,"dialog-skill-factory.js")}return h.initialize(t,n,r),h}var i={CLOSE_BUTTON:"closeButton",AUTO_CLOSE:"autoClose",CONFIRM:"confirm",FADE_IN:"fadeIn",FADE_OUT:"fadeOut"},s=n(41),o=n(42),u=n(43),a=n(44),f=n(45);e.exports.create=r,e.exports.SKILL_TYPE=i},function(e,t){"use strict";function n(){}n.prototype.initialize=function(e,t,n){if(!t.hasOwnProperty("openSignal"))throw new TypeError("dialog not implements IDialog","DialogAutoCloseSkill.js");t.openSignal.addOnce(function(){setTimeout(function(){t.close()},n.delayClose)})},n.prototype.destroy=function(){},e.exports=n},function(e,t){"use strict";function n(){}n.prototype.initialize=function(e,t,n){if(this.$container=e,this.dialog=t,this.opts=n,!this.$container||!this.dialog)throw new ReferenceError("$container or dialog or selector error","DialogCloseButtonSkill.js");if(!this.dialog.hasOwnProperty("closeSignal"))throw new TypeError("dialog not implement IDialog interface, closeSignal","DialogCloseButtonSkill.js");var r=this;this.$container.on("click.close",this.opts.closeButton,function(){r.dialog.close()})},n.prototype.destroy=function(){this.$container.off("click.close"),this.$container=null,this.dialog=null,this.selector=null},e.exports=n},function(e,t,n){"use strict";function r(){}var i=n(38);r.prototype.initialize=function(e,t,n){function r(){o.dialog.confirmSignal.dispatch(o.dialog),o.opts.autoClose&&o.dialog.close()}function s(){o.dialog.cancelSignal.dispatch(o.dialog),o.dialog.close()}if(this.$container=e,this.dialog=t,this.opts=n,!this.$container||!this.dialog)throw new ReferenceError("$container or dialog","DialogCloseButtonSkill.js");this.opts=$.extend({confirmButton:".confirm-btn",cancelButton:".cancel-btn",autoClose:!0},this.opts),this.dialog.confirmSignal=new i,this.$container.on("click.confirm",this.opts.confirmButton,r),this.dialog.cancelSignal=new i,this.$container.on("click.cancel",this.opts.cancelButton,s);var o=this},r.prototype.destroy=function(){this.dialog.confirmSignal.destroy(),this.dialog.confirmSignal=null,this.dialog.cancelSignal.destroy(),this.dialog.cancelSignal=null,this.$container=null,this.opts=null},e.exports=r},function(e,t,n){"use strict";function r(){}var i=n(38);r.prototype.initialize=function(e,t,n){this.$container=e,this.opts=n,this.completedSignal=new i},r.prototype.start=function(){var e=this;this.$container.css({visibility:"visible",display:"none"}).fadeIn(this.opts.duration,function(){e.completedSignal.dispatch()})},r.prototype.destroy=function(){this.$container=null,this.completedSignal.removeAll(),this.completedSignal=null},e.exports=r},function(e,t,n){"use strict";function r(){}var i=n(38);r.prototype.initialize=function(e,t,n){this.$container=e,this.opts=n,this.completedSignal=new i},r.prototype.start=function(){var e=this;this.$container.fadeOut(this.opts.duration,function(){e.$container.css({visibility:"hidden",display:"block"}),e.completedSignal.dispatch()})},r.prototype.destroy=function(){this.$container=null,this.completedSignal.removeAll(),this.completedSignal=null},e.exports=r},function(e,t,n){var r=n(10);e.exports=(r["default"]||r).template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,r){return'<div class="main-geetest-container">\r\n    <a class="geetest-close-btn" href="javascript:;">X</a>\r\n    <div id="geetest-container">\r\n      <div id="geetest-content">\r\n        <span class="geetest-font">\u9a8c\u8bc1\u7801\u52a0\u8f7d\u4e2d......</span>\r\n      </div>\r\n    </div>\r\n</div>'},useData:!0})},function(e,t){!function(e){e(jQuery)}(function(e){function t(t){var n={},r=/^jQuery\d+$/;return e.each(t.attributes,function(e,t){t.specified&&!r.test(t.name)&&(n[t.name]=t.value)}),n}function n(t,n){var r=this,s=e(r);if(r.value==s.attr("placeholder")&&s.hasClass(h.customClass))if(s.data("placeholder-password")){if(s=s.hide().nextAll('input[type="password"]:first').show().attr("id",s.removeAttr("id").data("placeholder-id")),t===!0)return s[0].value=n;s.focus()}else r.value="",s.removeClass(h.customClass),r==i()&&r.select()}function r(){var r,i=this,s=e(i),o=this.id;if(""===i.value){if("password"===i.type){if(!s.data("placeholder-textinput")){try{r=s.clone().attr({type:"text"})}catch(u){r=e("<input>").attr(e.extend(t(this),{type:"text"}))}r.removeAttr("name").data({"placeholder-password":s,"placeholder-id":o}).bind("focus.placeholder",n),s.data({"placeholder-textinput":r,"placeholder-id":o}).before(r)}s=s.removeAttr("id").hide().prevAll('input[type="text"]:first').attr("id",o).show()}s.addClass(h.customClass),s[0].value=s.attr("placeholder")}else s.removeClass(h.customClass)}function i(){try{return document.activeElement}catch(e){}}var s,o,u="[object OperaMini]"==Object.prototype.toString.call(window.operamini),a="placeholder"in document.createElement("input")&&!u,f="placeholder"in document.createElement("textarea")&&!u,l=e.valHooks,c=e.propHooks;if(a&&f)o=e.fn.placeholder=function(){return this},o.input=o.textarea=!0;else{var h={};o=e.fn.placeholder=function(t){var i={customClass:"placeholder"};h=e.extend({},i,t);var s=this;return s.filter((a?"textarea":":input")+"[placeholder]").not("."+h.customClass).bind({"focus.placeholder":n,"blur.placeholder":r}).data("placeholder-enabled",!0).trigger("blur.placeholder"),s},o.input=a,o.textarea=f,s={get:function(t){var n=e(t),r=n.data("placeholder-password");return r?r[0].value:n.data("placeholder-enabled")&&n.hasClass(h.customClass)?"":t.value},set:function(t,s){var o=e(t),u=o.data("placeholder-password");return u?u[0].value=s:o.data("placeholder-enabled")?(""===s?(t.value=s,t!=i()&&r.call(t)):o.hasClass(h.customClass)?n.call(t,!0,s)||(t.value=s):t.value=s,o):t.value=s}},a||(l.input=s,c.value=s),f||(l.textarea=s,c.value=s),e(function(){e(document).delegate("form","submit.placeholder",function(){var t=e("."+h.customClass,this).each(n);setTimeout(function(){t.each(r)},10)})}),e(window).bind("beforeunload.placeholder",function(){e("."+h.customClass).each(function(){this.value=""})})}})},function(e,t){!function(e){e(jQuery)}(function(e){function t(e){return u.raw?e:encodeURIComponent(e)}function n(e){return u.raw?e:decodeURIComponent(e)}function r(e){return t(u.json?JSON.stringify(e):String(e))}function i(e){0===e.indexOf('"')&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return e=decodeURIComponent(e.replace(o," ")),u.json?JSON.parse(e):e}catch(t){}}function s(t,n){var r=u.raw?t:i(t);return e.isFunction(n)?n(r):r}var o=/\+/g,u=e.cookie=function(i,o,a){if(arguments.length>1&&!e.isFunction(o)){if(a=e.extend({},u.defaults,a),"number"==typeof a.expires){var f=a.expires,l=a.expires=new Date;l.setMilliseconds(l.getMilliseconds()+864e5*f)}return document.cookie=[t(i),"=",r(o),a.expires?"; expires="+a.expires.toUTCString():"",a.path?"; path="+a.path:"",a.domain?"; domain="+a.domain:"",a.secure?"; secure":""].join("")}for(var c=i?void 0:{},h=document.cookie?document.cookie.split("; "):[],p=0,d=h.length;d>p;p++){var v=h[p].split("="),m=n(v.shift()),g=v.join("=");if(i===m){c=s(g,o);break}i||void 0===(g=s(g))||(c[m]=g)}return c};u.defaults={},e.removeCookie=function(t,n){return e.cookie(t,"",e.extend({},n,{expires:-1})),!e.cookie(t)}})},function(e,t,n){"use strict";e.exports=n(50)},function(e,t,n){"use strict";function r(e){e.fn.perfectScrollbar=function(t){return this.each(function(){if("object"==typeof t||"undefined"==typeof t){var n=t;s.get(this)||i.initialize(this,n)}else{var r=t;"update"===r?i.update(this):"destroy"===r&&i.destroy(this)}return e(this)})}}var i=n(51),s=n(56);e.exports=r},function(e,t,n){"use strict";var r=n(52),i=n(60),s=n(70);e.exports={initialize:i,update:s,destroy:r}},function(e,t,n){"use strict";var r=n(53),i=n(54),s=n(56);e.exports=function(e){var t=s.get(e);t&&(t.event.unbindAll(),r.remove(t.scrollbarX),r.remove(t.scrollbarY),r.remove(t.scrollbarXRail),r.remove(t.scrollbarYRail),i.removePsClasses(e),s.remove(e))}},function(e,t){"use strict";function n(e,t){return window.getComputedStyle(e)[t]}function r(e,t,n){return"number"==typeof n&&(n=n.toString()+"px"),e.style[t]=n,e}function i(e,t){for(var n in t){var r=t[n];"number"==typeof r&&(r=r.toString()+"px"),e.style[n]=r}return e}var s={};s.e=function(e,t){var n=document.createElement(e);return n.className=t,n},s.appendTo=function(e,t){return t.appendChild(e),e},s.css=function(e,t,s){return"object"==typeof t?i(e,t):"undefined"==typeof s?n(e,t):r(e,t,s)},s.matches=function(e,t){return"undefined"!=typeof e.matches?e.matches(t):"undefined"!=typeof e.matchesSelector?e.matchesSelector(t):"undefined"!=typeof e.webkitMatchesSelector?e.webkitMatchesSelector(t):"undefined"!=typeof e.mozMatchesSelector?e.mozMatchesSelector(t):"undefined"!=typeof e.msMatchesSelector?e.msMatchesSelector(t):void 0},s.remove=function(e){"undefined"!=typeof e.remove?e.remove():e.parentNode&&e.parentNode.removeChild(e)},s.queryChildren=function(e,t){return Array.prototype.filter.call(e.childNodes,function(e){return s.matches(e,t)})},e.exports=s},function(e,t,n){"use strict";var r=n(55),i=n(53);t.toInt=function(e){return parseInt(e,10)||0},t.clone=function(e){if(null===e)return null;if("object"==typeof e){var t={};for(var n in e)t[n]=this.clone(e[n]);return t}return e},t.extend=function(e,t){var n=this.clone(e);for(var r in t)n[r]=this.clone(t[r]);return n},t.isEditable=function(e){return i.matches(e,"input,[contenteditable]")||i.matches(e,"select,[contenteditable]")||i.matches(e,"textarea,[contenteditable]")||i.matches(e,"button,[contenteditable]")},t.removePsClasses=function(e){for(var t=r.list(e),n=0;n<t.length;n++){var i=t[n];0===i.indexOf("ps-")&&r.remove(e,i)}},t.outerWidth=function(e){return this.toInt(i.css(e,"width"))+this.toInt(i.css(e,"paddingLeft"))+this.toInt(i.css(e,"paddingRight"))+this.toInt(i.css(e,"borderLeftWidth"))+this.toInt(i.css(e,"borderRightWidth"))},t.startScrolling=function(e,t){r.add(e,"ps-in-scrolling"),"undefined"!=typeof t?r.add(e,"ps-"+t):(r.add(e,"ps-x"),r.add(e,"ps-y"))},t.stopScrolling=function(e,t){r.remove(e,"ps-in-scrolling"),"undefined"!=typeof t?r.remove(e,"ps-"+t):(r.remove(e,"ps-x"),r.remove(e,"ps-y"))},t.env={isWebKit:"WebkitAppearance"in document.documentElement.style,supportsTouch:"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,supportsIePointer:null!==window.navigator.msMaxTouchPoints}},function(e,t){"use strict";function n(e,t){var n=e.className.split(" ");n.indexOf(t)<0&&n.push(t),e.className=n.join(" ")}function r(e,t){var n=e.className.split(" "),r=n.indexOf(t);r>=0&&n.splice(r,1),e.className=n.join(" ")}t.add=function(e,t){e.classList?e.classList.add(t):n(e,t)},t.remove=function(e,t){e.classList?e.classList.remove(t):r(e,t)},t.list=function(e){return e.classList?Array.prototype.slice.apply(e.classList):e.className.split(" ")}},function(e,t,n){"use strict";function r(e){var t=this;t.settings=c.clone(a),t.containerWidth=null,t.containerHeight=null,t.contentWidth=null,t.contentHeight=null,t.isRtl="rtl"===u.css(e,"direction"),t.isNegativeScroll=function(){var t=e.scrollLeft,n=null;return e.scrollLeft=-1,n=e.scrollLeft<0,e.scrollLeft=t,n}(),t.negativeScrollAdjustment=t.isNegativeScroll?e.scrollWidth-e.clientWidth:0,t.event=new f,t.ownerDocument=e.ownerDocument||document,t.scrollbarXRail=u.appendTo(u.e("div","ps-scrollbar-x-rail"),e),t.scrollbarX=u.appendTo(u.e("div","ps-scrollbar-x"),t.scrollbarXRail),t.scrollbarX.setAttribute("tabindex",0),t.scrollbarXActive=null,t.scrollbarXWidth=null,t.scrollbarXLeft=null,t.scrollbarXBottom=c.toInt(u.css(t.scrollbarXRail,"bottom")),t.isScrollbarXUsingBottom=t.scrollbarXBottom===t.scrollbarXBottom,t.scrollbarXTop=t.isScrollbarXUsingBottom?null:c.toInt(u.css(t.scrollbarXRail,"top")),t.railBorderXWidth=c.toInt(u.css(t.scrollbarXRail,"borderLeftWidth"))+c.toInt(u.css(t.scrollbarXRail,"borderRightWidth")),u.css(t.scrollbarXRail,"display","block"),t.railXMarginWidth=c.toInt(u.css(t.scrollbarXRail,"marginLeft"))+c.toInt(u.css(t.scrollbarXRail,"marginRight")),u.css(t.scrollbarXRail,"display",""),t.railXWidth=null,t.railXRatio=null,t.scrollbarYRail=u.appendTo(u.e("div","ps-scrollbar-y-rail"),e),t.scrollbarY=u.appendTo(u.e("div","ps-scrollbar-y"),t.scrollbarYRail),t.scrollbarY.setAttribute("tabindex",0),t.scrollbarYActive=null,t.scrollbarYHeight=null,t.scrollbarYTop=null,t.scrollbarYRight=c.toInt(u.css(t.scrollbarYRail,"right")),t.isScrollbarYUsingRight=t.scrollbarYRight===t.scrollbarYRight,t.scrollbarYLeft=t.isScrollbarYUsingRight?null:c.toInt(u.css(t.scrollbarYRail,"left")),t.scrollbarYOuterWidth=t.isRtl?c.outerWidth(t.scrollbarY):null,t.railBorderYWidth=c.toInt(u.css(t.scrollbarYRail,"borderTopWidth"))+c.toInt(u.css(t.scrollbarYRail,"borderBottomWidth")),u.css(t.scrollbarYRail,"display","block"),t.railYMarginHeight=c.toInt(u.css(t.scrollbarYRail,"marginTop"))+c.toInt(u.css(t.scrollbarYRail,"marginBottom")),u.css(t.scrollbarYRail,"display",""),t.railYHeight=null,t.railYRatio=null}function i(e){return"undefined"==typeof e.dataset?e.getAttribute("data-ps-id"):e.dataset.psId}function s(e,t){"undefined"==typeof e.dataset?e.setAttribute("data-ps-id",t):e.dataset.psId=t}function o(e){"undefined"==typeof e.dataset?e.removeAttribute("data-ps-id"):delete e.dataset.psId}var u=n(53),a=n(57),f=n(58),l=n(59),c=n(54),h={};t.add=function(e){var t=l();return s(e,t),h[t]=new r(e),h[t]},t.remove=function(e){delete h[i(e)],o(e)},t.get=function(e){return h[i(e)]}},function(e,t){"use strict";e.exports={maxScrollbarLength:null,minScrollbarLength:null,scrollXMarginOffset:0,scrollYMarginOffset:0,stopPropagationOnClick:!0,suppressScrollX:!1,suppressScrollY:!1,swipePropagation:!0,useBothWheelAxes:!1,useKeyboard:!0,useSelectionScroll:!1,wheelPropagation:!1,wheelSpeed:1}},function(e,t){"use strict";var n=function(e){this.element=e,this.events={}};n.prototype.bind=function(e,t){"undefined"==typeof this.events[e]&&(this.events[e]=[]),this.events[e].push(t),$(this.element).on(e,t)},n.prototype.unbind=function(e,t){var n="undefined"!=typeof t;this.events[e]=this.events[e].filter(function(r){return n&&r!==t?!0:($(this.element).off(e,r),!1)},this)},n.prototype.unbindAll=function(){for(var e in this.events)this.unbind(e)};var r=function(){this.eventElements=[]};r.prototype.eventElement=function(e){var t=this.eventElements.filter(function(t){return t.element===e})[0];return"undefined"==typeof t&&(t=new n(e),this.eventElements.push(t)),t},r.prototype.bind=function(e,t,n){this.eventElement(e).bind(t,n)},r.prototype.unbind=function(e,t,n){this.eventElement(e).unbind(t,n)},r.prototype.unbindAll=function(){for(var e=0;e<this.eventElements.length;e++)this.eventElements[e].unbindAll()},r.prototype.once=function(e,t,n){var r=this.eventElement(e),i=function(e){r.unbind(t,i),n(e)};r.bind(t,i)},e.exports=r},function(e,t){"use strict";e.exports=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return function(){return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}}()},function(e,t,n){"use strict";var r=n(55),i=n(54),s=n(56),o=n(61),u=n(63),a=n(64),f=n(65),l=n(66),c=n(67),h=n(68),p=n(69);e.exports=function(e,t){t="object"==typeof t?t:{},r.add(e,"ps-container");var n=s.add(e);n.settings=i.extend(n.settings,t),u(e),a(e),l(e),c(e),n.settings.useSelectionScroll&&h(e),(i.env.supportsTouch||i.env.supportsIePointer)&&p(e,i.env.supportsTouch,i.env.supportsIePointer),n.settings.useKeyboard&&f(e),o(e)}},function(e,t,n){"use strict";function r(e,t){return e.settings.minScrollbarLength&&(t=Math.max(t,e.settings.minScrollbarLength)),e.settings.maxScrollbarLength&&(t=Math.min(t,e.settings.maxScrollbarLength)),t}function i(e,t){var n={width:t.railXWidth};t.isRtl?n.left=t.negativeScrollAdjustment+e.scrollLeft+t.containerWidth-t.contentWidth:n.left=e.scrollLeft,t.isScrollbarXUsingBottom?n.bottom=t.scrollbarXBottom-e.scrollTop:n.top=t.scrollbarXTop+e.scrollTop,o.css(t.scrollbarXRail,n);var r={top:e.scrollTop,height:t.railYHeight};t.isScrollbarYUsingRight?t.isRtl?r.right=t.contentWidth-(t.negativeScrollAdjustment+e.scrollLeft)-t.scrollbarYRight-t.scrollbarYOuterWidth:r.right=t.scrollbarYRight-e.scrollLeft:t.isRtl?r.left=t.negativeScrollAdjustment+e.scrollLeft+2*t.containerWidth-t.contentWidth-t.scrollbarYLeft-t.scrollbarYOuterWidth:r.left=t.scrollbarYLeft+e.scrollLeft,o.css(t.scrollbarYRail,r),o.css(t.scrollbarX,{left:t.scrollbarXLeft,width:t.scrollbarXWidth-t.railBorderXWidth}),o.css(t.scrollbarY,{top:t.scrollbarYTop,height:t.scrollbarYHeight-t.railBorderYWidth})}var s=n(55),o=n(53),u=n(54),a=n(56),f=n(62);e.exports=function(e){var t=a.get(e);t.containerWidth=e.clientWidth,t.containerHeight=e.clientHeight,t.contentWidth=e.scrollWidth,t.contentHeight=e.scrollHeight;var n;e.contains(t.scrollbarXRail)||(n=o.queryChildren(e,".ps-scrollbar-x-rail"),n.length>0&&n.forEach(function(e){o.remove(e)}),o.appendTo(t.scrollbarXRail,e)),e.contains(t.scrollbarYRail)||(n=o.queryChildren(e,".ps-scrollbar-y-rail"),n.length>0&&n.forEach(function(e){o.remove(e)}),o.appendTo(t.scrollbarYRail,e)),!t.settings.suppressScrollX&&t.containerWidth+t.settings.scrollXMarginOffset<t.contentWidth?(t.scrollbarXActive=!0,t.railXWidth=t.containerWidth-t.railXMarginWidth,t.railXRatio=t.containerWidth/t.railXWidth,t.scrollbarXWidth=r(t,u.toInt(t.railXWidth*t.containerWidth/t.contentWidth)),t.scrollbarXLeft=u.toInt((t.negativeScrollAdjustment+e.scrollLeft)*(t.railXWidth-t.scrollbarXWidth)/(t.contentWidth-t.containerWidth))):t.scrollbarXActive=!1,!t.settings.suppressScrollY&&t.containerHeight+t.settings.scrollYMarginOffset<t.contentHeight?(t.scrollbarYActive=!0,t.railYHeight=t.containerHeight-t.railYMarginHeight,t.railYRatio=t.containerHeight/t.railYHeight,t.scrollbarYHeight=r(t,u.toInt(t.railYHeight*t.containerHeight/t.contentHeight)),t.scrollbarYTop=u.toInt(e.scrollTop*(t.railYHeight-t.scrollbarYHeight)/(t.contentHeight-t.containerHeight))):t.scrollbarYActive=!1,t.scrollbarXLeft>=t.railXWidth-t.scrollbarXWidth&&(t.scrollbarXLeft=t.railXWidth-t.scrollbarXWidth),t.scrollbarYTop>=t.railYHeight-t.scrollbarYHeight&&(t.scrollbarYTop=t.railYHeight-t.scrollbarYHeight),i(e,t),t.scrollbarXActive?s.add(e,"ps-active-x"):(s.remove(e,"ps-active-x"),t.scrollbarXWidth=0,t.scrollbarXLeft=0,f(e,"left",0)),t.scrollbarYActive?s.add(e,"ps-active-y"):(s.remove(e,"ps-active-y"),t.scrollbarYHeight=0,t.scrollbarYTop=0,f(e,"top",0))}},function(e,t,n){"use strict";var r,i,s=n(56),o=document.createEvent("Event"),u=document.createEvent("Event"),a=document.createEvent("Event"),f=document.createEvent("Event"),l=document.createEvent("Event"),c=document.createEvent("Event"),h=document.createEvent("Event"),p=document.createEvent("Event"),d=document.createEvent("Event"),v=document.createEvent("Event");o.initEvent("ps-scroll-up",!0,!0),u.initEvent("ps-scroll-down",!0,!0),a.initEvent("ps-scroll-left",!0,!0),f.initEvent("ps-scroll-right",!0,!0),l.initEvent("ps-scroll-y",!0,!0),c.initEvent("ps-scroll-x",!0,!0),h.initEvent("ps-x-reach-start",!0,!0),p.initEvent("ps-x-reach-end",!0,!0),d.initEvent("ps-y-reach-start",!0,!0),v.initEvent("ps-y-reach-end",!0,!0),e.exports=function(e,t,n){if("undefined"==typeof e)throw"You must provide an element to the update-scroll function";if("undefined"==typeof t)throw"You must provide an axis to the update-scroll function";if("undefined"==typeof n)throw"You must provide a value to the update-scroll function";if("top"===t&&0>=n)return e.scrollTop=0,void e.dispatchEvent(d);if("left"===t&&0>=n)return e.scrollLeft=0,void e.dispatchEvent(h);var g=s.get(e);return"top"===t&&n>=g.contentHeight-g.containerHeight?(e.scrollTop=g.contentHeight-g.containerHeight,void e.dispatchEvent(v)):"left"===t&&n>=g.contentWidth-g.containerWidth?(e.scrollLeft=g.contentWidth-g.containerWidth,void e.dispatchEvent(p)):(r||(r=e.scrollTop),i||(i=e.scrollLeft),"top"===t&&r>n&&e.dispatchEvent(o),"top"===t&&n>r&&e.dispatchEvent(u),"left"===t&&i>n&&e.dispatchEvent(a),"left"===t&&n>i&&e.dispatchEvent(f),"top"===t&&(e.scrollTop=r=n,e.dispatchEvent(l)),void ("left"===t&&(e.scrollLeft=i=n,e.dispatchEvent(c))))}},function(e,t,n){"use strict";function r(e,t){function n(e){return e.getBoundingClientRect()}var r=window.Event.prototype.stopPropagation.bind;t.settings.stopPropagationOnClick&&t.event.bind(t.scrollbarY,"click",r),t.event.bind(t.scrollbarYRail,"click",function(r){var s=i.toInt(t.scrollbarYHeight/2),f=t.railYRatio*(r.pageY-window.pageYOffset-n(t.scrollbarYRail).top-s),l=t.railYRatio*(t.railYHeight-t.scrollbarYHeight),c=f/l;0>c?c=0:c>1&&(c=1),u(e,"top",(t.contentHeight-t.containerHeight)*c),o(e),r.stopPropagation()}),t.settings.stopPropagationOnClick&&t.event.bind(t.scrollbarX,"click",r),t.event.bind(t.scrollbarXRail,"click",function(r){var s=i.toInt(t.scrollbarXWidth/2),f=t.railXRatio*(r.pageX-window.pageXOffset-n(t.scrollbarXRail).left-s),l=t.railXRatio*(t.railXWidth-t.scrollbarXWidth),c=f/l;0>c?c=0:c>1&&(c=1),u(e,"left",(t.contentWidth-t.containerWidth)*c-t.negativeScrollAdjustment),o(e),r.stopPropagation()})}var i=n(54),s=n(56),o=n(61),u=n(62);e.exports=function(e){var t=s.get(e);r(e,t)}},function(e,t,n){"use strict";function r(e,t){function n(n){var i=r+n*t.railXRatio,s=Math.max(0,t.scrollbarXRail.getBoundingClientRect().left)+t.railXRatio*(t.railXWidth-t.scrollbarXWidth);0>i?t.scrollbarXLeft=0:i>s?t.scrollbarXLeft=s:t.scrollbarXLeft=i;var u=o.toInt(t.scrollbarXLeft*(t.contentWidth-t.containerWidth)/(t.containerWidth-t.railXRatio*t.scrollbarXWidth))-t.negativeScrollAdjustment;f(e,"left",u)}var r=null,i=null,u=function(t){n(t.pageX-i),a(e),t.stopPropagation(),t.preventDefault()},h=function(){o.stopScrolling(e,"x"),t.event.unbind(t.ownerDocument,"mousemove",u)};t.event.bind(t.scrollbarX,"mousedown",function(n){i=n.pageX,r=o.toInt(s.css(t.scrollbarX,"left"))*t.railXRatio,o.startScrolling(e,"x"),t.event.bind(t.ownerDocument,"mousemove",u),t.event.once(t.ownerDocument,"mouseup",h),n.stopPropagation(),n.preventDefault()})}function i(e,t){function n(n){var i=r+n*t.railYRatio,s=Math.max(0,t.scrollbarYRail.getBoundingClientRect().top)+t.railYRatio*(t.railYHeight-t.scrollbarYHeight);0>i?t.scrollbarYTop=0:i>s?t.scrollbarYTop=s:t.scrollbarYTop=i;var u=o.toInt(t.scrollbarYTop*(t.contentHeight-t.containerHeight)/(t.containerHeight-t.railYRatio*t.scrollbarYHeight));f(e,"top",u)}var r=null,i=null,u=function(t){n(t.pageY-i),a(e),t.stopPropagation(),t.preventDefault()},h=function(){o.stopScrolling(e,"y"),t.event.unbind(t.ownerDocument,"mousemove",u)};t.event.bind(t.scrollbarY,"mousedown",function(n){i=n.pageY,r=o.toInt(s.css(t.scrollbarY,"top"))*t.railYRatio,o.startScrolling(e,"y"),t.event.bind(t.ownerDocument,"mousemove",u),t.event.once(t.ownerDocument,"mouseup",h),n.stopPropagation(),n.preventDefault()})}var s=n(53),o=n(54),u=n(56),a=n(61),f=n(62);e.exports=function(e){var t=u.get(e);r(e,t),i(e,t)}},function(e,t,n){"use strict";function r(e,t){function n(n,r){var i=e.scrollTop;if(0===n){if(!t.scrollbarYActive)return!1;if(0===i&&r>0||i>=t.contentHeight-t.containerHeight&&0>r)return!t.settings.wheelPropagation}var s=e.scrollLeft;if(0===r){if(!t.scrollbarXActive)return!1;if(0===s&&0>n||s>=t.contentWidth-t.containerWidth&&n>0)return!t.settings.wheelPropagation}return!0}function r(e){switch(e.nodeName.toLowerCase()){case"select":case"textarea":case"input":case"video":case"embed":case"object":return!1}return!0}var s=!1;t.event.bind(e,"mouseenter",function(){s=!0}),t.event.bind(e,"mouseleave",function(){s=!1});var f=!1;t.event.bind(t.ownerDocument,"keydown",function(c){if((!c.isDefaultPrevented||!c.isDefaultPrevented())&&r(c.target)&&s){var h=document.activeElement?document.activeElement:t.ownerDocument.activeElement;if(h){for(;h.shadowRoot;)h=h.shadowRoot.activeElement;if(i.isEditable(h))return}var p=0,d=0;switch(c.which){case 37:p=-30;break;case 38:d=30;break;case 39:p=30;break;case 40:d=-30;break;case 33:d=90;break;case 32:d=c.shiftKey?90:-90;break;case 34:d=-90;break;case 35:d=c.ctrlKey?-t.contentHeight:-t.containerHeight;break;case 36:d=c.ctrlKey?e.scrollTop:t.containerHeight;break;default:return}u(e,"top",e.scrollTop-d),u(e,"left",e.scrollLeft+p),o(e),f=n(p,d),f&&c.preventDefault()}})}var i=n(54),s=n(56),o=n(61),u=n(62);e.exports=function(e){var t=s.get(e);r(e,t)}},function(e,t,n){"use strict";function r(e,t){function n(n,r){var i=e.scrollTop;if(0===n){if(!t.scrollbarYActive)return!1;if(0===i&&r>0||i>=t.contentHeight-t.containerHeight&&0>r)return!t.settings.wheelPropagation}var s=e.scrollLeft;if(0===r){if(!t.scrollbarXActive)return!1;if(0===s&&0>n||s>=t.contentWidth-t.containerWidth&&n>0)return!t.settings.wheelPropagation}return!0}function r(e){var t=e.deltaX,n=-1*e.deltaY;return("undefined"==typeof t||"undefined"==typeof n)&&(t=-1*e.wheelDeltaX/6,n=e.wheelDeltaY/6),e.deltaMode&&1===e.deltaMode&&(t*=10,n*=10),t!==t&&n!==n&&(t=0,n=e.wheelDelta),[t,n]}function i(t,n){var r=e.querySelector("textarea:hover");if(r){var i=r.scrollHeight-r.clientHeight;if(i>0&&!(0===r.scrollTop&&n>0||r.scrollTop===i&&0>n))return!0;var s=r.scrollLeft-r.clientWidth;if(s>0&&!(0===r.scrollLeft&&0>t||r.scrollLeft===s&&t>0))return!0}return!1}function u(u){u=u.originalEvent||u;var c=r(u),h=c[0],p=c[1];i(h,p)||(f=!1,t.settings.useBothWheelAxes?t.scrollbarYActive&&!t.scrollbarXActive?(p?o(e,"top",e.scrollTop-p*t.settings.wheelSpeed):o(e,"top",e.scrollTop+h*t.settings.wheelSpeed),f=!0):t.scrollbarXActive&&!t.scrollbarYActive&&(h?o(e,"left",e.scrollLeft+h*t.settings.wheelSpeed):o(e,"left",e.scrollLeft-p*t.settings.wheelSpeed),f=!0):(o(e,"top",e.scrollTop-p*t.settings.wheelSpeed),o(e,"left",e.scrollLeft+h*t.settings.wheelSpeed)),s(e),f=f||n(h,p),f&&(u.stopPropagation(),u.preventDefault()))}var f=!1;"undefined"!=typeof window.onwheel?t.event.bind(e,"wheel",u):"undefined"!=typeof window.onmousewheel?t.event.bind(e,"mousewheel",u):t.event.bind(e,"mousewheel",u)}var i=n(56),s=n(61),o=n(62);e.exports=function(e){var t=i.get(e);r(e,t)}},function(e,t,n){"use strict";function r(e,t){t.event.bind(e,"scroll",function(){s(e)})}var i=n(56),s=n(61);e.exports=function(e){var t=i.get(e);r(e,t)}},function(e,t,n){"use strict";function r(e,t){function n(){var e=window.getSelection?window.getSelection():document.getSelection?document.getSelection():"";return 0===e.toString().length?null:e.getRangeAt(0).commonAncestorContainer}function r(){l||(l=setInterval(function(){return s.get(e)?(u(e,"top",e.scrollTop+c.top),u(e,"left",e.scrollLeft+c.left),void o(e)):void clearInterval(l)},50))}function f(){l&&(clearInterval(l),l=null),i.stopScrolling(e)}var l=null,c={top:0,left:0},h=!1;t.event.bind(t.ownerDocument,"selectionchange",function(){e.contains(n())?h=!0:(h=!1,f())}),t.event.bind(window,"mouseup",function(){h&&(h=!1,f())}),t.event.bind(window,"mousemove",function(t){if(h){var n={x:t.pageX,y:t.pageY},s={left:e.offsetLeft,right:e.offsetLeft+e.offsetWidth,top:e.offsetTop,bottom:e.offsetTop+e.offsetHeight};n.x<s.left+3?(c.left=-5,i.startScrolling(e,"x")):n.x>s.right-3?(c.left=5,i.startScrolling(e,"x")):c.left=0,n.y<s.top+3?(s.top+3-n.y<5?c.top=-5:c.top=-20,i.startScrolling(e,"y")):n.y>s.bottom-3?(n.y-s.bottom+3<5?c.top=5:c.top=20,i.startScrolling(e,"y")):c.top=0,0===c.top&&0===c.left?f():r()}})}var i=n(54),s=n(56),o=n(61),u=n(62);e.exports=function(e){var t=s.get(e);r(e,t)}},function(e,t,n){"use strict";function r(e,t,n,r){function u(n,r){var i=e.scrollTop,s=e.scrollLeft,o=Math.abs(n),u=Math.abs(r);if(u>o){if(0>r&&i===t.contentHeight-t.containerHeight||r>0&&0===i)return!t.settings.swipePropagation}else if(o>u&&(0>n&&s===t.contentWidth-t.containerWidth||n>0&&0===s))return!t.settings.swipePropagation;return!0}function f(t,n){o(e,"top",e.scrollTop-n),o(e,"left",e.scrollLeft-t),s(e)}function l(){E=!0}function c(){E=!1}function h(e){return e=e.originalEvent||e,e.targetTouches?e.targetTouches[0]:e}function p(e){return e=e.originalEvent||e,e.targetTouches&&1===e.targetTouches.length?!0:e.pointerType&&"mouse"!==e.pointerType&&e.pointerType!==e.MSPOINTER_TYPE_MOUSE?!0:!1}function d(e){if(p(e)){S=!0;var t=h(e);g.pageX=t.pageX,g.pageY=t.pageY,y=(new Date).getTime(),null!==w&&clearInterval(w),e.stopPropagation()}}function v(e){if(!E&&S&&p(e)){var t=h(e),n={pageX:t.pageX,pageY:t.pageY},r=n.pageX-g.pageX,i=n.pageY-g.pageY;f(r,i),g=n;var s=(new Date).getTime(),o=s-y;o>0&&(b.x=r/o,b.y=i/o,y=s),u(r,i)&&(e.stopPropagation(),e.preventDefault())}}function m(){!E&&S&&(S=!1,clearInterval(w),w=setInterval(function(){return i.get(e)?Math.abs(b.x)<.01&&Math.abs(b.y)<.01?void clearInterval(w):(f(30*b.x,30*b.y),b.x*=.8,void (b.y*=.8)):void clearInterval(w)},10))}var g={},y=0,b={},w=null,E=!1,S=!1;n&&(t.event.bind(window,"touchstart",l),t.event.bind(window,"touchend",c),t.event.bind(e,"touchstart",d),t.event.bind(e,"touchmove",v),t.event.bind(e,"touchend",m)),r&&(window.PointerEvent?(t.event.bind(window,"pointerdown",l),t.event.bind(window,"pointerup",c),t.event.bind(e,"pointerdown",d),t.event.bind(e,"pointermove",v),t.event.bind(e,"pointerup",m)):window.MSPointerEvent&&(t.event.bind(window,"MSPointerDown",l),t.event.bind(window,"MSPointerUp",c),t.event.bind(e,"MSPointerDown",d),t.event.bind(e,"MSPointerMove",v),t.event.bind(e,"MSPointerUp",m)))}var i=n(56),s=n(61),o=n(62);e.exports=function(e,t,n){var s=i.get(e);r(e,s,t,n)}},function(e,t,n){"use strict";var r=n(53),i=n(54),s=n(56),o=n(61),u=n(62);e.exports=function(e){var t=s.get(e);t&&(t.negativeScrollAdjustment=t.isNegativeScroll?e.scrollWidth-e.clientWidth:0,r.css(t.scrollbarXRail,"display","block"),r.css(t.scrollbarYRail,"display","block"),t.railXMarginWidth=i.toInt(r.css(t.scrollbarXRail,"marginLeft"))+i.toInt(r.css(t.scrollbarXRail,"marginRight")),t.railYMarginHeight=i.toInt(r.css(t.scrollbarYRail,"marginTop"))+i.toInt(r.css(t.scrollbarYRail,"marginBottom")),r.css(t.scrollbarXRail,"display","none"),r.css(t.scrollbarYRail,"display","none"),o(e),u(e,"top",e.scrollTop),u(e,"left",e.scrollLeft),r.css(t.scrollbarXRail,"display",""),r.css(t.scrollbarYRail,"display",""))}},function(e,t,n){"use strict";function r(){for(var e=$.Deferred(),t=arguments.length,n=0;t>n;n++)"pass"!==arguments[n]&&e.reject({errno:arguments[n].num,errmsg:arguments[n].msg});return e.resolve({errno:0,errmsg:""}),e.promise()}function i(e,t){return""==$.trim(t)?L.empty[e]:"pass"}function s(e,t){return e==t?"pass":L.equal.confirm}function o(e,t,n,r){var i=$.trim(t).length;return i>=n&&r>=i?"pass":L.len[e]}function u(e){e=$.trim(e);for(var t=0,n=e.length,r="",i=0;n>i;i++)r=e[i],null!=r.match(/^[\u4E00-\u9FA5]/gi)?t+=2:t++;return t}function u(e){e=$.trim(e);for(var t=0,n=e.length,r="",i=0;n>i;i++)r=e[i],null!=r.match(/^[\u4E00-\u9FA5]/gi)?t+=2:t++;return t}function a(e,t,n,r){var i=u(t);return i>=n&&r>=i?"pass":L.len[e]}function f(e,t,n){t=$.trim(t);var r=t.length,i=t.match(n);return null!=i&&i[0]&&i[0].length==r?"pass":L.regex[e]}function l(e){return/^1[34578][0-9]{9}$/.test(e)?"pass":L.regex.phone}function c(e){var t=u(e);return t>16||4>t?L.len.nickname:e.match(/\s/g)||e.match(/[^\u4E00-\u9FA5|_|A-Za-z0-9]/g)?L.regex.nickname:"pass"}function h(e){return e.match(/\s/g)||e.match(/[^\u4E00-\u9FA5]/g)?L.regex.realname:"pass"}function p(e,t,n,s,o){return e=e||"",e=e||"",t=t||"",n=n||"",s=s||"",r(i("account",e),i("authCode",n),i("nickName",s),c(s),i("password",t),x(o))}function d(e,t){return e=e||"",t=t||"",r(i("account",e),l(e),i("password",t),o("password",t,6,20))}function v(e){return e=e||"",r(i("account",e),o("account",e,6,16),f("account",e,A))}function m(e){return e=e||"",r(i("password",e),o("password",e,6,20))}function g(e,t){return r(i("confirm",t),s(e,t))}function y(e){return r(l(e))}function b(e){return r(i("captcha",e))}function w(e){var t=c(e);if("pass"!==t)return r(t);var n=$.Deferred();return O.checkNickNameRepeat({nickname:encodeURI(encodeURI(e))}).then(function(e){e&&e.check?n.reject({errno:L.same.nickname.num,errmsg:L.same.nickname.msg}):n.resolve({errno:0,errmsg:""})}),n.promise()}function E(e){var t=c(e);if("pass"!==t)return r(t);var n=$.Deferred();return O.checkNickNameRepeat({nickname:encodeURI(encodeURI(e))}).then(function(e){e&&e.check?n.resolve():n.reject({errmsg:"\u5bf9\u4e0d\u8d77, \u65e0\u6cd5\u627e\u5230\u5bf9\u5e94\u7528\u6237"})}),n.promise()}function S(e){return r(i("authCode",e))}function x(e){return e?"pass"
:L.regex.agreement}function T(e){return r(i("code",e))}function N(e,t){var n=$.Deferred();return e&&""==$.trim(t)?n.reject({errmsg:"\u9a8c\u8bc1\u7801\u8f93\u5165\u4e3a\u7a7a"}):n.resolve(),n.promise()}function C(e){return r(i("realname",e),a("realname",e,4,18),h(e))}function k(e){return r(i("idcard",e),o("idcard",e,18,18),M.checkIDcard(e))}var L={regex:{account:{msg:"\u8d26\u53f7\u5e94\u4e3a\u5b57\u6bcd\u5f00\u5934\uff0c\u53ea\u5141\u8bb8\u7531\u5b57\u6bcd\u3001\u6570\u5b57\u4e0e\u4e0b\u5212\u7ebf\u7ec4\u6210",num:-1},phone:{msg:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u624b\u673a\u53f7\u7801",num:-1},nickname:{msg:"\u6635\u79f0\u5e94\u4e3a\u4e2d\u6587, \u6570\u5b57, \u4e0b\u5212\u7ebf\u7684\u7ec4\u5408",num:-4},agreement:{msg:"\u60a8\u9700\u8981\u540c\u610f\u6ce8\u518c\u534f\u8bae\u54df",num:-6},idcard:{msg:"\u8bf7\u6b63\u786e\u586b\u5199\u8eab\u4efd\u8bc1\u53f7",num:-10},realname:{msg:"\u8bf7\u6b63\u786e\u586b\u5199\u59d3\u540d",num:-9}},len:{account:{msg:"\u8d26\u53f7\u957f\u5ea6\u5e94\u4e3a6-16\u4f4d",num:-1},password:{msg:"\u5bc6\u7801\u81f3\u5c116\u4f4d\u4e14\u5c0f\u4e8e20\u4f4d",num:-2},nickname:{msg:"\u6635\u79f0\u5e94\u4e3a4-16\u4e2a\u5b57\u7b26",num:-4},realname:{msg:"\u8bf7\u6b63\u786e\u586b\u5199\u59d3\u540d",num:-9},idcard:{msg:"\u8bf7\u6b63\u786e\u586b\u5199\u8eab\u4efd\u8bc1\u53f7",num:-10}},empty:{account:{msg:"\u8d26\u6237\u540d\u8f93\u5165\u4e3a\u7a7a",num:-1},password:{msg:"\u5bc6\u7801\u8f93\u5165\u4e3a\u7a7a",num:-2},confirm:{msg:"\u786e\u8ba4\u5bc6\u7801\u8f93\u5165\u4e3a\u7a7a",num:-3},authCode:{msg:"\u9a8c\u8bc1\u7801\u8f93\u5165\u4e3a\u7a7a",num:-5},nickName:{msg:"\u6635\u79f0\u8f93\u5165\u4e3a\u7a7a",num:-4},code:{msg:"\u9080\u8bf7\u7801\u8f93\u5165\u4e3a\u7a7a",num:-7},captcha:{msg:"\u9a8c\u8bc1\u7801\u8f93\u5165\u4e3a\u7a7a",num:-8},realname:{msg:"\u59d3\u540d\u8f93\u5165\u4e3a\u7a7a",num:-9},idcard:{msg:"\u8eab\u4efd\u8bc1\u53f7\u8f93\u5165\u4e3a\u7a7a",num:-10}},equal:{confirm:{msg:"\u4e24\u6b21\u8f93\u5165\u7684\u5bc6\u7801\u4e0d\u540c",num:-3}},same:{nickname:{msg:"\u6635\u79f0\u5df2\u88ab\u5360\u7528",num:-4}}},A=/^[A-Za-z][A-za-z0-9_]+/g,O=n(72).rucInterface,M=function(){function e(e){var e=$.trim(e),e=e.toUpperCase(),s=t(e),o=n(e.substring(0,2)),u=r(e.substring(6,10),e.substring(10,12),e.substring(12,14)),a=i(e);return s&&o&&u&&a?"pass":L.regex.idcard}function t(e){var t=/(^\d{15}$)|(^\d{17}(\d|X)$)/;return t.test(e)?!0:!1}function n(e){var t=!1;return $.each(s,function(n,r){r==e&&(t=!0)}),t}function r(e,t,n){var r=new Date,i=r.getFullYear();return 3>i-e||i-e>120||0>t||t>12||0>n||n>31?!1:!0}function i(e){var t=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2],n=["1","0","X","9","8","7","6","5","4","3","2"],r=0,i=0;if(15==e.length)return!0;for(i=0;17>i;i++)r+=e.substr(i,1)*t[i];var s=n[r%11],o=e.length-1;return s==e.charAt(o)?!0:!1}var s=["11","12","13","14","15","21","22","23","31","32","33","34","35","36","37","41","42","43","44","45","46","50","51","52","53","54","61","62","63","64","65","71","81","82","91"];return{checkIDcard:e}}(),_={checkRegisterInfo:p,checkLoginInfo:d,checkName:v,checkPassword:m,checkConfirm:g,checkPhone:y,checkNickName:w,checkAuth:S,checkNickNameForAddManager:E,checkCode:T,checkCaptcha:b,checkRealname:C,checkIDCard:k,checkVoiceCode:N};e.exports=_},function(e,t,n){"use strict";var r=n(75),i=n(76),s=n(77),o=n(78),u=n(79),a=n(80),f=n(73),l=n(81),c=n(82),h=n(83),p=n(84),d=n(85);e.exports={ajax:r,liveInterface:i,taskInterface:s,roomInterface:u,hostInterface:o,verifyCodeInterface:a,rucInterface:f,selfInfoInterface:l,statInfoInterface:c,searchInterface:h,giftInterface:p,videoInterface:d}},function(e,t,n){"use strict";function r(e){var t=$.Deferred();return $.when(m.requestHttpsRuc("ajax_aeskey")).then(function(n){var r=n.data||"";r=v.enc.Utf8.parse(r);var i=v.enc.Utf8.parse("995d1b5ebbac3761"),s=v.AES.encrypt(e,r,{iv:i,mode:v.mode.CBC,padding:v.pad.ZeroPadding}).toString();t.resolve(s)}).fail(function(){t.resolve(null)}),t.promise()}function i(e,t){var n=$.Deferred(),r=v.enc.Utf8.parse(e),i=v.enc.Utf8.parse("995d1b5ebbac3761"),s=v.AES.encrypt(t,r,{iv:i,mode:v.mode.CBC,padding:v.pad.ZeroPadding}).toString();return n.resolve(s),n}function s(e){return m.requestHttpsRuc("ajax_login",e)}function o(e){return m.requestHttpsRuc("ajax_mobile_register",e)}function u(){return m.requestRuc("logout")}function a(){var e=$.Deferred();return m.requestRuc("auth").then(function(t){0==t.errno&&t.data?e.resolve(t.data):e.resolve(null)}),e.promise()}function f(e){var t=$.Deferred();return m.requestRuc("ajax_check_nickname",e).then(function(e){0==e.errno&&e.data?t.resolve(e.data):t.resolve(null)}),t.promise()}function l(e){var t=$.Deferred();return m.requestRuc("ajax_send_register_sms",e).then(function(e){0==e.errno?t.resolve():t.reject(e)}),t.promise()}function c(e){var t=$.Deferred();return m.requestRuc("ajax_forgetmain",e).then(function(e){t.resolve(e)}),t.promise()}function h(e){var t=$.Deferred();return m.requestRuc("ajax_resetpwd",e).then(function(e){t.resolve(e)}),t.promise()}function p(e){var t=$.Deferred();return m.requestHttpsRuc("ajax_reset_forget_pwd",e).then(function(e){t.resolve(e)}),t.promise()}function d(){var e=$.Deferred();return m.requestRuc("ajax_sendmailfindpwd").then(function(t){e.resolve(t)}),e.promise()}var v=n(74),m=n(75),g={getAesWord:i,aesPassword:r,login:s,regist:o,logout:u,getUserInfo:a,checkNickNameRepeat:f,requestRegistVCode:l,retrievePasswordEntry:c,resetPwd:h,resetPwdByMobile:p,setEmail:d};e.exports=g},30,function(e,t){"use strict";function n(e,t){return t=t||{},$.ajax("http://u.panda.tv/"+e,{data:t,dataType:"jsonp",jsonp:"_jp"})}function r(e,t){return t=t||{},$.ajax("https://u.panda.tv/"+e,{data:t,dataType:"jsonp",jsonp:"_jp"})}function i(e,t,n){return t=t||{},n=n||{},PDR.ajax(e,$.extend({},n,{data:t,dataType:"json"}))}function s(e,t,n){return t=t||{},n=n||{},PDR.ajax(e,$.extend({},n,{method:"POST",data:t,dataType:"json"}))}function o(e,t,n){return t=t||{},n=n||{},$.ajax("http://mall.panda.tv"+e,$.extend({},n,{data:t,dataType:"json"}))}e.exports={getData:i,postData:s,requestRuc:n,requestHttpsRuc:r,requestMall:o}},function(e,t,n){"use strict";var r=n(75),i={getNewHostList:function(e){var t=$.Deferred();return r.getData("/live_lists",{pageno:1,pagenum:e,status:2}).then(function(e){e&&0==e.errno&&e.data?t.resolve(e.data):t.resolve(null)}).fail(function(){t.resolve(null)}),t.promise()},getUnfollowedList:function(e){var t=$.Deferred();return r.getData("/live_online_unfollowed",{num:e,status:2}).then(function(e){e&&0==e.errno&&e.data?t.resolve(e.data):t.resolve(null)}).fail(function(){t.resolve(null)}),t.promise()}};e.exports=i},function(e,t,n){"use strict";var r=n(75),i={getTimerConfig:function(){return r.getData("/ajax_time_task_list")},finishTaskById:function(e){return r.getData("/ajax_time_task_done",{task_id:e})},getTimerAward:function(e,t,n){return n=n||{},r.getData("/ajax_task_rewards_get",$.extend({my_task_id:e,appkey:t||"pandaren_time_task",app:"pandatv"},n))},getNewFishTaskList:function(){var e=$.Deferred();return r.getData("/ajax_newer_task_list").then(function(t){t&&0==t.errno&&t.data?e.resolve(t.data):e.resolve(null)}).fail(function(){e.resolve(null)}),e.promise()}};e.exports=i},function(e,t,n){"use strict";var r=n(75),i={getUserMail:function(){return r.getData("/ajax_host_email")},getHostApplication:function(){return r.getData("/ajax_get_hostinfo")},submitHostApplication:function(e){return e=e||{},r.postData("/ajax_set_hostinfo",e)}};e.exports=i},function(e,t,n){"use strict";var r=PDR.getRoomId(),i=n(75),s=null,o=null,u={getRoomInfo:function(e,t){var n=$.Deferred();return!s||e&&e!=r?i.getData("/api_room_v2",{roomid:e,pub_key:t||"",_:$.now()}).then(function(t){t&&0==t.errno&&t.data?(r=e,s=t.data,n.resolve(t.data)):n.resolve(null)}).fail(function(){n.resolve(null)}):n.resolve(s),n.promise()},getRoomInfoFresh:function(e,t){var n=$.Deferred();return i.getData("/api_room_v2",{roomid:e,pub_key:t||"",_:$.now()}).then(function(e){e&&0==e.errno&&e.data?n.resolve(e.data):n.resolve(null)}).fail(function(){n.resolve(null)}),n.promise()},getHostInfo:function(){var e=$.Deferred();return s?e.resolve(s.hostinfo):u.getRoomInfo().then(function(t){e.resolve(t.hostinfo)}).fail(function(){e.resolve(null)}),e.promise()},getRoomFollowInfo:function(e){var t=$.Deferred();return e?i.getData("/room_followinfo",{roomid:e,_:$.now()}).then(function(e){e&&0===e.errno&&e.data?t.resolve(e.data):t.reject(null)}).fail(function(){t.reject(null)}):t.reject(null),t.promise()},postFollowRoom:function(e){return i.postData("/ajax_follow",{roomid:e})},postUnFollowRoom:function(e){return i.postData("/ajax_unfollow",{roomid:e})},updateRoomInfo:function(e){var t=$.Deferred(),n=e||r;return i.getData("/api_room_v2",{roomid:n,_:$.now()}).then(function(e){e&&0==e.errno&&e.data?(r=n,s=e.data,t.resolve(e.data)):t.resolve(null)}).fail(function(){t.resolve(null)}),t.promise()},sendPresent:function(e){var t=$.Deferred();return this.getRoomInfo().then(function(n){var r=n.roominfo,s=n.hostinfo,o=s.rid,u=r.id;i.getData("/ajax_bamboos_send",{bamboos_num:e,to:o,roomid:u}).then(function(e){t.resolve(e)})}),t.promise()},sendGroupMsg:function(e,t,n){var r=$.Deferred();return u.getRoomInfo(t).then(function(t){var s=t.userinfo,o=t.roominfo;if(!s||!s.rid||parseInt(s.rid)<=0)r.reject("\u7528\u6237\u6ca1\u6709\u767b\u5f55");else if(o&&o.id){var t={roomid:o.id,type:1,content:e,hostid:t.hostinfo.rid};$.extend(t,n||{}),i.getData("/ajax_send_group_msg",t).then(function(e){r.resolve(e)}).fail(function(){r.reject("\u8bf7\u6c42\u53d1\u9001\u5931\u8d25")})}else r.reject("\u6ca1\u6709\u623f\u95f4\u6d88\u606f")}),r.promise()},appointManager:function(e){var t=$.Deferred();return this.getRoomInfo().then(function(n){i.postData("/ajax_user_role_allocate",$.extend({roomid:n.roominfo.id},e)).then(function(e){0==e.errno?t.resolve():t.reject(e.errmsg)}).fail(function(){t.reject("\u6dfb\u52a0\u7ba1\u7406\u5458\u5931\u8d25")})}),t.promise()},removeManager:function(e){var t=$.Deferred();return this.getRoomInfo().then(function(n){i.postData("/ajax_user_role_del",$.extend({roomid:n.roominfo.id},e)).then(function(e){0==e.errno?t.resolve():t.reject(e.errmsg)}).fail(function(){t.reject("\u89e3\u9664\u7ba1\u7406\u5458\u5931\u8d25")})}),t.promise()},silence:function(e){var t=$.Deferred();return this.getRoomInfo().then(function(n){i.postData("/ajax_forbid_speak",{roomid:n.roominfo.id,person_id:e}).then(function(e){0==e.errno?t.resolve():t.reject(e.errmsg)}).fail(function(){t.reject("\u7981\u8a00\u5931\u8d25")})}),t.promise()},silenceIP:function(e){var t=$.Deferred();return this.getRoomInfo().then(function(n){i.postData("/ajax_forbid_ip",{roomid:n.roominfo.id,person_id:e}).then(function(e){0==e.errno?t.resolve():t.reject(e.errmsg)}).fail(function(){t.reject("\u5c01\u7981IP\u5931\u8d25")})}),t.promise()},report:function(e){var t=$.Deferred();return i.getData("/ajax_report_msg",e).then(function(e){0==e.errno?t.resolve():t.reject(e.errmsg)}).fail(function(){t.reject("\u4e3e\u62a5\u5931\u8d25")}),t},clear:function(){s=null,o=null}};e.exports=u},function(e,t,n){"use strict";var r=n(75),i={getHostPhone:function(e){return r.requestRuc("ajax_send_apply_anchor_sms",{})},checkHostPhone:function(e,t){return r.requestRuc("ajax_check_apply_anchor",{vcode:t})},sendRetrievePasswordSMS:function(){var e=$.Deferred();return r.requestRuc("ajax_send_reset_pwd_sms").then(function(t){return e.resolve(t)}),e.promise()},checkRetrievePasswordSMS:function(e){var t=$.Deferred();return r.requestRuc("ajax_check_reset_pwd_mobile",e).then(function(e){t.resolve(e)}),t.promise()}};e.exports=i},function(e,t,n){"use strict";function r(e){jQuery&&jQuery.ajaxSetup({data:{token:e},cache:!1,timeout:6e3})}var i=n(75),s=n(2),o={},u=!1,a={rid:Math.round(-1e8*Math.random()),avatar:"http://i3.pdim.gs/t01d6c1f188a949e62f.jpg",bamboos:"0",exp:"0",hostStatus:"0",identity:"0",isHost:!1,nickName:"\u8bbf\u5ba2",roomId:"",sp_identity:"",token:"",weight:"0"},f=PDR.getRoomId(),l=null,c=$.now(),h=null,p=null,d={getSelfInfo:function(e){var t=$.Deferred(),n=o.data;return e=e||f,!n||e&&e!=o.roomid?u?t.resolve(a):i.getData("/ajax_get_myinfo",{option:["bamboos","ishost","isbanned","exp"].join(","),roomid:e,_:$.now()}).then(function(i){i&&0==i.errno&&i.data?(r(i.data.token),o.roomid=e,o.data=i.data,n&&s.triggerEvent("user-info-updated",i.data),t.resolve(i.data)):(u=!0,t.resolve(a))}).fail(function(){u=!0,t.resolve(a)}):t.resolve(n),t.promise()},updateSelfInfo:function(e){var t=$.Deferred();return e=e||o.roomid||f,i.getData("/ajax_get_myinfo",{option:["bamboos","ishost","isbanned","exp"].join(","),roomid:e,_:$.now()}).then(function(n){n&&0==n.errno&&n.data?(o.roomid=e,o.data=n.data,s.triggerEvent("user-info-updated",n.data),t.resolve(n.data)):t.resolve(a)}).fail(function(){t.resolve(a)}),t.promise()},setUserInfo:function(e){var t=$.Deferred();return i.getData("/ajax_set_userinfo",e).then(function(e){0==e.errno?t.resolve(e.data):alert(e.errmsg)}).fail(function(){t.reject("bad request")}),t},getExp:function(e){var t=$.Deferred(),n=this;return!e&&l&&c+3e5>$.now()?t.resolve(l):i.getData("/ajax_my_exp_get").done(function(e){e&&"0"==e.errno&&e.data?(n.setExp(e.data),t.resolve(e.data)):(l=null,t.resolve({level:-1,exp:-1}))}).fail(function(){l=null,t.resolve({level:-1,exp:-1})}),t.promise()},setExp:function(e){var t=$.extend({},l);return l=$.extend({},e),c=$.now(),t&&t.exp==e.exp||s.triggerEvent("user-exp-changed",{oldValue:t,newValue:l}),t&&t.level==e.level||s.triggerEvent("user-level-changed",{oldValue:t.level,newValue:l.level}),this},getBamboos:function(e){var t=$.Deferred(),n=this;return!e&&p?t.resolve(p):i.getData("/ajax_my_bamboos_get").done(function(e){e&&"0"==e.errno?(n.setBamboos(e.data),t.resolve(e.data)):t.resolve(0)}).fail(function(){t.resolve(0)}),t.promise()},setBamboos:function(e){var t=p;return p=e,t!=p&&s.triggerEvent("user-bamboo-changed",{oldValue:t,newValue:p}),this},getMaobi:function(e){var t=$.Deferred(),n=this;return!e&&h?t.resolve(h):i.requestMall("/ajax_gift_money_get").done(function(e){e&&"0"==e.errno?(n.setMaobi(e.data),t.resolve(e.data)):t.resolve(0)}).fail(function(){t.resolve(0)}),t.promise()},setMaobi:function(e){var t=h;return h=e,t!=h&&s.triggerEvent("user-maobi-changed",{oldValue:t,newValue:h}),this},getMessageNum:function(){var e=$.Deferred();return i.getData("/ajax_get_message_num",{},{cache:!1}).done(function(t){t&&0==t.errno?e.resolve(t.data):e.resolve(null)}).fail(function(){e.resolve(null)}),e.promise()}};e.exports=d},function(e,t,n){"use strict";var r=n(75),i={getLiveTime:function(e,t,n,i){return r.getData("/ajax_play_list_by_range",{starttime:e,endtime:t,pageno:n,pagenum:i})},getBamboosStat:function(e,t,n,i,s){return r.getData("/ajax_bamboo_range_stat",{start:e,end:t,pageno:i,pagenum:n,need_bamboo_cnt:s})}};e.exports=i},function(e,t,n){"use strict";var r=n(75);e.exports={search:function(e){return r.getData("/ajax_search",e||{})}}},function(e,t,n){"use strict";function r(e){var t=$.Deferred();return o.requestMall("/ajax_gift_send",e).then(function(e){0==e.errno&&e.data?t.resolve(e):t.reject(e)}).fail(function(){t.reject({errno:500,errmsg:"\u571f\u8c6a\uff0c\u8bf7\u6162\u6162\u70b9\u5566"})}),t.promise()}function i(e){var t=$.Deferred();return o.requestMall("/ajax_gift_gifts_get",{roomid:e}).then(function(e){0==e.errno&&e.data?t.resolve(e.data):t.reject(e)}).fail(function(){t.reject()}),t.promise()}function s(e){var t=$.Deferred();return o.requestMall("/ajax_get_room_gifting",{roomid:e}).then(function(e){e&&0===e.errno&&e.data&&"array"==$.type(e.data)&&e.data.length>0?t.resolve(e.data):t.reject()}).fail(function(){t.reject()}),t.promise()}var o=n(75);e.exports={sendGift:r,getGiftListByRoomID:i,getRoomGifting:s}},function(e,t,n){"use strict";var r="http://vod.panda.tv",i={},s=(n(75),function(e){return r+"/"+e}),o={getVideoInfo:function(e,t){var n={cache:!0};$.extend(n,t);var r=$.Deferred();return n.cache&&i[e]&&r.resolve(i[e]),$.ajax(s("api/get/"+e)).then(function(t){0===t.errno&&t.data&&"string"!=typeof t.data?(i[e]=t.data,r.resolve(t.data)):r.reject(null)}).fail(function(){r.reject(null)}),r.promise()},getVideoList:function(e,t){var n={data:{pagenum:100,order:"upload_time",pageno:0},cache:!0};$.extend(n,t);var r=$.Deferred();return n.cache&&i[n.data.pagenum]&&i[n.data.pagenum][n.data.pageno]&&r.resolve(i[n.data.pagenum][n.data.pageno]),$.ajax({url:s("api/list/"+e),data:n.data}).then(function(e){0===e.errno&&e.data.list&&"string"!=typeof e.data.list?(i[n.data.pagenum]||(i[n.data.pagenum]={}),i[n.data.pagenum][n.data.pageno]=e.data,r.resolve(e.data)):r.reject(null)}).fail(function(){r.reject(null)}),r.promise()},addPlayTimes:function(e){return $.ajax(s("api/incrnum/"+e))}};e.exports=o},function(e,t){function n(){this.$button=null,this.interval=null,this.state="enable",this.options={time:60,disableClass:"button-disable"}}n.prototype.initialize=function(e){this.options=$.extend(this.options,e)},n.prototype.start=function(e){this.$button=e,this.$button.addClass(this.options.disableClass).html("\u91cd\u65b0\u53d1\u9001("+this.options.time+"\u79d2)");var t=this.options.time,n=this;this.state="disable",this.interval=window.setInterval(function(){return 0>=t?void n.clear():(t--,void n.$button.html("\u91cd\u65b0\u53d1\u9001("+t+"\u79d2)"))},1e3)},n.prototype.clear=function(){clearInterval(this.interval),this.interval=null,this.$button.removeClass(this.options.disableClass),this.$button.html("\u91cd\u65b0\u53d1\u9001"),this.state="enable"},e.exports=n},function(e,t,n){var r=n(10);e.exports=(r["default"]||r).template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,r){var i;return'<div id="ruc_dialog_container" class="'+this.escapeExpression((i=null!=(i=t.type||(null!=e?e.type:e))?i:t.helperMissing,"function"==typeof i?i.call(e,{name:"type",hash:{},data:r}):i))+'">\n    <div class="ruc-dialog-header">\n        <a class="logo-href" href="/" target="_top">\n          <img src="http://i7.pdim.gs/effb81cfed0c3877da6e0f216c9d2be6.png" alt="logo">\n        </a>\n        <a href="javascript:;" class="tab ruc-goto-login-btn">\u767b\u5f55</a>\n        <a href="javascript:;" class="tab ruc-goto-register-btn">\u6ce8\u518c</a>\n        <div class="ruc-dialog-close"><a href="javascript:;"></a></div>\n    </div>\n    <div class="ruc-dialog-content">\n    </div>\n    <div class="ruc-dialog-footer">\n    </div>\n</div>'},useData:!0})},function(e,t,n){var r=n(10);e.exports=(r["default"]||r).template({1:function(e,t,n,r){return'    <div class="form-item ruc-third-way-login">\n        <span>\u793e\u533a\u8d26\u53f7\u767b\u5f55</span>\n        <ul class="ruc-third-way-list clearfix">\n            <li class="third-way-list-item icon-use-fb">\n                <a class="ruc-use-fb" data-type="1" href="javascript:void(0);"></a>\n            </li>\n            <li class="third-way-list-item icon-use-twitter">\n                <a class="ruc-use-twitter" data-type="2" href="javascript:void(0);"></a>\n            </li>\n        </ul>\n    </div>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,r,i){var s;return'<div class="ruc-login-container">\n    <div class="form-item ruc-input-box">\n        <span class="ruc-input-icon ruc-login-phone">\n            <i></i>\n        </span>\n        <input type="text" placeholder = "\u8f93\u5165\u624b\u673a\u53f7" class="ruc-input-login-name" name="account" />\n        <div class="input-item-error-text" id="ruc_error_text_name"></div>\n    </div>\n    <div class="form-item ruc-input-box">\n        <span class="ruc-input-icon ruc-login-password">\n            <i></i>\n        </span> \n        <input type="password" placeholder="\u5bc6\u7801" id="ruc-input-password-field" class="ruc-input-login-passport" name="password" />\n        <div class="input-item-error-text" id="ruc_error_text_password"></div>\n    </div>\n\n    <div class="form-item ruc-input-box login-voice-verify">\n        <span class="ruc-input-icon ruc-register-auth">\n            <i></i>\n        </span> \n        <input placeholder="\u9a8c\u8bc1\u7801" type="text" class="ruc-input-voice-verify" id="ruc-input-voice-verify" name="voice-verify" maxlength="6"/>\n        <a href="javascript:;" id="ruc-send-voice-verify-btn">\u83b7\u53d6\u9a8c\u8bc1\u7801</a>\n        <div class="input-item-error-text ruc_error_auth" id="ruc_error_text_auth"></div>\n        <div class="voice-authcode-notice" id="voice-authcode-notice">\u8bf7\u7559\u610f12590\u5f00\u5934\u7684\u53f7\u7801\uff0c\u63a5\u542c\u9a8c\u8bc1\u7801\uff01</div>\n        <div class="ruc-regist-tips voice-authcode-tips">\n            <span class="tips-triangle"></span>\n            <span class="tips-dispatch-triangle"></span>\n            <div class="tips-content">\n                <p>\u8bf7\u8f93\u5165\u63a5\u542c\u5230\u7684\u9a8c\u8bc1\u7801</p>\n            </div>\n        </div>\n    </div>\n\n    <div class="form-item common-error-msg-container">\n        <div class="input-item-service-error-text" id="ruc_error_common_msg"></div>\n    </div>\n    <div class="form-item control-password clearfix">\n        <a target="_top" href="/resetpwd" title="\u53bb\u627e\u56de\u5bc6\u7801">\u5fd8\u8bb0\u5bc6\u7801?</a>\n    </div>\n    <div class="form-item button-container login-button-container">\n        <div id="ruc_login_btn" class="input-item-btn">\u7acb\u5373\u767b\u5f55</div>\n    </div>\n'+(null!=(s=n(24).call(e,null!=e?e.data:e,"!==",1,{name:"ifcond",hash:{},fn:this.program(1,i,0),inverse:this.noop,data:i}))?s:"")+"</div>\n"},useData:!0})},function(e,t,n){var r=n(10);e.exports=(r["default"]||r).template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,r){return'<div class="ruc-register-container"> \n    <div class="form-item ruc-input-box">\n        <span class="ruc-input-icon ruc-login-phone">\n            <i></i>\n        </span> \n        <input type="text" placeholder="\u8f93\u5165\u624b\u673a\u53f7" class="ruc-input-register-name" name="account" maxlength="11"/>\n        <i class="icon-ok"></i>\n        <div class="input-item-error-text" id="ruc_error_text_name"></div>\n    </div>\n\n    <div class="form-item ruc-input-box">\n        <span class="ruc-input-icon ruc-register-auth">\n            <i></i>\n        </span> \n        <input type="text" placeholder="\u9a8c\u8bc1\u7801" class="ruc-input-register-auth" name="auth" maxlength="6"/>\n        <a href="javascript:;" id="ruc-send-auth-code-btn">\u83b7\u53d6\u9a8c\u8bc1\u7801</a>\n        <div class="input-item-error-text ruc_error_auth" id="ruc_error_text_auth"></div>\n        <div class="voice-authcode-notice" id="voice-authcode-notice">\u8bf7\u7559\u610f12590\u5f00\u5934\u7684\u53f7\u7801\uff0c\u63a5\u542c\u9a8c\u8bc1\u7801</div>\n        <div class="ruc-regist-tips voice-authcode-tips">\n            <span class="tips-ie8"></span>\n            <span class="tips-triangle"></span>\n            <span class="tips-dispatch-triangle"></span>\n            <div class="tips-content">\n                <p>\u8bf7\u8f93\u5165\u63a5\u542c\u5230\u7684\u9a8c\u8bc1\u7801</p>\n            </div>\n        </div>\n    </div>\n\n    <div class="form-item ruc-input-box ruc-register-name">\n        <span class="ruc-input-icon ruc-register-name">\n            <i></i>\n        </span> \n        <input type="text" placeholder="\u6635\u79f0" class="ruc-input-register-nickname" name="nickname" autocomplete="off" maxlength="16"/>\n        <i class="icon-ok"></i>\n        <div class="input-item-error-text" id="ruc_error_text_nickname"></div>\n        <div class="ruc-regist-tips voice-authcode-tips">\n            <span class="tips-ie8"></span>\n            <span class="tips-triangle"></span>\n            <span class="tips-dispatch-triangle"></span>\n            <div class="tips-content">\n                <p>\u6635\u79f0\u5728\u6ce8\u518c\u540e\u4e0d\u53ef\u4fee\u6539</p>\n            </div>\n        </div>\n    </div>\n\n    <div class="form-item ruc-input-box">\n        <span class="ruc-input-icon ruc-register-password">\n            <i></i>\n        </span> \n        <input id="ruc-register-password-field" placeholder="\u5bc6\u7801" class="ruc-input-register-password" type="password" name="password" autocomplete="off" maxlength="16"/>\n        <i class="icon-ok"></i>\n        <div class="input-item-error-text" id="ruc_error_text_name"></div>\n        <div class="ruc-regist-tips voice-authcode-tips">\n            <span class="tips-ie8"></span>\n            <span class="tips-triangle"></span>\n            <span class="tips-dispatch-triangle"></span>\n            <div class="tips-content">\n                <p>\u5bc6\u7801\u957f\u5ea6\u4e3a6~16\u4f4d\uff0c\u53ef\u4ee5\u662f\u6570\u5b57\u3001\u5b57\u6bcd\u7b49\u4efb\u610f\u6570\u5b57</p>\n            </div>\n        </div>\n    </div>\n\n    <div class="form-item agreement-container">\n        <span class="chose-check-box agreement-checkbox checked">\n            <i></i>\n        </span>\n        <label for="agreement" class="checkbox-label"><a class="agreement-link" href="/agreement.html" target="_top">\u718a\u732bTV\u670d\u52a1\u6761\u6b3e</a></label>\n    </div>\n    <div class="form-item common-error-msg-container">\n        <div class="input-item-error-text" id="ruc_error_common_msg"></div>\n    </div>\n    <div class="form-item button-container">\n        <div id="ruc_regist_btn" class="input-item-btn">\u6ce8\u518c</div>\n    </div>\n</div>\n'},useData:!0})},function(e,t,n){var r=n(10);e.exports=(r["default"]||r).template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,r){return'<div class="ruc-right-content-desc">\n    <span class="ruc-right-title">\u60a8\u53ef\u4ee5\u4f7f\u7528\u5176\u4ed6\u767b\u5f55\u65b9\u5f0f</span>\n    <ul class="ruc-auth-way-list">\n        <li class="auth-way-list-item"><a class="ruc-use-qq icon-use-qq" href="javascript:"></a></li>\n        <li class="auth-way-list-item"><a class="ruc-use-wb icon-use-weibo" href="javascript:"></a></li>\n    </ul>\n\n    <span>\u5df2\u6709\u718a\u732b\u8d26\u53f7?</span><a id="ruc-go-login" href="javascript:;">\u7acb\u5373\u767b\u5f55</a>\n</div>'},useData:!0})},function(e,t,n){var r=n(10);e.exports=(r["default"]||r).template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,r){return'<div class="ruc-right-content-desc">\n    <span class="ruc-right-title">\u60a8\u53ef\u4ee5\u4f7f\u7528\u5176\u4ed6\u767b\u5f55\u65b9\u5f0f</span>\n    <ul class="ruc-auth-way-list">\n        <li class="auth-way-list-item"><a class="ruc-use-qq icon-use-qq" href="javascript:"></a></li>\n        <li class="auth-way-list-item"><a class="ruc-use-wb icon-use-weibo" href="javascript:"></a></li>\n    </ul>\n\n    <a id="ruc-go-register" href="javascript:;">\u5feb\u901f\u6ce8\u518c\u718a\u732bTV\u8d26\u53f7</a>\n</div>'},useData:!0})},function(e,t,n){var r=n(10);e.exports=(r["default"]||r).template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,r){return'<div class="ruc-identity-container">\n    <div class="form-item">\n        <input type="text" placeholder="\u59d3\u540d" class="ruc-input-real-name" name="realname" />\n        <div class="input-item-error-text" id="ruc_error_text_realname"></div>\n    </div>\n    <div class="form-item">\n        <input type="text" placeholder="\u8eab\u4efd\u8bc1" class="ruc-input-id-card" name="idcard" />\n        <div class="input-item-error-text" id="ruc_error_text_id_card"></div>\n    </div>\n    <div class="form-item button-container">\n        <div id="ruc_identity_btn" class="input-item-btn">\u63d0\u4ea4</div>\n    </div>\n</div>'},useData:!0})},,,,,,,,,function(e,t,n){e.exports.host=n(102),e.exports.identity=n(103),e.exports.room=n(104),e.exports.giftName=n(105)},function(e,t){e.exports={HOST_ACTIVATE:1,HOST_DISABLE:2}},function(e,t){"use strict";var n=1e4,r=120,i=90,s=60,o=30,u="23895608",a="24370452",f={XIAOZHANG:n,SUPER_MANAGER:r,HOST:i,ROOM_MANAGER:s,NORMAL:o,MANAGER:s,NORMAL_USER:o,formatPermission:function(e){return isNaN(parseInt(e))?o:parseInt(e)},formatPermissionForSP:function(e){return f.formatPermissionSP(e)},formatPermissionSP:function(e){return isNaN(parseInt(e))?e:parseInt(e)},isXiaozhang:function(e){return($.isPlainObject(e)?e.sp_identity:e)==n},isSuperManager:function(e){return($.isPlainObject(e)?e.sp_identity:e)==r},isHost:function(e){return($.isPlainObject(e)?e.identity:e)==i},isManager:function(e){return f.isRoomManager(e)},isRoomManager:function(e){return($.isPlainObject(e)?e.identity:e)==s},isNormal:function(e){return($.isPlainObject(e)?e.identity:e)==o},isBaby:function(e){return $.isPlainObject(e)&&(e=e.rid),e==u||e==a}};e.exports=f},function(e,t){e.exports={LIVE_PLAYING:2,LIVE_STOP:3,LIVE_BAN:4}},function(e,t){e.exports={FTQ:"\u4f5b\u8df3\u5899",LX:"\u9f99\u867e",KY:"\u70e4\u9c7c",FT:"\u996d\u56e2"}},,,,,,,,,,function(e,t,n){"user strict";function r(e){return e=e||[],e=$(e).filter(function(e,t){return!($.inArray(t,h)>-1)}).toArray(),0===e.length?$.when($.extend({},u)):f.getUserSetting({keys:e.join(",")}).done(function(e){var t;if(e)for(t in e)e.hasOwnProperty(t)&&(u[t]=e[t],h.push(t));return l.set(c,JSON.stringify(u)),$.extend({},u)})}function i(e,t,n){var r=u[e];u[e]=t,l.set(c,JSON.stringify(u)),a.triggerEvent("user-setting-changed",{key:e,oldValue:r,newValue:t}),n&&o(e,t)}function s(e){return e?u[e]:$.extend({},u)}function o(e,t){return f.saveUserSetting({key:e,val:t})}n(116);var u,a=n(2),f=n(117),l=window.LS,c="panda.tv/user/setting",h=[];try{u=l.get(c),u=u?JSON.parse(u):{}}catch(p){u={}}e.exports={init:r,set:i,get:s}},function(e,t){!function(e){var t,n=function(){},r=e.document,i={set:n,get:n,remove:n,clear:n,each:n,obj:n,length:0};!function(){if("localStorage"in e)try{return void (t=e.localStorage)}catch(n){}var i,s,o=r.getElementsByTagName("head")[0],u=e.location.hostname||"localStorage",a=new Date;if(o.addBehavior){try{s=new ActiveXObject("htmlfile"),s.open(),s.write('<script>document.w=window;</script><iframe src="http://www.panda.tv/favicon.ico"></iframe>'),s.close(),i=s.w.frames[0].document,o=i.createElement("head"),i.appendChild(o)}catch(n){o=r.getElementsByTagName("head")[0]}try{a.setDate(a.getDate()+36500),o.addBehavior("#default#userData"),o.expires=a.toUTCString(),o.load(u),o.save(u)}catch(n){return}var f,l;try{f=o.XMLDocument.documentElement,l=f.attributes}catch(n){return}var c="p__hack_",h="m-_-c",p=new RegExp("^"+c),d=new RegExp(h,"g"),v=function(e){return encodeURIComponent(c+e).replace(/%/g,h)},m=function(e){return decodeURIComponent(e.replace(d,"%")).replace(p,"")};t={length:l.length,isVirtualObject:!0,getItem:function(e){return(l.getNamedItem(v(e))||{nodeValue:null}).nodeValue||f.getAttribute(v(e))},setItem:function(e,t){try{f.setAttribute(v(e),t),o.save(u),this.length=l.length}catch(n){}},removeItem:function(e){try{f.removeAttribute(v(e)),o.save(u),this.length=l.length}catch(t){}},clear:function(){for(;l.length;)this.removeItem(l[0].nodeName);this.length=0},key:function(e){return l[e]?m(l[e].nodeName):void 0}},"localStorage"in e||(e.localStorage=t)}else try{t=e.localStorage}catch(n){t=null}}(),e.LS=t?{set:function(e,n){void 0!==this.get(e)&&this.remove(e),t.setItem(e,n),this.length=t.length},get:function(e){var n=t.getItem(e);return null===n?void 0:n},remove:function(e){t.removeItem(e),this.length=t.length},clear:function(){t.clear(),this.length=0},each:function(e){var t,n=this.obj(),r=e||function(){};for(t in n)if(r.call(this,t,this.get(t))===!1)break},obj:function(){var e,n,r={},i=0;if(t.isVirtualObject)r=t.key(-1);else for(e=t.length;e>i;i++)n=t.key(i),r[n]=this.get(n);return r},length:t.length}:i,e.jQuery&&(e.jQuery.LS=e.LS)}(window)},function(e,t){"use strict";function n(e){var t=$.Deferred();return PDR.ajax("/ajax_mget_uconfig",{data:e,dataType:"json"}).done(function(e){e&&0==e.errno&&e.data?t.resolve(e.data):t.resolve(null)}).fail(function(){t.resolve(null)}),t.promise()}function r(e){var t=$.Deferred();return PDR.ajax("/ajax_set_uconfig",{data:e,dataType:"json"}).done(function(e){e&&0==e.errno&&e.data?t.resolve(e.data):t.reject(null)}).fail(function(){t.reject(null)}),t.promise()}e.exports={getUserSetting:n,saveUserSetting:r}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){function n(e){s=$("."+e.ulList||"video-list"),u=e.maxWidth||u,a=e.minWidth||a,o=e.maxNum||o,$(window).resize(r),r()}function r(){if(s){var e,t=s.width(),n=Math.min(Math.max(Math.ceil(t/u),1),o),r=f*n,h=Math.max(Math.min(Math.floor((t-r)/n),u),a),p=(h-l)*c;e={num:n,liWidth:h,imgHeight:p},i(e)}}function i(e){var t=".video-list-item { width:"+e.liWidth+"px !important; } .video-list-item .video-img { height:"+e.imgHeight+"px !important; }",n=$(".playing-container").children(".video-list");if(n.length>0){var r=e.imgHeight+h;n.children().length>e.num,t+=" .playing-container .video-list { height:"+r+"px; }"}p.html("<style>"+t+"</style>")}var s,o=5,u=320,a=170,f=15,l=0,c=.5625,h=70,p=$('<div style="display:none;"></div>');$(function(){$("body").append(p)}),
e.exports.initialize=n,e.exports.refresh=r},function(e,t){"use strict";function n(e){return"[object Function]"===Object.prototype.toString.call(e)}function r(){return h}function i(){return p}function s(){return d}function o(e){d=parseInt(e,10),v=Math.ceil(d/p)}function u(){return g}function a(e,t,r){g||(g=!0,1>e&&(e=1),null!==d&&d>0&&e>v&&(e=v),$.ajax({url:y&&n(y)?y():y,method:"GET",data:$.extend({pageno:e,pagenum:p},b&&n(b)?b():b),dataType:"json"}).done(function(n){h=e,t&&t(n&&n.data||{})}).fail(function(){r&&r()}).always(function(){g=!1}))}function f(e,t){a(h-1,e,t)}function l(e,t){a(h+1,e,t)}function c(e){y=e.api,h=e.currentPage||h,p=e.pagenum||p,d=e.total||d,b=e.ajaxData||b,m=e.errorCode||m}var h=1,p=120,d=null,v=null,m={EMPTY:1,SYSTEM:2},g=!1,y="",b={};e.exports={initialize:c,loadPage:a,prev:f,next:l,getCurrent:r,getPageNum:i,getTotal:s,setTotal:o,isLoading:u}},function(e,t,n){var r=n(10);e.exports=(r["default"]||r).template({1:function(e,t,n,r,i,s){var o,u=this.lambda,a=this.escapeExpression;return'  <li class="video-list-item '+(null!=(o=t["if"].call(e,null!=s[1]?s[1].hideTag:s[1],{name:"if",hash:{},fn:this.program(2,r,0,i,s),inverse:this.noop,data:r}))?o:"")+" "+(null!=(o=t["if"].call(e,null!=s[1]?s[1].hideCate:s[1],{name:"if",hash:{},fn:this.program(4,r,0,i,s),inverse:this.noop,data:r}))?o:"")+'" data-id="'+a(u(null!=e?e.id:e,e))+'">\r\n    <a href="/'+a(u(null!=e?e.id:e,e))+'" class="video-list-item-wrap" data-id="'+a(u(null!=e?e.id:e,e))+'">\r\n'+(null!=(o=t.unless.call(e,null!=s[1]?s[1].hideTag:s[1],{name:"unless",hash:{},fn:this.program(6,r,0,i,s),inverse:this.noop,data:r}))?o:"")+'      <div class="video-cover">\r\n        <img class="video-img video-img-lazy" data-original="'+a(u(null!=(o=null!=e?e.pictures:e)?o.img:o,e))+'" alt="'+a(u(null!=e?e.name:e,e))+'">\r\n        <div class="video-overlay"></div>\r\n        <div class="video-play"></div>\r\n      </div>\r\n      <div class="video-title" title="'+a(u(null!=e?e.name:e,e))+'">'+a(u(null!=e?e.name:e,e))+'</div>\r\n      <div class="video-info">\r\n        <span class="video-nickname">'+a(u(null!=(o=null!=e?e.userinfo:e)?o.nickName:o,e))+'</span>\r\n        <span class="video-number">'+a(u(null!=e?e.person_num:e,e))+"</span>\r\n"+(null!=(o=t.unless.call(e,null!=s[1]?s[1].hideCate:s[1],{name:"unless",hash:{},fn:this.program(11,r,0,i,s),inverse:this.noop,data:r}))?o:"")+"      </div>\r\n    </a>\r\n  </li>\r\n"},2:function(e,t,n,r){return"video-no-tag"},4:function(e,t,n,r){return"video-no-cate"},6:function(e,t,r,i){var s;return(null!=(s=n(24).call(e,null!=e?e.status:e,"==",2,{name:"ifcond",hash:{},fn:this.program(7,i,0),inverse:this.noop,data:i}))?s:"")+(null!=(s=n(24).call(e,null!=e?e.status:e,"==",3,{name:"ifcond",hash:{},fn:this.program(9,i,0),inverse:this.noop,data:i}))?s:"")},7:function(e,t,n,r){return'          <span class="video-tag video-tag-online">\u76f4\u64ad</span>\r\n'},9:function(e,t,n,r){return'          <span class="video-tag video-tag-rest">\u4f11\u606f</span>\r\n'},11:function(e,t,n,r){var i;return'          <span class="video-cate">'+this.escapeExpression(this.lambda(null!=(i=null!=e?e.classification:e)?i.cname:i,e))+"</span>\r\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,r,i,s){var o;return null!=(o=t.each.call(e,null!=e?e.items:e,{name:"each",hash:{},fn:this.program(1,r,0,i,s),inverse:this.noop,data:r}))?o:""},useData:!0,useDepths:!0})},function(e,t,n){"use strict";function r(e,t){return h=$(e),p=h.find(".sidebar-container"),d=t||{},$.when(m.selfInfoInterface.getSelfInfo()).done(i).done(s).done(o).fail(u)}function i(e){var t=[],n=$.extend({},d,{userinfo:e});return t.push(g.init(p.find(".sidebar-expand .sidebar-head"),$.extend({},n))),t.push(y.init(p.find(".sidebar-expand .sidebar-content"),$.extend({},n))),t.push(b.init(p.find(".sidebar-expand .sidebar-foot"),$.extend({},n))),t.push(w.init(p.find(".sidebar-collapse"),$.extend({},n))),$.when.apply($,t)}function s(){p.on("click",".sidebar-state-toggle-btn",a),$(window).on("resize",c)}function o(){h.data("initialized",!0),p.fadeIn(200),v.triggerEvent("sidebar-init")}function u(){console.log("sidebar\u521d\u59cb\u5316\u5931\u8d25\uff01")}function a(){p.hasClass("sidebar-collapsed")?l():f()}function f(){p.addClass("sidebar-collapsed"),w.updateScroller(),v.triggerEvent("sidebar-collapsed")}function l(){p.removeClass("sidebar-collapsed"),y.updateScroller(),v.triggerEvent("sidebar-expanded")}function c(){v.triggerEvent("sidebar-scroller-need-update")}n(49)(window.jQuery),n(21);var h,p,d,v=n(2),m=n(72),g=n(195),y=n(197),b=n(213),w=n(222);e.exports={init:r,expand:l,collapse:f}},function(e,t,n){"use strict";function r(e,t){i=$(e),i.html(o()),s.init(i.find(".sidebar-search"))}var i,s=n(27),o=n(196);e.exports={init:r}},function(e,t,n){var r=n(10);e.exports=(r["default"]||r).template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,r){return'<div class="sidebar-logo">\r\n  <a href="/" target="_top">\r\n    <img src="http://i7.pdim.gs/8f40398337db212845d4884b68cc7e8d.png" alt="logo" />\r\n  </a>\r\n</div>\r\n<div class="sidebar-search"></div>'},useData:!0})},function(e,t,n){"use strict";function r(e,t){f=$(e),c=t||{},l=f.find(".sidebar-category .sidebar-icon-sort-cate");var n=[];return n.push(p.init(f.find(".sidebar-userinfo"),$.extend({},c))),c.hideCateSort||(l.show(),d.init(f.find(".sidebar-category .sidebar-site-category"),$.extend({},{cateSortToggle:l,adjustPosBias:50,beforeRenderUserOrder:function(e){var e=e.split(","),t=$.inArray("nvshen",e);return t>-1&&e.splice(t,1),e.unshift("nvshen"),e.join(",")}},c))),$.when.apply($,n).then(s).then(i)}function i(){h.on("sidebar-scroller-need-update",o),c.hideCateSort||(h.on("catesort-change-normalstate",u),h.on("catesort-change-sortstate",a))}function s(){f.perfectScrollbar({suppressScrollX:!1})}function o(){f.perfectScrollbar("update")}function u(){f.find(".sidebar-category .sidebar-list-head-tit").html("\u7cbe\u5f69\u5206\u7c7b"),l.removeClass("sidebar-icon-sort-cate-hover"),v=!1,o()}function a(){f.find(".sidebar-category .sidebar-list-head-tit").html("\u62d6\u62fd\u5206\u7c7b\u6539\u53d8\u987a\u5e8f"),l.addClass("sidebar-icon-sort-cate-hover"),v=!0,o()}var f,l,c,h=n(2),p=n(198),d=n(210),v=!1;e.exports={init:r,updateScroller:o}},function(e,t,n){"use strict";function r(e,t){return l=$(e),c=t||{},$.when(i()).then(s).then(o)}function i(){var e=c.userinfo;return e.identity&&e.identity>=p.identity.ROOM_MANAGER&&(e.isManager=!0),e&&e.rid>0?h.selfInfoInterface.getMessageNum().then(function(t){e.newMessageNum=t,e.messageUrl="http:"+["/","/"].join("")+"message.panda.tv",l.html(b(e))}):void l.html(w())}function s(){if(c.userinfo&&c.userinfo.rid>0){var e=[];return e.push(v.init(l.find(".level-container"),$.extend({},c))),e.push(m.init(l.find(".sidebar-userinfo-bamboo"),$.extend({},c))),e.push(g.init(l.find(".sidebar-userinfo-maobi"),$.extend({},c))),y.init(l,$.extend({},c)),$.when.apply($,e)}}function o(){c.userinfo&&c.userinfo.rid>0?l.on("click",".sidebar-userinfo-loginout-btn",f):(l.on("click",".sidebar-userinfo-login-btn",u),l.on("click",".sidebar-userinfo-register-btn",a))}function u(e){e.preventDefault(),d.login()}function a(e){e.preventDefault(),d.regist()}function f(e){e.preventDefault(),d.logout().then(function(){try{window.top.location.reload()}catch(e){window.top.location.href=window.top.location.href}})}var l,c,h=(n(2),n(72)),p=n(101),d=n(28),v=n(202),m=n(199),g=n(204),y=n(206),b=n(208),w=n(209);e.exports={init:r}},function(e,t,n){"use strict";function r(e,t){return h=$(e),p=t||{},$.when(i()).then(s)}function i(){var e=p.userinfo;h.append(v(e)),c=h.find(".sidebar-userinfo-bamboo-num")}function s(){d.on("user-bamboo-changed",o)}function o(e){var t=e.newValue;t!=c.html()&&u(t)}function u(e){var t=+$.trim(c.html())||0,n=e;a(n),n>t&&f(n-t)}function a(e){var t=c.html();c.html(e),d.triggerEvent("user-bamboo-updated",{oldValue:t,newValue:e})}function f(e){var t=l(e);t.css({top:-14,left:18,opacity:1}).delay(200).animate({top:-28,opacity:.3},function(){t.remove()})}function l(e){var t=$(m({num:e})).appendTo(h);return t}var c,h,p,d=n(2),v=(n(72),n(200)),m=n(201);e.exports={init:r}},function(e,t,n){var r=n(10);e.exports=(r["default"]||r).template({1:function(e,t,n,r){var i;return this.escapeExpression((i=null!=(i=t.bamboos||(null!=e?e.bamboos:e))?i:t.helperMissing,"function"==typeof i?i.call(e,{name:"bamboos",hash:{},data:r}):i))},3:function(e,t,n,r){return"0"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,r){var i;return'<i class="sidebar-icon sidebar-icon-bamboo"></i>\r\n<span class="sidebar-userinfo-bamboo-num">'+(null!=(i=t["if"].call(e,null!=e?e.bamboos:e,{name:"if",hash:{},fn:this.program(1,r,0),inverse:this.program(3,r,0),data:r}))?i:"")+"</span>"},useData:!0})},function(e,t,n){var r=n(10);e.exports=(r["default"]||r).template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,r){var i;return'<span class="sidebar-userinfo-bamboo-update-num">+'+this.escapeExpression((i=null!=(i=t.num||(null!=e?e.num:e))?i:t.helperMissing,"function"==typeof i?i.call(e,{name:"num",hash:{},data:r}):i))+"</span>"},useData:!0})},function(e,t,n){"use strict";function r(e,t){return l=$(e),c=t||{},$.when(i())}function i(){c.userinfo,p.selfInfoInterface.getExp().then(u).then(s)}function s(){h.on("user-exp-changed",o)}function o(e){u(e.newValue)}function u(e){l.html(d({width:a(e.exp,e.max_exp_in_level),level:e.level,text:f(e.upgrade_level_need_exp,e.max_exp_in_level)}))}function a(e,t){return t>=v?"100%":(e/t*100>>0)+"%"}function f(e,t){if(t>=v)return"MAX";if(!e)return"";var n="\u5347\u7ea7\u9700 ";return n+=e>=1e8?String((Math.ceil(e/1e6)/100).toFixed(2)).replace(/\.?0+$/,"")+"\u4ebf \u7ecf\u9a8c":e>=1e4?String((Math.ceil(e/100)/100).toFixed(2)).replace(/\.?0+$/,"")+"\u4e07 \u7ecf\u9a8c":e+" \u7ecf\u9a8c"}var l,c,h=n(2),p=n(72),d=n(203),v=92233720368540;e.exports={init:r}},function(e,t,n){var r=n(10);e.exports=(r["default"]||r).template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,r){var i,s=t.helperMissing,o="function",u=this.escapeExpression;return'<i class="icon-level icon-level-'+u((i=null!=(i=t.level||(null!=e?e.level:e))?i:s,typeof i===o?i.call(e,{name:"level",hash:{},data:r}):i))+'" data-level="'+u((i=null!=(i=t.level||(null!=e?e.level:e))?i:s,typeof i===o?i.call(e,{name:"level",hash:{},data:r}):i))+'"></i>\r\n<div class="exp-bar-background" data-tips="\u9001\u7ed9\u4e3b\u64ad\u793c\u7269\u589e\u52a0\u7ecf\u9a8c\u503c\u54e6~">\r\n  <div class="exp-bar" style="width:'+u((i=null!=(i=t.width||(null!=e?e.width:e))?i:s,typeof i===o?i.call(e,{name:"width",hash:{},data:r}):i))+'"></div>\r\n  <div class="exp-text">'+u((i=null!=(i=t.text||(null!=e?e.text:e))?i:s,typeof i===o?i.call(e,{name:"text",hash:{},data:r}):i))+"</div>\r\n</div>"},useData:!0})},function(e,t,n){"use strict";function r(e,t){a=$(e),a.append(h({payUrl:"https://pay.panda.tv/"})),f=a.find(".sidebar-userinfo-maobi-num"),c.selfInfoInterface.getMaobi().then(o).then(i)}function i(){l.on("user-maobi-changed",s)}function s(e){o(e.newValue)}function o(e){e!=f.html()&&u(e)}function u(e){f.html(e)}var a,f,l=n(2),c=n(72),h=n(205);e.exports={init:r}},function(e,t,n){var r=n(10);e.exports=(r["default"]||r).template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,r){var i;return'<i class="sidebar-icon sidebar-icon-maobi"></i>\r\n<span class="sidebar-userinfo-maobi-num">0</span>\r\n<a class="sidebar-userinfo-pay-btn" href="'+this.escapeExpression((i=null!=(i=t.payUrl||(null!=e?e.payUrl:e))?i:t.helperMissing,"function"==typeof i?i.call(e,{name:"payUrl",hash:{},data:r}):i))+'" target="_blank">\u5145\u503c</a>'},useData:!0})},function(e,t,n){"use strict";function r(e,t){u=$(e),a.on("user-info-updated",i)}function i(e){e.identity>=f.identity.ROOM_MANAGER?s():o()}function s(){u.find(".sidebar-userinfo-manageroom").length||u.find(".sidebar-list").append($(l()))}function o(){u.find(".sidebar-userinfo-manageroom").length&&u.find(".sidebar-userinfo-manageroom").remove()}var u,a=n(2),f=n(101),l=n(207);e.exports={init:r}},function(e,t,n){var r=n(10);e.exports=(r["default"]||r).template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,r){return'<li class="sidebar-userinfo-manageroom">\r\n    <a href="/manageroom" target="_top"><i class="sidebar-icon sidebar-icon-manage-room"></i>\u623f\u95f4\u7ba1\u7406</a>\r\n</li>'},useData:!0})},function(e,t,n){var r=n(10);e.exports=(r["default"]||r).template({1:function(e,t,n,r){return this.escapeExpression(this.lambda(null!=e?e.nickName:e,e))},3:function(e,t,n,r){return"PandaTV"},5:function(e,t,n,r){return'<span id="user-new-message-num" class="user-new-message-num">'+this.escapeExpression(this.lambda(null!=e?e.newMessageNum:e,e))+"</span>"},7:function(e,t,n,r){return'  <li>\r\n    <a href="/'+this.escapeExpression(this.lambda(null!=e?e.roomId:e,e))+'" target="_top"><i class="sidebar-icon sidebar-icon-myroom"></i>\u6211\u7684\u76f4\u64ad\u95f4</a>\r\n  </li>\r\n'},9:function(e,t,n,r){var i=this.lambda,s=this.escapeExpression;return'  <li>\r\n    <a href="/setting?roomid='+s(i(null!=e?e.roomId:e,e))+'" target="_top"><i class="sidebar-icon sidebar-icon-setting"></i>\u76f4\u64ad\u8bbe\u7f6e</a>\r\n  </li>\r\n  <li>\r\n      <a href="/timestat?roomid='+s(i(null!=e?e.roomId:e,e))+'" target="_top"><i class="sidebar-icon sidebar-icon-time-stat"></i>\u76f4\u64ad\u65f6\u957f</a>\r\n  </li>\r\n  <li>\r\n      <a href="/bamboostat?roomid='+s(i(null!=e?e.roomId:e,e))+'" target="_top"><i class="sidebar-icon sidebar-icon-bamboo-stat"></i>\u6536\u76ca\u7edf\u8ba1</a>\r\n  </li>\r\n'},11:function(e,t,n,r){return'  <li class="sidebar-userinfo-apply-for-host">\r\n      <a href="/application" target="_top"><i class="sidebar-icon sidebar-icon-live"></i>\u6211\u8981\u5f53\u4e3b\u64ad</a>\r\n  </li>\r\n'},13:function(e,t,n,r){return'  <li class="sidebar-userinfo-manageroom">\r\n      <a href="/manageroom" target="_top"><i class="sidebar-icon sidebar-icon-manage-room"></i>\u623f\u95f4\u7ba1\u7406</a>\r\n  </li>\r\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,r,i){var s,o=this.lambda,u=this.escapeExpression;return'<div class="sidebar-userinfo-selfinfo clearfix">\r\n  <a href="/personal" target="_top" class="sidebar-userinfo-avatar" title="'+u(o(null!=e?e.nickName:e,e))+'"><img src="'+u(n(25).call(e,null!=e?e.avatar:e,{name:"convertAvatar",hash:{},data:i}))+'"></a>\r\n  <div class="sidebar-userinfo-detail">\r\n    <a href="/personal" target="_top" class="sidebar-userinfo-username" title="'+u(o(null!=e?e.nickName:e,e))+'" data-rid="'+u(o(null!=e?e.rid:e,e))+'">'+(null!=(s=t["if"].call(e,null!=e?e.nickName:e,{name:"if",hash:{},fn:this.program(1,i,0),inverse:this.program(3,i,0),data:i}))?s:"")+'</a>\r\n    <a class="sidebar-userinfo-loginout sidebar-userinfo-loginout-btn" href="javascript:;">\u9000\u51fa</a>\r\n    <div class="level-container"></div>\r\n  </div>\r\n</div>\r\n<div class="sidebar-split-line"></div>\r\n<div class="sidebar-userinfo-account">\r\n  <div class="sidebar-userinfo-bamboo"></div>\r\n  <div class="sidebar-userinfo-maobi"></div>\r\n</div>\r\n<div class="sidebar-userinfo-quick-nav clearfix">\r\n  <a class="sidebar-userinfo-quick-nav-item" href="/myfollow" target="_top">\u5173\u6ce8<i class="sidebar-userinfo-quick-nav-split"></i></a>\r\n  <a class="sidebar-userinfo-quick-nav-item" href="/watchhistory" target="_top">\u5386\u53f2<i class="sidebar-userinfo-quick-nav-split"></i></a>\r\n  <a class="sidebar-userinfo-quick-nav-item sidebar-userinfo-quick-nav-usermessage" href="'+u(o(null!=e?e.messageUrl:e,e))+'" target="_top">\u6d88\u606f'+(null!=(s=n(24).call(e,null!=e?e.newMessageNum:e,">",0,{name:"ifcond",hash:{},fn:this.program(5,i,0),inverse:this.noop,data:i}))?s:"")+'</a>\r\n</div>\r\n<ul class="sidebar-list sidebar-list-1">\r\n'+(null!=(s=t["if"].call(e,null!=e?e.roomId:e,{name:"if",hash:{},fn:this.program(7,i,0),inverse:this.noop,data:i}))?s:"")+(null!=(s=t["if"].call(e,null!=e?e.isHost:e,{name:"if",hash:{},fn:this.program(9,i,0),inverse:this.program(11,i,0),data:i}))?s:"")+'  <li>\r\n    <a href="/giftconsume" target="_top"><i class="sidebar-icon sidebar-icon-gift-consume"></i>\u6d88\u8d39\u8bb0\u5f55</a>\r\n  </li>\r\n'+(null!=(s=t["if"].call(e,null!=e?e.isManager:e,{name:"if",hash:{},fn:this.program(13,i,0),inverse:this.noop,data:i}))?s:"")+"</ul>\r\n"},useData:!0})},function(e,t,n){var r=n(10);e.exports=(r["default"]||r).template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,r){return'<div class="sidebar-userinfo-login-panel">\r\n  <div class="sidebar-login-btns">\r\n    <a href="javascript:;" class="sidebar-login-btn sidebar-userinfo-login-btn">\u767b\u5f55</a>\r\n    <a href="javascript:;" class="sidebar-register-btn sidebar-userinfo-register-btn">\u6ce8\u518c</a>\r\n  </div>\r\n  <p class="sidebar-login-banner">\u767b\u5f55\u548c\u5c0f\u4f19\u4f34\u4e00\u8d77\u804a\u804a\u5427</p>\r\n</div>'},useData:!0})},function(e,t,n){"use strict";function r(e,t){return b=$(e),w=t||{},E=b.find(".sidebar-list"),S=$(w.cateSortToggle),y=w.adjustPosBias||0,$.when(T.selfInfoInterface.getSelfInfo(),C.init([L])).then(i).then(s).then(o)}function i(e,t){return e&&e.rid>0&&(m=c(),E.css("visibility","hidden"),t&&("function"==$.type(w.beforeRenderUserOrder)&&(t[L]=w.beforeRenderUserOrder(t[L])),h(t[L])),E.css("visibility","visible"),b.append(k())),e}function s(e){return e&&e.rid>0&&E.sortable({items:".sidebar-site-category-item",placeholder:"ui-state-highlight",tolerance:"pointer"}).sortable("disable"),e}function o(e){e&&e.rid>0?(S.on("click",u),b.on("click",".sidebar-drag-pop-btn-cancel",a),b.on("click",".sidebar-drag-pop-btn-save",f),b.on("click",".sidebar-drag-pop-btn-set-default",l)):S.click(function(){N.login()})}function u(){S.hasClass("sidebar-icon-sort-cate-hover")?(a(),p()):d()}function a(){h(g),p()}function f(){var e=c();g!=e&&(g=e,C.set(L,g,!0)),p()}function l(){g!=m&&(g=m,h(m),C.set(L,g,!0)),p()}function c(){return b.find("li[data-ename]").map(function(e,t){return $(this).attr("data-ename")}).toArray().join(",")}function h(e){e&&$.each(e.split(","),function(e,t){E.find("li").eq(e).before(E.find("li[data-ename="+t+"]"))}),g=c()}function p(){b.find("a").off("click"),b.removeClass("sidebar-site-category-sort-enable"),E.sortable("disable"),x.triggerEvent("catesort-change-normalstate")}function d(){b.find("a").on("click",function(e){e.preventDefault()}),b.addClass("sidebar-site-category-sort-enable"),E.sortable("enable"),v(),x.triggerEvent("catesort-change-sortstate")}function v(){var e=$(".sidebar-content"),t=e.scrollTop();e.scrollTop(t+b.offset().top+b.height()+y-$(window).height())}n(211);var m,g,y,b,w,E,S,x=n(2),T=n(72),N=n(28),C=n(115),k=n(212),L="cate_sort";e.exports={init:r}},function(e,t){!function(e){e(jQuery)}(function(e){function t(t,r){var i,s,o,u=t.nodeName.toLowerCase();return"area"===u?(i=t.parentNode,s=i.name,t.href&&s&&"map"===i.nodeName.toLowerCase()?(o=e("img[usemap='#"+s+"']")[0],!!o&&n(o)):!1):(/^(input|select|textarea|button|object)$/.test(u)?!t.disabled:"a"===u?t.href||r:r)&&n(t)}function n(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}e.ui=e.ui||{},e.extend(e.ui,{version:"1.11.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({scrollParent:function(t){var n=this.css("position"),r="absolute"===n,i=t?/(auto|scroll|hidden)/:/(auto|scroll)/,s=this.parents().filter(function(){var t=e(this);return r&&"static"===t.css("position")?!1:i.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return"fixed"!==n&&s.length?s:e(this[0].ownerDocument||document)},uniqueId:function(){var e=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,r){return!!e.data(t,r[3])},focusable:function(n){return t(n,!isNaN(e.attr(n,"tabindex")))},tabbable:function(n){var r=e.attr(n,"tabindex"),i=isNaN(r);return(i||r>=0)&&t(n,!i)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(t,n){function r(t,n,r,s){return e.each(i,function(){n-=parseFloat(e.css(t,"padding"+this))||0,r&&(n-=parseFloat(e.css(t,"border"+this+"Width"))||0),s&&(n-=parseFloat(e.css(t,"margin"+this))||0)}),n}var i="Width"===n?["Left","Right"]:["Top","Bottom"],s=n.toLowerCase(),o={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+n]=function(t){return void 0===t?o["inner"+n].call(this):this.each(function(){e(this).css(s,r(this,t)+"px")})},e.fn["outer"+n]=function(t,i){return"number"!=typeof t?o["outer"+n].call(this,t):this.each(function(){e(this).css(s,r(this,t,!0,i)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(n){return arguments.length?t.call(this,e.camelCase(n)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.fn.extend({focus:function(t){return function(n,r){return"number"==typeof n?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),r&&r.call(t)},n)}):t.apply(this,arguments)}}(e.fn.focus),disableSelection:function(){var e="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(e+".ui-disableSelection",function(e){e.preventDefault()})}}(),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(t){if(void 0!==t)return this.css("zIndex",t);if(this.length)for(var n,r,i=e(this[0]);i.length&&i[0]!==document;){if(n=i.css("position"),("absolute"===n||"relative"===n||"fixed"===n)&&(r=parseInt(i.css("zIndex"),10),!isNaN(r)&&0!==r))return r;i=i.parent()}return 0}}),e.ui.plugin={add:function(t,n,r){var i,s=e.ui[t].prototype;for(i in r)s.plugins[i]=s.plugins[i]||[],s.plugins[i].push([n,r[i]])},call:function(e,t,n,r){var i,s=e.plugins[t];if(s&&(r||e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType))for(i=0;i<s.length;i++)e.options[s[i][0]]&&s[i][1].apply(e.element,n)}};var r=0,i=Array.prototype.slice;e.cleanData=function(t){return function(n){var r,i,s;for(s=0;null!=(i=n[s]);s++)try{r=e._data(i,"events"),r&&r.remove&&e(i).triggerHandler("remove")}catch(o){}t(n)}}(e.cleanData),e.widget=function(t,n,r){var i,s,o,u,a={},f=t.split(".")[0];return t=t.split(".")[1],i=f+"-"+t,r||(r=n,n=e.Widget),e.expr[":"][i.toLowerCase()]=function(t){return!!e.data(t,i)},e[f]=e[f]||{},s=e[f][t],o=e[f][t]=function(e,t){return this._createWidget?void (arguments.length&&this._createWidget(e,t)):new o(e,t)},e.extend(o,s,{version:r.version,_proto:e.extend({},r),_childConstructors:[]}),u=new n,u.options=e.widget.extend({},u.options),e.each(r,function(t,r){return e.isFunction(r)?void (a[t]=function(){var e=function(){return n.prototype[t].apply(this,arguments)},i=function(e){return n.prototype[t].apply(this,e)};return function(){var t,n=this._super,s=this._superApply;return this._super=e,this._superApply=i,t=r.apply(this,arguments),this._super=n,this._superApply=s,t}}()):void (a[t]=r)}),o.prototype=e.widget.extend(u,{widgetEventPrefix:s?u.widgetEventPrefix||t:t},a,{constructor:o,namespace:f,widgetName:t,widgetFullName:i}),s?(e.each(s._childConstructors,function(t,n){var r=n.prototype;e.widget(r.namespace+"."+r.widgetName,o,n._proto)}),delete s._childConstructors):n._childConstructors.push(o),e.widget.bridge(t,o),o},e.widget.extend=function(t){for(var n,r,s=i.call(arguments,1),o=0,u=s.length;u>o;o++)for(n in s[o])r=s[o][n],s[o].hasOwnProperty(n)&&void 0!==r&&(e.isPlainObject(r)?t[n]=e.isPlainObject(t[n])?e.widget.extend({},t[n],r):e.widget.extend({},r):t[n]=r);return t},e.widget.bridge=function(t,n){var r=n.prototype.widgetFullName||t;e.fn[t]=function(s){var o="string"==typeof s,u=i.call(arguments,1),a=this;return o?this.each(function(){var n,i=e.data(this,r);return"instance"===s?(a=i,!1):i?e.isFunction(i[s])&&"_"!==s.charAt(0)?(n=i[s].apply(i,u),n!==i&&void 0!==n?(a=n&&n.jquery?a.pushStack(n.get()):n,!1):void 0):e.error("no such method '"+s+"' for "+t+" widget instance"):e.error("cannot call methods on "+t+" prior to initialization; attempted to call method '"+s+"'")}):(u.length&&(s=e.widget.extend.apply(null,[s].concat(u))),this.each(function(){var t=e.data(this,r);t?(t.option(s||{}),t._init&&t._init()):e.data(this,r,new n(s,this))})),a}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,n){n=e(n||this.defaultElement||this)[0],this.element=e(n),this.uuid=r++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=e(),this.hoverable=e(),this.focusable=e(),n!==this&&(e.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===n&&this.destroy()}}),this.document=e(n.style?n.ownerDocument:n.document||n),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(t,n){var r,i,s,o=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(o={},r=t.split("."),t=r.shift(),r.length){for(i=o[t]=e.widget.extend({},this.options[t]),s=0;s<r.length-1;s++)i[r[s]]=i[r[s]]||{},i=i[r[s]];if(t=r.pop(),1===arguments.length)return void 0===i[t]?null:i[t];i[t]=n}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];o[t]=n}return this._setOptions(o),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!t),t&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(t,n,r){var i,s=this;"boolean"!=typeof t&&(r=n,n=t,t=!1),r?(n=i=e(n),this.bindings=this.bindings.add(n)):(r=n,n=this.element,i=this.widget()),e.each(r,function(r,u){function a(){return t||s.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof u?s[u]:u).apply(s,arguments):void 0}"string"!=typeof u&&(a.guid=u.guid=u.guid||a.guid||e.guid++);var f=r.match(/^([\w:-]*)\s*(.*)$/),l=f[1]+s.eventNamespace,c=f[2];c?i.delegate(c,l,a):n.bind(l,a)})},_off:function(t,n){n=(n||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(n).undelegate(n),this.bindings=e(this.bindings.not(t).get()),this.focusable=e(this.focusable.not(t).get()),this.hoverable=e(this.hoverable.not(t).get())},_delay:function(e,t){function n(){return("string"==typeof e?r[e]:e).apply(r,arguments)}var r=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,n,r){var i,s,o=this.options[t];if(r=r||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],s=n.originalEvent)for(i in s)i in n||(n[i]=s[i]);return this.element.trigger(n,r),!(e.isFunction(o)&&o.apply(this.element[0],[n].concat(r))===!1||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(r,i,s){"string"==typeof i&&(i={effect:i});var o,u=i?i===!0||"number"==typeof i?n:i.effect||n:t;i=i||{},"number"==typeof i&&(i={duration:i}),o=!e.isEmptyObject(i),i.complete=s,i.delay&&r.delay(i.delay),o&&e.effects&&e.effects.effect[u]?r[t](i):u!==t&&r[u]?r[u](i.duration,i.easing,s):r.queue(function(n){e(this)[t](),s&&s.call(r[0]),n()})}});var s=(e.widget,!1);e(document).mouseup(function(){s=!1}),e.widget("ui.mouse",{version:"1.11.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(n){return!0===e.data(n.target,t.widgetName+".preventClickEvent")?(e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(!s){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var n=this,r=1===t.which,i="string"==typeof this.options.cancel&&t.target.nodeName?e(t.target).closest(this.options.cancel).length:!1;return r&&!i&&this._mouseCapture(t)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){n.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(t)!==!1,!this._mouseStarted)?(t.preventDefault(),!0):(!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return n._mouseMove(e)},this._mouseUpDelegate=function(e){return n._mouseUp(e)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),s=!0,!0)):!0}},_mouseMove:function(t){if(this._mouseMoved){if(e.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button)return this._mouseUp(t);if(!t.which)return this._mouseUp(t)}return(t.which||t.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),s=!1,!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),e.widget("ui.sortable",e.ui.mouse,{version:"1.11.4",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(e,t,n){return e>=t&&t+n>e},_isFloating:function(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))},_create:function(){this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(e,t){this._super(e,t),"handle"===e&&this._setHandleClassName()},_setHandleClassName:function(){this.element.find(".ui-sortable-handle"
).removeClass("ui-sortable-handle"),e.each(this.items,function(){(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item).addClass("ui-sortable-handle")})},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").find(".ui-sortable-handle").removeClass("ui-sortable-handle"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(t,n){var r=null,i=!1,s=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(t),e(t.target).parents().each(function(){return e.data(this,s.widgetName+"-item")===s?(r=e(this),!1):void 0}),e.data(t.target,s.widgetName+"-item")===s&&(r=e(t.target)),r&&(!this.options.handle||n||(e(this.options.handle,r).find("*").addBack().each(function(){this===t.target&&(i=!0)}),i))?(this.currentItem=r,this._removeCurrentsFromItems(),!0):!1)},_mouseStart:function(t,n,r){var i,s,o=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),o.containment&&this._setContainment(),o.cursor&&"auto"!==o.cursor&&(s=this.document.find("body"),this.storedCursor=s.css("cursor"),s.css("cursor",o.cursor),this.storedStylesheet=e("<style>*{ cursor: "+o.cursor+" !important; }</style>").appendTo(s)),o.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",o.opacity)),o.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",o.zIndex)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!r)for(i=this.containers.length-1;i>=0;i--)this.containers[i]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var n,r,i,s,o=this.options,u=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<o.scrollSensitivity?this.scrollParent[0].scrollTop=u=this.scrollParent[0].scrollTop+o.scrollSpeed:t.pageY-this.overflowOffset.top<o.scrollSensitivity&&(this.scrollParent[0].scrollTop=u=this.scrollParent[0].scrollTop-o.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<o.scrollSensitivity?this.scrollParent[0].scrollLeft=u=this.scrollParent[0].scrollLeft+o.scrollSpeed:t.pageX-this.overflowOffset.left<o.scrollSensitivity&&(this.scrollParent[0].scrollLeft=u=this.scrollParent[0].scrollLeft-o.scrollSpeed)):(t.pageY-this.document.scrollTop()<o.scrollSensitivity?u=this.document.scrollTop(this.document.scrollTop()-o.scrollSpeed):this.window.height()-(t.pageY-this.document.scrollTop())<o.scrollSensitivity&&(u=this.document.scrollTop(this.document.scrollTop()+o.scrollSpeed)),t.pageX-this.document.scrollLeft()<o.scrollSensitivity?u=this.document.scrollLeft(this.document.scrollLeft()-o.scrollSpeed):this.window.width()-(t.pageX-this.document.scrollLeft())<o.scrollSensitivity&&(u=this.document.scrollLeft(this.document.scrollLeft()+o.scrollSpeed))),u!==!1&&e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),n=this.items.length-1;n>=0;n--)if(r=this.items[n],i=r.item[0],s=this._intersectsWithPointer(r),s&&r.instance===this.currentContainer&&i!==this.currentItem[0]&&this.placeholder[1===s?"next":"prev"]()[0]!==i&&!e.contains(this.placeholder[0],i)&&("semi-dynamic"===this.options.type?!e.contains(this.element[0],i):!0)){if(this.direction=1===s?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(r))break;this._rearrange(t,r),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,n){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var r=this,i=this.placeholder.offset(),s=this.options.axis,o={};s&&"x"!==s||(o.left=i.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),s&&"y"!==s||(o.top=i.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,e(this.helper).animate(o,parseInt(this.options.revert,10)||500,function(){r._clear(t)})}else this._clear(t,n);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var n=this._getItemsAsjQuery(t&&t.connected),r=[];return t=t||{},e(n).each(function(){var n=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);n&&r.push((t.key||n[1]+"[]")+"="+(t.key&&t.expression?n[1]:n[2]))}),!r.length&&t.key&&r.push(t.key+"="),r.join("&")},toArray:function(t){var n=this._getItemsAsjQuery(t&&t.connected),r=[];return t=t||{},n.each(function(){r.push(e(t.item||this).attr(t.attribute||"id")||"")}),r},_intersectsWith:function(e){var t=this.positionAbs.left,n=t+this.helperProportions.width,r=this.positionAbs.top,i=r+this.helperProportions.height,s=e.left,o=s+e.width,u=e.top,a=u+e.height,f=this.offset.click.top,l=this.offset.click.left,c="x"===this.options.axis||r+f>u&&a>r+f,h="y"===this.options.axis||t+l>s&&o>t+l,p=c&&h;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?p:s<t+this.helperProportions.width/2&&n-this.helperProportions.width/2<o&&u<r+this.helperProportions.height/2&&i-this.helperProportions.height/2<a},_intersectsWithPointer:function(e){var t="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top,e.height),n="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left,e.width),r=t&&n,i=this._getDragVerticalDirection(),s=this._getDragHorizontalDirection();return r?this.floating?s&&"right"===s||"down"===i?2:1:i&&("down"===i?2:1):!1},_intersectsWithSides:function(e){var t=this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),n=this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),r=this._getDragVerticalDirection(),i=this._getDragHorizontalDirection();return this.floating&&i?"right"===i&&n||"left"===i&&!n:r&&("down"===r&&t||"up"===r&&!t)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!==e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!==e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){function n(){u.push(this)}var r,i,s,o,u=[],a=[],f=this._connectWith();if(f&&t)for(r=f.length-1;r>=0;r--)for(s=e(f[r],this.document[0]),i=s.length-1;i>=0;i--)o=e.data(s[i],this.widgetFullName),o&&o!==this&&!o.options.disabled&&a.push([e.isFunction(o.options.items)?o.options.items.call(o.element):e(o.options.items,o.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),o]);for(a.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),r=a.length-1;r>=0;r--)a[r][0].each(n);return e(u)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var n=0;n<t.length;n++)if(t[n]===e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var n,r,i,s,o,u,a,f,l=this.items,c=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],h=this._connectWith();if(h&&this.ready)for(n=h.length-1;n>=0;n--)for(i=e(h[n],this.document[0]),r=i.length-1;r>=0;r--)s=e.data(i[r],this.widgetFullName),s&&s!==this&&!s.options.disabled&&(c.push([e.isFunction(s.options.items)?s.options.items.call(s.element[0],t,{item:this.currentItem}):e(s.options.items,s.element),s]),this.containers.push(s));for(n=c.length-1;n>=0;n--)for(o=c[n][1],u=c[n][0],r=0,f=u.length;f>r;r++)a=e(u[r]),a.data(this.widgetName+"-item",o),l.push({item:a,instance:o,width:0,height:0,left:0,top:0})},refreshPositions:function(t){this.floating=this.items.length?"x"===this.options.axis||this._isFloating(this.items[0].item):!1,this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var n,r,i,s;for(n=this.items.length-1;n>=0;n--)r=this.items[n],r.instance!==this.currentContainer&&this.currentContainer&&r.item[0]!==this.currentItem[0]||(i=this.options.toleranceElement?e(this.options.toleranceElement,r.item):r.item,t||(r.width=i.outerWidth(),r.height=i.outerHeight()),s=i.offset(),r.left=s.left,r.top=s.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(n=this.containers.length-1;n>=0;n--)s=this.containers[n].element.offset(),this.containers[n].containerCache.left=s.left,this.containers[n].containerCache.top=s.top,this.containers[n].containerCache.width=this.containers[n].element.outerWidth(),this.containers[n].containerCache.height=this.containers[n].element.outerHeight();return this},_createPlaceholder:function(t){t=t||this;var n,r=t.options;r.placeholder&&r.placeholder.constructor!==String||(n=r.placeholder,r.placeholder={element:function(){var r=t.currentItem[0].nodeName.toLowerCase(),i=e("<"+r+">",t.document[0]).addClass(n||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tbody"===r?t._createTrPlaceholder(t.currentItem.find("tr").eq(0),e("<tr>",t.document[0]).appendTo(i)):"tr"===r?t._createTrPlaceholder(t.currentItem,i):"img"===r&&i.attr("src",t.currentItem.attr("src")),n||i.css("visibility","hidden"),i},update:function(e,i){(!n||r.forcePlaceholderSize)&&(i.height()||i.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),i.width()||i.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}}),t.placeholder=e(r.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),r.placeholder.update(t,t.placeholder)},_createTrPlaceholder:function(t,n){var r=this;t.children().each(function(){e("<td>&#160;</td>",r.document[0]).attr("colspan",e(this).attr("colspan")||1).appendTo(n)})},_contactContainers:function(t){var n,r,i,s,o,u,a,f,l,c,h=null,p=null;for(n=this.containers.length-1;n>=0;n--)if(!e.contains(this.currentItem[0],this.containers[n].element[0]))if(this._intersectsWith(this.containers[n].containerCache)){if(h&&e.contains(this.containers[n].element[0],h.element[0]))continue;h=this.containers[n],p=n}else this.containers[n].containerCache.over&&(this.containers[n]._trigger("out",t,this._uiHash(this)),this.containers[n].containerCache.over=0);if(h)if(1===this.containers.length)this.containers[p].containerCache.over||(this.containers[p]._trigger("over",t,this._uiHash(this)),this.containers[p].containerCache.over=1);else{for(i=1e4,s=null,l=h.floating||this._isFloating(this.currentItem),o=l?"left":"top",u=l?"width":"height",c=l?"clientX":"clientY",r=this.items.length-1;r>=0;r--)e.contains(this.containers[p].element[0],this.items[r].item[0])&&this.items[r].item[0]!==this.currentItem[0]&&(a=this.items[r].item.offset()[o],f=!1,t[c]-a>this.items[r][u]/2&&(f=!0),Math.abs(t[c]-a)<i&&(i=Math.abs(t[c]-a),s=this.items[r],this.direction=f?"up":"down"));if(!s&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[p])return void (this.currentContainer.containerCache.over||(this.containers[p]._trigger("over",t,this._uiHash()),this.currentContainer.containerCache.over=1));s?this._rearrange(t,s,null,!0):this._rearrange(t,null,this.containers[p].element,!0),this._trigger("change",t,this._uiHash()),this.containers[p]._trigger("change",t,this._uiHash(this)),this.currentContainer=this.containers[p],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[p]._trigger("over",t,this._uiHash(this)),this.containers[p].containerCache.over=1}},_createHelper:function(t){var n=this.options,r=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t,this.currentItem])):"clone"===n.helper?this.currentItem.clone():this.currentItem;return r.parents("body").length||e("parent"!==n.appendTo?n.appendTo:this.currentItem[0].parentNode)[0].appendChild(r[0]),r[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!r[0].style.width||n.forceHelperSize)&&r.width(this.currentItem.width()),(!r[0].style.height||n.forceHelperSize)&&r.height(this.currentItem.height()),r},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,n,r,i=this.options;"parent"===i.containment&&(i.containment=this.helper[0].parentNode),("document"===i.containment||"window"===i.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===i.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===i.containment?this.document.width():this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(i.containment)||(t=e(i.containment)[0],n=e(i.containment).offset(),r="hidden"!==e(t).css("overflow"),this.containment=[n.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,n.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,n.left+(r?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,n.top+(r?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,n){n||(n=this.position);var r="absolute"===t?1:-1,i="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,s=/(html|body)/i.test(i[0].tagName);return{top:n.top+this.offset.relative.top*r+this.offset.parent.top*r-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():s?0:i.scrollTop())*r,left:n.left+this.offset.relative.left*r+this.offset.parent.left*r-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():s?0:i.scrollLeft())*r}},_generatePosition:function(t){var n,r,i=this.options,s=t.pageX,o=t.pageY,u="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,a=/(html|body)/i.test(u[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(s=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(s=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top)),i.grid&&(n=this.originalPageY+Math.round((o-this.originalPageY)/i.grid[1])*i.grid[1],o=this.containment?n-this.offset.click.top>=this.containment[1]&&n-this.offset.click.top<=this.containment[3]?n:n-this.offset.click.top>=this.containment[1]?n-i.grid[1]:n+i.grid[1]:n,r=this.originalPageX+Math.round((s-this.originalPageX)/i.grid[0])*i.grid[0],s=this.containment?r-this.offset.click.left>=this.containment[0]&&r-this.offset.click.left<=this.containment[2]?r:r-this.offset.click.left>=this.containment[0]?r-i.grid[0]:r+i.grid[0]:r)),{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():a?0:u.scrollTop()),left:s-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():a?0:u.scrollLeft())}},_rearrange:function(e,t,n,r){n?n[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var i=this.counter;this._delay(function(){i===this.counter&&this.refreshPositions(!r)})},_clear:function(e,t){function n(e,t,n){return function(r){n._trigger(e,r,t._uiHash(t))}}this.reverting=!1;var r,i=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(r in this._storedCSS)("auto"===this._storedCSS[r]||"static"===this._storedCSS[r])&&(this._storedCSS[r]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!t&&i.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||t||i.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(t||(i.push(function(e){this._trigger("remove",e,this._uiHash())}),i.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),i.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),r=this.containers.length-1;r>=0;r--)t||i.push(n("deactivate",this,this.containers[r])),this.containers[r].containerCache.over&&(i.push(n("out",this,this.containers[r])),this.containers[r].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,t||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!t){for(r=0;r<i.length;r++)i[r].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var n=t||this;return{helper:n.helper,placeholder:n.placeholder||e([]),position:n.position,originalPosition:n.originalPosition,offset:n.positionAbs,item:n.currentItem,sender:t?t.element:null}}})})},function(e,t,n){var r=n(10);e.exports=(r["default"]||r).template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,r){return'<div class="sidebar-site-category-opt">\r\n  <div class="sidebar-split-line"></div>\r\n  <div class="sidebar-drag-pop-btns">\r\n    <a class="sidebar-drag-pop-btn-cancel" href="javascript:;">\u53d6\u6d88</a>\r\n    <a class="sidebar-drag-pop-btn-save" href="javascript:;">\u786e\u8ba4</a>\r\n  </div>\r\n  <a class="sidebar-drag-pop-btn-set-default" href="javascript:;">\u6062\u590d\u9ed8\u8ba4</a>\r\n</div>'},useData:!0})},function(e,t,n){"use strict";function r(e,t){i=$(e),s=t||{},i.html(u({serviceUrl:"http://wpa.b.qq.com/cgi/wpa.php?ln=1&key=XzgwMDA0MjgyOF8zMjA4NzZfODAwMDQyODI4XzJf"})),s.hideRoomReport||o.init($("body"),$.extend({},{roomReportToggle:i.find(".sidebar-room-report")},s))}var i,s,o=n(214),u=n(221);e.exports={init:r}},function(e,t,n){"use strict";function r(e,t){return m=$(e),g=t||{},b=$(g.roomReportToggle),$.when(i())}function i(){var e=g.userinfo;e&&e.rid>0?(w=e.rid,b.on("click",s),m.on("submit",".room-report-form",function(e){e.preventDefault()}),m.on("click",".room-report-form .report-submit-btn",o)):b.on("click",u)}function s(e){e.preventDefault(),y=E.show({title:"\u623f\u95f4\u4e3e\u62a5",content:C(),modalClassName:"room-report-modal"}),a(),f()}function o(e){e.preventDefault();var t=m.find(".room-report-form"),n=t.find(".report-submit-btn");t.find("[name=rid]").val(w),n.hasClass("disabled")||l().then(T.init).then(c).done(h).fail(p).always(v)}function u(e){e.preventDefault(),x.login()}function a(){y.find("input[name=roomId]").val(A)}function f(){var e=($("#filePicker"),y.find("input[name=screenshotUrl]")),t=y.find(".report-form-screenshot-notice");e.val(""),t.html("\u672a\u4e0a\u4f20\u6587\u4ef6");var n=N.init({pick:{id:"#filePicker",multiple:!1},server:"/ajax_upload_img"});n.on("uploadSuccess",function(e,n){n.data?(m.find(".room-report-form input[name=screenshotUrl]").val(n.data),t.html("\u56fe\u7247\u5df2\u4e0a\u4f20")):t.html("\u56fe\u7247\u4e0a\u4f20\u5931\u8d25")}),n.on("error",function(n){if("F_DUPLICATE"==n)return void t.html("\u56fe\u7247\u5df2\u4e0a\u4f20");var r="\u51fa\u9519\u4e86";switch(n){case"F_EXCEED_SIZE":case"Q_EXCEED_SIZE_LIMIT":r="\u4eb2\uff0c\u7167\u7247\u8bf7\u5c0f\u4e8e5M";break;default:r="\u4e0a\u4f20\u5931\u8d25"}t.html(r),e.val("")}),n.on("uploadError",function(n,r){t.html("\u56fe\u7247\u4e0a\u4f20\u5931\u8d25"),e.val("")})}function l(){var e=m.find(".room-report-form"),t=e.find("[name=roomId]").val(),n=e.find("[name=reportDetail]").val(),r=e.find("[name=screenshotUrl]").val(),i=e.find("[name=reporterQQ]").val();return L.checkRoomId(t).then(function(){return L.checkDetail(n)}).then(function(){return L.checkScreenshot(r)}).then(function(){return L.checkQQ(i)})}function c(e){var t=m.find(".room-report-form"),n={};return d(),$.each(t.serializeArray(),function(){$.trim(this.value)&&(n[this.name]=this.value)}),k.reportRoom(n,e)}function h(){S.popup("\u4e3e\u62a5\u6210\u529f\uff01",{delayClose:1e3}),y.modal("hide")}function p(e){e&&"close"==e.type||S.popup(e,{delayClose:1e3})}function d(){var e=m.find(".room-report-form .report-submit-btn");e.addClass("disabled").text("\u5904\u7406\u4e2d...")}function v(){var e=m.find(".room-report-form .report-submit-btn");e.removeClass("disabled").text("\u786e\u5b9a")}var m,g,y,b,w,E=(n(72),n(7)),S=n(33),x=n(28),T=n(32),N=n(215),C=n(218),k=n(219),L=n(220),A=PDR.getRoomId();e.exports={init:r}},function(e,t,n){"use strict";function r(e){return e=$.extend(u,e),o.check(e),i=s.create(e)}var i=null,s=n(216),o=n(217),u={auto:!0,swf:"http://s1.pdim.gs/static/55803010f95d258a.swf",accept:{title:"Images",extensions:"gif,jpg,jpeg,bmp,png",mimeTypes:"image/*"},chunked:!1,fileSizeLimit:5242880};e.exports={init:r}},function(e,t){!function(t,n){var r,i={},s=function(e,t){var n,r,i;if("string"==typeof e)return a(e);for(n=[],r=e.length,i=0;r>i;i++)n.push(a(e[i]));return t.apply(null,n)},o=function(e,t,n){2===arguments.length&&(n=t,t=null),s(t||[],function(){u(e,n,arguments)})},u=function(e,t,n){var r,o={exports:t};"function"==typeof t&&(n.length||(n=[s,o.exports,o]),r=t.apply(null,n),void 0!==r&&(o.exports=r)),i[e]=o.exports},a=function(e){var n=i[e]||t[e];if(!n)throw new Error("`"+e+"` is undefined");return n},f=function(e){var t,n,r,s,o,u;u=function(e){return e&&e.charAt(0).toUpperCase()+e.substr(1)};for(t in i)if(n=e,i.hasOwnProperty(t)){for(r=t.split("/"),o=u(r.pop());s=u(r.shift());)n[s]=n[s]||{},n=n[s];n[o]=i[t]}return e},l=function(e){return t.__dollar=e,f(n(t,o,s))};"object"==typeof e&&"object"==typeof e.exports?e.exports=l():(r=t.WebUploader,t.WebUploader=l(),t.WebUploader.noConflict=function(){t.WebUploader=r})}(window,function(e,t,n){return t("dollar-third",[],function(){var t=e.__dollar||e.jQuery||e.Zepto;if(!t)throw new Error("jQuery or Zepto not found!");return t}),t("dollar",["dollar-third"],function(e){return e}),t("promise-third",["dollar"],function(e){return{Deferred:e.Deferred,when:e.when,isPromise:function(e){return e&&"function"==typeof e.then}}}),t("promise",["promise-third"],function(e){return e}),t("base",["dollar","promise"],function(t,n){function r(e){return function(){return u.apply(e,arguments)}}function i(e,t){return function(){return e.apply(t,arguments)}}function s(e){var t;return Object.create?Object.create(e):(t=function(){},t.prototype=e,new t)}var o=function(){},u=Function.call;return{version:"0.1.5",$:t,Deferred:n.Deferred,isPromise:n.isPromise,when:n.when,browser:function(e){var t={},n=e.match(/WebKit\/([\d.]+)/),r=e.match(/Chrome\/([\d.]+)/)||e.match(/CriOS\/([\d.]+)/),i=e.match(/MSIE\s([\d\.]+)/)||e.match(/(?:trident)(?:.*rv:([\w.]+))?/i),s=e.match(/Firefox\/([\d.]+)/),o=e.match(/Safari\/([\d.]+)/),u=e.match(/OPR\/([\d.]+)/);return n&&(t.webkit=parseFloat(n[1])),r&&(t.chrome=parseFloat(r[1])),i&&(t.ie=parseFloat(i[1])),s&&(t.firefox=parseFloat(s[1])),o&&(t.safari=parseFloat(o[1])),u&&(t.opera=parseFloat(u[1])),t}(navigator.userAgent),os:function(e){var t={},n=e.match(/(?:Android);?[\s\/]+([\d.]+)?/),r=e.match(/(?:iPad|iPod|iPhone).*OS\s([\d_]+)/);return n&&(t.android=parseFloat(n[1])),r&&(t.ios=parseFloat(r[1].replace(/_/g,"."))),t}(navigator.userAgent),inherits:function(e,n,r){var i;return"function"==typeof n?(i=n,n=null):i=n&&n.hasOwnProperty("constructor")?n.constructor:function(){return e.apply(this,arguments)},t.extend(!0,i,e,r||{}),i.__super__=e.prototype,i.prototype=s(e.prototype),n&&t.extend(!0,i.prototype,n),i},noop:o,bindFn:i,log:function(){return e.console?i(console.log,console):o}(),nextTick:function(){return function(e){setTimeout(e,1)}}(),slice:r([].slice),guid:function(){var e=0;return function(t){for(var n=(+(new Date)).toString(32),r=0;5>r;r++)n+=Math.floor(65535*Math.random()).toString(32);return(t||"wu_")+n+(e++).toString(32)}}(),formatSize:function(e,t,n){var r;for(n=n||["B","K","M","G","TB"];(r=n.shift())&&e>1024;)e/=1024;return("B"===r?e:e.toFixed(t||2))+r}}}),t("mediator",["base"],function(e){function t(e,t,n,r){return s.grep(e,function(e){return e&&(!t||e.e===t)&&(!n||e.cb===n||e.cb._cb===n)&&(!r||e.ctx===r)})}function n(e,t,n){s.each((e||"").split(u),function(e,r){n(r,t)})}function r(e,t){for(var n,r=!1,i=-1,s=e.length;++i<s;)if(n=e[i],n.cb.apply(n.ctx2,t)===!1){r=!0;break}return!r}var i,s=e.$,o=[].slice,u=/\s+/;return i={on:function(e,t,r){var i,s=this;return t?(i=this._events||(this._events=[]),n(e,t,function(e,t){var n={e:e};n.cb=t,n.ctx=r,n.ctx2=r||s,n.id=i.length,i.push(n)}),this):this},once:function(e,t,r){var i=this;return t?(n(e,t,function(e,t){var n=function(){return i.off(e,n),t.apply(r||i,arguments)};n._cb=t,i.on(e,n,r)}),i):i},off:function(e,r,i){var o=this._events;return o?e||r||i?(n(e,r,function(e,n){s.each(t(o,e,n,i),function(){delete o[this.id]})}),this):(this._events=[],this):this},trigger:function(e){var n,i,s;return this._events&&e?(n=o.call(arguments,1),i=t(this._events,e),s=t(this._events,"all"),r(i,n)&&r(s,arguments)):this}},s.extend({installTo:function(e){return s.extend(e,i)}},i)}),t("uploader",["base","mediator"],function(e,t){function n(e){this.options=r.extend(!0,{},n.options,e),this._init(this.options)}var r=e.$;return n.options={},t.installTo(n.prototype),r.each({upload:"start-upload",stop:"stop-upload",getFile:"get-file",getFiles:"get-files",addFile:"add-file",addFiles:"add-file",sort:"sort-files",removeFile:"remove-file",cancelFile:"cancel-file",skipFile:"skip-file",retry:"retry",isInProgress:"is-in-progress",makeThumb:"make-thumb",md5File:"md5-file",getDimension:"get-dimension",addButton:"add-btn",predictRuntimeType:"predict-runtime-type",refresh:"refresh",disable:"disable",enable:"enable",reset:"reset"},function(e,t){n.prototype[e]=function(){return this.request(t,arguments)}}),r.extend(n.prototype,{state:"pending",_init:function(e){var t=this;t.request("init",e,function(){t.state="ready",t.trigger("ready")})},option:function(e,t){var n=this.options;return arguments.length>1?void (r.isPlainObject(t)&&r.isPlainObject(n[e])?r.extend(n[e],t):n[e]=t):e?n[e]:n},getStats:function(){var e=this.request("get-stats");return e?{successNum:e.numOfSuccess,progressNum:e.numOfProgress,cancelNum:e.numOfCancel,invalidNum:e.numOfInvalid,uploadFailNum:e.numOfUploadFailed,queueNum:e.numOfQueue,interruptNum:e.numofInterrupt}:{}},trigger
:function(e){var n=[].slice.call(arguments,1),s=this.options,o="on"+e.substring(0,1).toUpperCase()+e.substring(1);return t.trigger.apply(this,arguments)===!1||r.isFunction(s[o])&&s[o].apply(this,n)===!1||r.isFunction(this[o])&&this[o].apply(this,n)===!1||t.trigger.apply(t,[this,e].concat(n))===!1?!1:!0},destroy:function(){this.request("destroy",arguments),this.off()},request:e.noop}),e.create=n.create=function(e){return new n(e)},e.Uploader=n,n}),t("runtime/runtime",["base","mediator"],function(e,t){function n(t){this.options=r.extend({container:document.body},t),this.uid=e.guid("rt_")}var r=e.$,i={},s=function(e){for(var t in e)if(e.hasOwnProperty(t))return t;return null};return r.extend(n.prototype,{getContainer:function(){var e,t,n=this.options;return this._container?this._container:(e=r(n.container||document.body),t=r(document.createElement("div")),t.attr("id","rt_"+this.uid),t.css({position:"absolute",top:"0px",left:"0px",width:"1px",height:"1px",overflow:"hidden"}),e.append(t),e.addClass("webuploader-container"),this._container=t,this._parent=e,t)},init:e.noop,exec:e.noop,destroy:function(){this._container&&this._container.remove(),this._parent&&this._parent.removeClass("webuploader-container"),this.off()}}),n.orders="html5,flash",n.addRuntime=function(e,t){i[e]=t},n.hasRuntime=function(e){return e?!!i[e]:!!s(i)},n.create=function(e,t){var u,a;if(t=t||n.orders,r.each(t.split(/\s*,\s*/g),function(){return i[this]?(u=this,!1):void 0}),u=u||s(i),!u)throw new Error("Runtime Error");return a=new i[u](e)},t.installTo(n.prototype),n}),t("runtime/client",["base","mediator","runtime/runtime"],function(e,t,n){function r(t,r){var s,o=e.Deferred();this.uid=e.guid("client_"),this.runtimeReady=function(e){return o.done(e)},this.connectRuntime=function(t,u){if(s)throw new Error("already connected!");return o.done(u),"string"==typeof t&&i.get(t)&&(s=i.get(t)),s=s||i.get(null,r),s?(e.$.extend(s.options,t),s.__promise.then(o.resolve),s.__client++):(s=n.create(t,t.runtimeOrder),s.__promise=o.promise(),s.once("ready",o.resolve),s.init(),i.add(s),s.__client=1),r&&(s.__standalone=r),s},this.getRuntime=function(){return s},this.disconnectRuntime=function(){s&&(s.__client--,s.__client<=0&&(i.remove(s),delete s.__promise,s.destroy()),s=null)},this.exec=function(){if(s){var n=e.slice(arguments);return t&&n.unshift(t),s.exec.apply(this,n)}},this.getRuid=function(){return s&&s.uid},this.destroy=function(e){return function(){e&&e.apply(this,arguments),this.trigger("destroy"),this.off(),this.exec("destroy"),this.disconnectRuntime()}}(this.destroy)}var i;return i=function(){var e={};return{add:function(t){e[t.uid]=t},get:function(t,n){var r;if(t)return e[t];for(r in e)if(!n||!e[r].__standalone)return e[r];return null},remove:function(t){delete e[t.uid]}}}(),t.installTo(r.prototype),r}),t("lib/dnd",["base","mediator","runtime/client"],function(e,t,n){function r(e){e=this.options=i.extend({},r.options,e),e.container=i(e.container),e.container.length&&n.call(this,"DragAndDrop")}var i=e.$;return r.options={accept:null,disableGlobalDnd:!1},e.inherits(n,{constructor:r,init:function(){var e=this;e.connectRuntime(e.options,function(){e.exec("init"),e.trigger("ready")})}}),t.installTo(r.prototype),r}),t("widgets/widget",["base","uploader"],function(e,t){function n(e){if(!e)return!1;var t=e.length,n=i.type(e);return 1===e.nodeType&&t?!0:"array"===n||"function"!==n&&"string"!==n&&(0===t||"number"==typeof t&&t>0&&t-1 in e)}function r(e){this.owner=e,this.options=e.options}var i=e.$,s=t.prototype._init,o=t.prototype.destroy,u={},a=[];return i.extend(r.prototype,{init:e.noop,invoke:function(e,t){var n=this.responseMap;return n&&e in n&&n[e]in this&&i.isFunction(this[n[e]])?this[n[e]].apply(this,t):u},request:function(){return this.owner.request.apply(this.owner,arguments)}}),i.extend(t.prototype,{_init:function(){var e=this,t=e._widgets=[],n=e.options.disableWidgets||"";return i.each(a,function(r,i){(!n||!~n.indexOf(i._name))&&t.push(new i(e))}),s.apply(e,arguments)},request:function(t,r,i){var s,o,a,f,l=0,c=this._widgets,h=c&&c.length,p=[],d=[];for(r=n(r)?r:[r];h>l;l++)s=c[l],o=s.invoke(t,r),o!==u&&(e.isPromise(o)?d.push(o):p.push(o));return i||d.length?(a=e.when.apply(e,d),f=a.pipe?"pipe":"then",a[f](function(){var t=e.Deferred(),n=arguments;return 1===n.length&&(n=n[0]),setTimeout(function(){t.resolve(n)},1),t.promise()})[i?f:"done"](i||e.noop)):p[0]},destroy:function(){o.apply(this,arguments),this._widgets=null}}),t.register=r.register=function(t,n){var s,o={init:"init",destroy:"destroy",name:"anonymous"};return 1===arguments.length?(n=t,i.each(n,function(e){return"_"===e[0]||"name"===e?void ("name"===e&&(o.name=n.name)):void (o[e.replace(/[A-Z]/g,"-$&").toLowerCase()]=e)})):o=i.extend(o,t),n.responseMap=o,s=e.inherits(r,n),s._name=o.name,a.push(s),s},t.unRegister=r.unRegister=function(e){if(e&&"anonymous"!==e)for(var t=a.length;t--;)a[t]._name===e&&a.splice(t,1)},r}),t("widgets/filednd",["base","uploader","lib/dnd","widgets/widget"],function(e,t,n){var r=e.$;return t.options.dnd="",t.register({name:"dnd",init:function(t){if(t.dnd&&"html5"===this.request("predict-runtime-type")){var s,o=this,u=e.Deferred(),a=r.extend({},{disableGlobalDnd:t.disableGlobalDnd,container:t.dnd,accept:t.accept});return this.dnd=s=new n(a),s.once("ready",u.resolve),s.on("drop",function(e){o.request("add-file",[e])}),s.on("accept",function(e){return o.owner.trigger("dndAccept",e)}),s.init(),u.promise()}},destroy:function(){this.dnd&&this.dnd.destroy()}})}),t("lib/filepaste",["base","mediator","runtime/client"],function(e,t,n){function r(e){e=this.options=i.extend({},e),e.container=i(e.container||document.body),n.call(this,"FilePaste")}var i=e.$;return e.inherits(n,{constructor:r,init:function(){var e=this;e.connectRuntime(e.options,function(){e.exec("init"),e.trigger("ready")})}}),t.installTo(r.prototype),r}),t("widgets/filepaste",["base","uploader","lib/filepaste","widgets/widget"],function(e,t,n){var r=e.$;return t.register({name:"paste",init:function(t){if(t.paste&&"html5"===this.request("predict-runtime-type")){var s,o=this,u=e.Deferred(),a=r.extend({},{container:t.paste,accept:t.accept});return this.paste=s=new n(a),s.once("ready",u.resolve),s.on("paste",function(e){o.owner.request("add-file",[e])}),s.init(),u.promise()}},destroy:function(){this.paste&&this.paste.destroy()}})}),t("lib/blob",["base","runtime/client"],function(e,t){function n(e,n){var r=this;r.source=n,r.ruid=e,this.size=n.size||0,!n.type&&this.ext&&~"jpg,jpeg,png,gif,bmp".indexOf(this.ext)?this.type="image/"+("jpg"===this.ext?"jpeg":this.ext):this.type=n.type||"application/octet-stream",t.call(r,"Blob"),this.uid=n.uid||this.uid,e&&r.connectRuntime(e)}return e.inherits(t,{constructor:n,slice:function(e,t){return this.exec("slice",e,t)},getSource:function(){return this.source}}),n}),t("lib/file",["base","lib/blob"],function(e,t){function n(e,n){var s;this.name=n.name||"untitled"+r++,s=i.exec(n.name)?RegExp.$1.toLowerCase():"",!s&&n.type&&(s=/\/(jpg|jpeg|png|gif|bmp)$/i.exec(n.type)?RegExp.$1.toLowerCase():"",this.name+="."+s),this.ext=s,this.lastModifiedDate=n.lastModifiedDate||(new Date).toLocaleString(),t.apply(this,arguments)}var r=1,i=/\.([^.]+)$/;return e.inherits(t,n)}),t("lib/filepicker",["base","runtime/client","lib/file"],function(t,n,r){function i(e){if(e=this.options=s.extend({},i.options,e),e.container=s(e.id),!e.container.length)throw new Error("\u6309\u94ae\u6307\u5b9a\u9519\u8bef");e.innerHTML=e.innerHTML||e.label||e.container.html()||"",e.button=s(e.button||document.createElement("div")),e.button.html(e.innerHTML),e.container.html(e.button),n.call(this,"FilePicker",!0)}var s=t.$;return i.options={button:null,container:null,label:null,innerHTML:null,multiple:!0,accept:null,name:"file"},t.inherits(n,{constructor:i,init:function(){var n=this,i=n.options,u=i.button;u.addClass("webuploader-pick"),n.on("all",function(e){var t;switch(e){case"mouseenter":u.addClass("webuploader-pick-hover");break;case"mouseleave":u.removeClass("webuploader-pick-hover");break;case"change":t=n.exec("getFiles"),n.trigger("select",s.map(t,function(e){return e=new r(n.getRuid(),e),e._refer=i.container,e}),i.container)}}),n.connectRuntime(i,function(){n.refresh(),n.exec("init",i),n.trigger("ready")}),this._resizeHandler=t.bindFn(this.refresh,this),s(e).on("resize",this._resizeHandler)},refresh:function(){var e=this.getRuntime().getContainer(),t=this.options.button,n=t.outerWidth?t.outerWidth():t.width(),r=t.outerHeight?t.outerHeight():t.height(),i=t.offset();n&&r&&e.css({bottom:"auto",right:"auto",width:n+"px",height:r+"px"}).offset(i)},enable:function(){var e=this.options.button;e.removeClass("webuploader-pick-disable"),this.refresh()},disable:function(){var e=this.options.button;this.getRuntime().getContainer().css({top:"-99999px"}),e.addClass("webuploader-pick-disable")},destroy:function(){var t=this.options.button;s(e).off("resize",this._resizeHandler),t.removeClass("webuploader-pick-disable webuploader-pick-hover webuploader-pick")}}),i}),t("widgets/filepicker",["base","uploader","lib/filepicker","widgets/widget"],function(e,t,n){var r=e.$;return r.extend(t.options,{pick:null,accept:null}),t.register({name:"picker",init:function(e){return this.pickers=[],e.pick&&this.addBtn(e.pick)},refresh:function(){r.each(this.pickers,function(){this.refresh()})},addBtn:function(t){var s=this,o=s.options,u=o.accept,a=[];if(t)return r.isPlainObject(t)||(t={id:t}),r(t.id).each(function(){var f,l,c;c=e.Deferred(),f=r.extend({},t,{accept:r.isPlainObject(u)?[u]:u,swf:o.swf,runtimeOrder:o.runtimeOrder,id:this}),l=new n(f),l.once("ready",c.resolve),l.on("select",function(e){s.owner.request("add-file",[e])}),l.init(),s.pickers.push(l),a.push(c.promise())}),e.when.apply(e,a)},disable:function(){r.each(this.pickers,function(){this.disable()})},enable:function(){r.each(this.pickers,function(){this.enable()})},destroy:function(){r.each(this.pickers,function(){this.destroy()}),this.pickers=null}})}),t("lib/image",["base","runtime/client","lib/blob"],function(e,t,n){function r(e){this.options=i.extend({},r.options,e),t.call(this,"Image"),this.on("load",function(){this._info=this.exec("info"),this._meta=this.exec("meta")})}var i=e.$;return r.options={quality:90,crop:!1,preserveHeaders:!1,allowMagnify:!1},e.inherits(t,{constructor:r,info:function(e){return e?(this._info=e,this):this._info},meta:function(e){return e?(this._meta=e,this):this._meta},loadFromBlob:function(e){var t=this,n=e.getRuid();this.connectRuntime(n,function(){t.exec("init",t.options),t.exec("loadFromBlob",e)})},resize:function(){var t=e.slice(arguments);return this.exec.apply(this,["resize"].concat(t))},crop:function(){var t=e.slice(arguments);return this.exec.apply(this,["crop"].concat(t))},getAsDataUrl:function(e){return this.exec("getAsDataUrl",e)},getAsBlob:function(e){var t=this.exec("getAsBlob",e);return new n(this.getRuid(),t)}}),r}),t("widgets/image",["base","uploader","lib/image","widgets/widget"],function(e,t,n){var r,i=e.$;return r=function(e){var t=0,n=[],r=function(){for(var r;n.length&&e>t;)r=n.shift(),t+=r[0],r[1]()};return function(e,i,s){n.push([i,s]),e.once("destroy",function(){t-=i,setTimeout(r,1)}),setTimeout(r,1)}}(5242880),i.extend(t.options,{thumb:{width:110,height:110,quality:70,allowMagnify:!0,crop:!0,preserveHeaders:!1,type:"image/jpeg"},compress:{width:1600,height:1600,quality:90,allowMagnify:!1,crop:!1,preserveHeaders:!0}}),t.register({name:"image",makeThumb:function(e,t,s,o){var u,a;return e=this.request("get-file",e),e.type.match(/^image/)?(u=i.extend({},this.options.thumb),i.isPlainObject(s)&&(u=i.extend(u,s),s=null),s=s||u.width,o=o||u.height,a=new n(u),a.once("load",function(){e._info=e._info||a.info(),e._meta=e._meta||a.meta(),1>=s&&s>0&&(s=e._info.width*s),1>=o&&o>0&&(o=e._info.height*o),a.resize(s,o)}),a.once("complete",function(){t(!1,a.getAsDataUrl(u.type)),a.destroy()}),a.once("error",function(e){t(e||!0),a.destroy()}),void r(a,e.source.size,function(){e._info&&a.info(e._info),e._meta&&a.meta(e._meta),a.loadFromBlob(e.source)})):void t(!0)},beforeSendFile:function(t){var r,s,o=this.options.compress||this.options.resize,u=o&&o.compressSize||0,a=o&&o.noCompressIfLarger||!1;return t=this.request("get-file",t),!o||!~"image/jpeg,image/jpg".indexOf(t.type)||t.size<u||t._compressed?void 0:(o=i.extend({},o),s=e.Deferred(),r=new n(o),s.always(function(){r.destroy(),r=null}),r.once("error",s.reject),r.once("load",function(){var e=o.width,n=o.height;t._info=t._info||r.info(),t._meta=t._meta||r.meta(),1>=e&&e>0&&(e=t._info.width*e),1>=n&&n>0&&(n=t._info.height*n),r.resize(e,n)}),r.once("complete",function(){var e,n;try{e=r.getAsBlob(o.type),n=t.size,(!a||e.size<n)&&(t.source=e,t.size=e.size,t.trigger("resize",e.size,n)),t._compressed=!0,s.resolve()}catch(i){s.resolve()}}),t._info&&r.info(t._info),t._meta&&r.meta(t._meta),r.loadFromBlob(t.source),s.promise())}})}),t("file",["base","mediator"],function(e,t){function n(){return s+o++}function r(e){this.name=e.name||"Untitled",this.size=e.size||0,this.type=e.type||"application/octet-stream",this.lastModifiedDate=e.lastModifiedDate||1*new Date,this.id=n(),this.ext=u.exec(this.name)?RegExp.$1:"",this.statusText="",a[this.id]=r.Status.INITED,this.source=e,this.loaded=0,this.on("error",function(e){this.setStatus(r.Status.ERROR,e)})}var i=e.$,s="WU_FILE_",o=0,u=/\.([^.]+)$/,a={};return i.extend(r.prototype,{setStatus:function(e,t){var n=a[this.id];"undefined"!=typeof t&&(this.statusText=t),e!==n&&(a[this.id]=e,this.trigger("statuschange",e,n))},getStatus:function(){return a[this.id]},getSource:function(){return this.source},destroy:function(){this.off(),delete a[this.id]}}),t.installTo(r.prototype),r.Status={INITED:"inited",QUEUED:"queued",PROGRESS:"progress",ERROR:"error",COMPLETE:"complete",CANCELLED:"cancelled",INTERRUPT:"interrupt",INVALID:"invalid"},r}),t("queue",["base","mediator","file"],function(e,t,n){function r(){this.stats={numOfQueue:0,numOfSuccess:0,numOfCancel:0,numOfProgress:0,numOfUploadFailed:0,numOfInvalid:0,numofDeleted:0,numofInterrupt:0},this._queue=[],this._map={}}var i=e.$,s=n.Status;return i.extend(r.prototype,{append:function(e){return this._queue.push(e),this._fileAdded(e),this},prepend:function(e){return this._queue.unshift(e),this._fileAdded(e),this},getFile:function(e){return"string"!=typeof e?e:this._map[e]},fetch:function(e){var t,n,r=this._queue.length;for(e=e||s.QUEUED,t=0;r>t;t++)if(n=this._queue[t],e===n.getStatus())return n;return null},sort:function(e){"function"==typeof e&&this._queue.sort(e)},getFiles:function(){for(var e,t=[].slice.call(arguments,0),n=[],r=0,s=this._queue.length;s>r;r++)e=this._queue[r],(!t.length||~i.inArray(e.getStatus(),t))&&n.push(e);return n},removeFile:function(e){var t=this._map[e.id];t&&(delete this._map[e.id],e.destroy(),this.stats.numofDeleted++)},_fileAdded:function(e){var t=this,n=this._map[e.id];n||(this._map[e.id]=e,e.on("statuschange",function(e,n){t._onFileStatusChange(e,n)}))},_onFileStatusChange:function(e,t){var n=this.stats;switch(t){case s.PROGRESS:n.numOfProgress--;break;case s.QUEUED:n.numOfQueue--;break;case s.ERROR:n.numOfUploadFailed--;break;case s.INVALID:n.numOfInvalid--;break;case s.INTERRUPT:n.numofInterrupt--}switch(e){case s.QUEUED:n.numOfQueue++;break;case s.PROGRESS:n.numOfProgress++;break;case s.ERROR:n.numOfUploadFailed++;break;case s.COMPLETE:n.numOfSuccess++;break;case s.CANCELLED:n.numOfCancel++;break;case s.INVALID:n.numOfInvalid++;break;case s.INTERRUPT:n.numofInterrupt++}}}),t.installTo(r.prototype),r}),t("widgets/queue",["base","uploader","queue","file","lib/file","runtime/client","widgets/widget"],function(e,t,n,r,i,s){var o=e.$,u=/\.\w+$/,a=r.Status;return t.register({name:"queue",init:function(t){var r,i,u,a,f,l,c,h=this;if(o.isPlainObject(t.accept)&&(t.accept=[t.accept]),t.accept){for(f=[],u=0,i=t.accept.length;i>u;u++)a=t.accept[u].extensions,a&&f.push(a);f.length&&(l="\\."+f.join(",").replace(/,/g,"$|\\.").replace(/\*/g,".*")+"$"),h.accept=new RegExp(l,"i")}return h.queue=new n,h.stats=h.queue.stats,"html5"===this.request("predict-runtime-type")?(r=e.Deferred(),this.placeholder=c=new s("Placeholder"),c.connectRuntime({runtimeOrder:"html5"},function(){h._ruid=c.getRuid(),r.resolve()}),r.promise()):void 0},_wrapFile:function(e){if(!(e instanceof r)){if(!(e instanceof i)){if(!this._ruid)throw new Error("Can't add external files.");e=new i(this._ruid,e)}e=new r(e)}return e},acceptFile:function(e){var t=!e||!e.size||this.accept&&u.exec(e.name)&&!this.accept.test(e.name);return!t},_addFile:function(e){var t=this;return e=t._wrapFile(e),t.owner.trigger("beforeFileQueued",e)?t.acceptFile(e)?(t.queue.append(e),t.owner.trigger("fileQueued",e),e):void t.owner.trigger("error","Q_TYPE_DENIED",e):void 0},getFile:function(e){return this.queue.getFile(e)},addFile:function(e){var t=this;e.length||(e=[e]),e=o.map(e,function(e){return t._addFile(e)}),t.owner.trigger("filesQueued",e),t.options.auto&&setTimeout(function(){t.request("start-upload")},20)},getStats:function(){return this.stats},removeFile:function(e,t){var n=this;e=e.id?e:n.queue.getFile(e),this.request("cancel-file",e),t&&this.queue.removeFile(e)},getFiles:function(){return this.queue.getFiles.apply(this.queue,arguments)},fetchFile:function(){return this.queue.fetch.apply(this.queue,arguments)},retry:function(e,t){var n,r,i,s=this;if(e)return e=e.id?e:s.queue.getFile(e),e.setStatus(a.QUEUED),void (t||s.request("start-upload"));for(n=s.queue.getFiles(a.ERROR),r=0,i=n.length;i>r;r++)e=n[r],e.setStatus(a.QUEUED);s.request("start-upload")},sortFiles:function(){return this.queue.sort.apply(this.queue,arguments)},reset:function(){this.owner.trigger("reset"),this.queue=new n,this.stats=this.queue.stats},destroy:function(){this.reset(),this.placeholder&&this.placeholder.destroy()}})}),t("widgets/runtime",["uploader","runtime/runtime","widgets/widget"],function(e,t){return e.support=function(){return t.hasRuntime.apply(t,arguments)},e.register({name:"runtime",init:function(){if(!this.predictRuntimeType())throw Error("Runtime Error")},predictRuntimeType:function(){var e,n,r=this.options.runtimeOrder||t.orders,i=this.type;if(!i)for(r=r.split(/\s*,\s*/g),e=0,n=r.length;n>e;e++)if(t.hasRuntime(r[e])){this.type=i=r[e];break}return i}})}),t("lib/transport",["base","runtime/client","mediator"],function(e,t,n){function r(e){var n=this;e=n.options=i.extend(!0,{},r.options,e||{}),t.call(this,"Transport"),this._blob=null,this._formData=e.formData||{},this._headers=e.headers||{},this.on("progress",this._timeout),this.on("load error",function(){n.trigger("progress",1),clearTimeout(n._timer)})}var i=e.$;return r.options={server:"",method:"POST",withCredentials:!1,fileVal:"file",timeout:12e4,formData:{},headers:{},sendAsBinary:!1},i.extend(r.prototype,{appendBlob:function(e,t,n){var r=this,i=r.options;r.getRuid()&&r.disconnectRuntime(),r.connectRuntime(t.ruid,function(){r.exec("init")}),r._blob=t,i.fileVal=e||i.fileVal,i.filename=n||i.filename},append:function(e,t){"object"==typeof e?i.extend(this._formData,e):this._formData[e]=t},setRequestHeader:function(e,t){"object"==typeof e?i.extend(this._headers,e):this._headers[e]=t},send:function(e){this.exec("send",e),this._timeout()},abort:function(){return clearTimeout(this._timer),this.exec("abort")},destroy:function(){this.trigger("destroy"),this.off(),this.exec("destroy"),this.disconnectRuntime()},getResponse:function(){return this.exec("getResponse")},getResponseAsJson:function(){return this.exec("getResponseAsJson")},getStatus:function(){return this.exec("getStatus")},_timeout:function(){var e=this,t=e.options.timeout;t&&(clearTimeout(e._timer),e._timer=setTimeout(function(){e.abort(),e.trigger("error","timeout")},t))}}),n.installTo(r.prototype),r}),t("widgets/upload",["base","uploader","file","lib/transport","widgets/widget"],function(e,t,n,r){function i(e,t){var n,r,i=[],s=e.source,o=s.size,u=t?Math.ceil(o/t):1,a=0,f=0;for(r={file:e,has:function(){return!!i.length},shift:function(){return i.shift()},unshift:function(e){i.unshift(e)}};u>f;)n=Math.min(t,o-a),i.push({file:e,start:a,end:t?a+n:o,total:o,chunks:u,chunk:f++,cuted:r}),a+=n;return e.blocks=i.concat(),e.remaning=i.length,r}var s=e.$,o=e.isPromise,u=n.Status;s.extend(t.options,{prepareNextFile:!1,chunked:!1,chunkSize:5242880,chunkRetry:2,threads:3,formData:{}}),t.register({name:"upload",init:function(){var t=this.owner,n=this;this.runing=!1,this.progress=!1,t.on("startUpload",function(){n.progress=!0}).on("uploadFinished",function(){n.progress=!1}),this.pool=[],this.stack=[],this.pending=[],this.remaning=0,this.__tick=e.bindFn(this._tick,this),t.on("uploadComplete",function(e){e.blocks&&s.each(e.blocks,function(e,t){t.transport&&(t.transport.abort(),t.transport.destroy()),delete t.transport}),delete e.blocks,delete e.remaning})},reset:function(){this.request("stop-upload",!0),this.runing=!1,this.pool=[],this.stack=[],this.pending=[],this.remaning=0,this._trigged=!1,this._promise=null},startUpload:function(t){var n=this;if(s.each(n.request("get-files",u.INVALID),function(){n.request("remove-file",this)}),t)if(t=t.id?t:n.request("get-file",t),t.getStatus()===u.INTERRUPT)s.each(n.pool,function(e,n){n.file===t&&n.transport&&n.transport.send()}),t.setStatus(u.QUEUED);else{if(t.getStatus()===u.PROGRESS)return;t.setStatus(u.QUEUED)}else s.each(n.request("get-files",[u.INITED]),function(){this.setStatus(u.QUEUED)});if(!n.runing){n.runing=!0;var r=[];s.each(n.pool,function(e,t){var i=t.file;i.getStatus()===u.INTERRUPT&&(r.push(i),n._trigged=!1,t.transport&&t.transport.send())});for(var t;t=r.shift();)t.setStatus(u.PROGRESS);t||s.each(n.request("get-files",u.INTERRUPT),function(){this.setStatus(u.PROGRESS)}),n._trigged=!1,e.nextTick(n.__tick),n.owner.trigger("startUpload")}},stopUpload:function(t,n){var r=this;if(t===!0&&(n=t,t=null),r.runing!==!1){if(t){if(t=t.id?t:r.request("get-file",t),t.getStatus()!==u.PROGRESS&&t.getStatus()!==u.QUEUED)return;return t.setStatus(u.INTERRUPT),s.each(r.pool,function(e,n){n.file===t&&(n.transport&&n.transport.abort(),r._putback(n),r._popBlock(n))}),e.nextTick(r.__tick)}r.runing=!1,this._promise&&this._promise.file&&this._promise.file.setStatus(u.INTERRUPT),n&&s.each(r.pool,function(e,t){t.transport&&t.transport.abort(),t.file.setStatus(u.INTERRUPT)}),r.owner.trigger("stopUpload")}},cancelFile:function(e){e=e.id?e:this.request("get-file",e),e.blocks&&s.each(e.blocks,function(e,t){var n=t.transport;n&&(n.abort(),n.destroy(),delete t.transport)}),e.setStatus(u.CANCELLED),this.owner.trigger("fileDequeued",e)},isInProgress:function(){return!!this.progress},_getStats:function(){return this.request("get-stats")},skipFile:function(e,t){e=e.id?e:this.request("get-file",e),e.setStatus(t||u.COMPLETE),e.skipped=!0,e.blocks&&s.each(e.blocks,function(e,t){var n=t.transport;n&&(n.abort(),n.destroy(),delete t.transport)}),this.owner.trigger("uploadSkip",e)},_tick:function(){var t,n,r=this,i=r.options;return r._promise?r._promise.always(r.__tick):void (r.pool.length<i.threads&&(n=r._nextBlock())?(r._trigged=!1,t=function(t){r._promise=null,t&&t.file&&r._startSend(t),e.nextTick(r.__tick)},r._promise=o(n)?n.always(t):t(n)):r.remaning||r._getStats().numOfQueue||r._getStats().numofInterrupt||(r.runing=!1,r._trigged||e.nextTick(function(){r.owner.trigger("uploadFinished")}),r._trigged=!0))},_putback:function(e){var t;e.cuted.unshift(e),t=this.stack.indexOf(e.cuted),~t||this.stack.unshift(e.cuted)},_getStack:function(){for(var e,t=0;e=this.stack[t++];){if(e.has()&&e.file.getStatus()===u.PROGRESS)return e;(!e.has()||e.file.getStatus()!==u.PROGRESS&&e.file.getStatus()!==u.INTERRUPT)&&this.stack.splice(--t,1)}return null},_nextBlock:function(){var e,t,n,r,s=this,u=s.options;return(e=this._getStack())?(u.prepareNextFile&&!s.pending.length&&s._prepareNextFile(),e.shift()):s.runing?(!s.pending.length&&s._getStats().numOfQueue&&s._prepareNextFile(),t=s.pending.shift(),n=function(t){return t?(e=i(t,u.chunked?u.chunkSize:0),s.stack.push(e),e.shift()):null},o(t)?(r=t.file,t=t[t.pipe?"pipe":"then"](n),t.file=r,t):n(t)):void 0},_prepareNextFile:function(){var e,t=this,n=t.request("fetch-file"),r=t.pending;n&&(e=t.request("before-send-file",n,function(){return n.getStatus()===u.PROGRESS||n.getStatus()===u.INTERRUPT?n:t._finishFile(n)}),t.owner.trigger("uploadStart",n),n.setStatus(u.PROGRESS),e.file=n,e.done(function(){var t=s.inArray(e,r);~t&&r.splice(t,1,n)}),e.fail(function(e){n.setStatus(u.ERROR,e),t.owner.trigger("uploadError",n,e),t.owner.trigger("uploadComplete",n)}),r.push(e))},_popBlock:function(e){var t=s.inArray(e,this.pool);this.pool.splice(t,1),e.file.remaning--,this.remaning--},_startSend:function(t){var n,r=this,i=t.file;return i.getStatus()!==u.PROGRESS?void (i.getStatus()===u.INTERRUPT&&r._putback(t)):(r.pool.push(t),r.remaning++,t.blob=1===t.chunks?i.source:i.source.slice(t.start,t.end),n=r.request("before-send",t,function(){i.getStatus()===u.PROGRESS?r._doSend(t):(r._popBlock(t),e.nextTick(r.__tick))}),void n.fail(function(){1===i.remaning?r._finishFile(i).always(function(){t.percentage=1,r._popBlock(t),r.owner.trigger("uploadComplete",i),e.nextTick(r.__tick)}):(t.percentage=1,r.updateFileProgress(i),r._popBlock(t),e.nextTick(r.__tick))}))},_doSend:function(t){var n,i,o=this,a=o.owner,f=o.options,l=t.file,c=new r(f),h=s.extend({},f.formData),p=s.extend({},f.headers);t.transport=c,c.on("destroy",function(){delete t.transport,o._popBlock(t),e.nextTick(o.__tick)}),c.on("progress",function(e){t.percentage=e,o.updateFileProgress(l)}),n=function(e){var n;return i=c.getResponseAsJson()||{},i._raw=c.getResponse(),n=function(t){e=t},a.trigger("uploadAccept",t,i,n)||(e=e||"server"),e},c.on("error",function(e,r){t.retried=t.retried||0,t.chunks>1&&~"http,abort".indexOf(e)&&t.retried<f.chunkRetry?(t.retried++,c.send()):(r||"server"!==e||(e=n(e)),l.setStatus(u.ERROR,e),a.trigger("uploadError",l,e),a.trigger("uploadComplete",l))}),c.on("load",function(){var e;return(e=n())?void c.trigger("error",e,!0):void (1===l.remaning?o._finishFile(l,i):c.destroy())}),h=s.extend(h,{id:l.id,name:l.name,type:l.type,lastModifiedDate:l.lastModifiedDate,size:l.size}),t.chunks>1&&s.extend(h,{chunks:t.chunks,chunk:t.chunk}),a.trigger("uploadBeforeSend",t,h,p),c.appendBlob(f.fileVal,t.blob,l.name),c.append(h),c.setRequestHeader(p),c.send()},_finishFile:function(e,t,n){var r=this.owner;return r.request("after-send-file",arguments,function(){e.setStatus(u.COMPLETE),r.trigger("uploadSuccess",e,t,n)}).fail(function(t){e.getStatus()===u.PROGRESS&&e.setStatus(u.ERROR,t),r.trigger("uploadError",e,t)}).always(function(){r.trigger("uploadComplete",e)})},updateFileProgress:function(e){var t=0,n=0;e.blocks&&(s.each(e.blocks,function(e,t){n+=(t.percentage||0)*(t.end-t.start)}),t=n/e.size,this.owner.trigger("uploadProgress",e,t||0))}})}),t("widgets/validator",["base","uploader","file","widgets/widget"],function(e,t,n){var r,i=e.$,s={};return r={addValidator:function(e,t){s[e]=t},removeValidator:function(e){delete s[e]}},t.register({name:"validator",init:function(){var t=this;e.nextTick(function(){i.each(s,function(){this.call(t.owner)})})}}),r.addValidator("fileNumLimit",function(){var e=this,t=e.options,n=0,r=parseInt(t.fileNumLimit,10),i=!0;r&&(e.on("beforeFileQueued",function(e){return n>=r&&i&&(i=!1,this.trigger("error","Q_EXCEED_NUM_LIMIT",r,e),setTimeout(function(){i=!0},1)),n>=r?!1:!0}),e.on("fileQueued",function(){n++}),e.on("fileDequeued",function(){n--}),e.on("reset",function(){n=0}))}),r.addValidator("fileSizeLimit",function(){var e=this,t=e.options,n=0,r=parseInt(t.fileSizeLimit,10),i=!0;r&&(e.on("beforeFileQueued",function(e){var t=n+e.size>r;return t&&i&&(i=!1,this.trigger("error","Q_EXCEED_SIZE_LIMIT",r,e),setTimeout(function(){i=!0},1)),t?!1:!0}),e.on("fileQueued",function(e){n+=e.size}),e.on("fileDequeued",function(e){n-=e.size}),e.on("reset",function(){n=0}))}),r.addValidator("fileSingleSizeLimit",function(){var e=this,t=e.options,r=t.fileSingleSizeLimit;r&&e.on("beforeFileQueued",function(e){return e.size>r?(e.setStatus(n.Status.INVALID,"exceed_size"),this.trigger("error","F_EXCEED_SIZE",r,e),!1):void 0})}),r.addValidator("duplicate",function(){function e(e){for(var t,n=0,r=0,i=e.length;i>r;r++)t=e.charCodeAt(r),n=t+(n<<6)+(n<<16)-n;return n}var t=this,n=t.options,r={};n.duplicate||(t.on("beforeFileQueued",function(t){var n=t.__hash||(t.__hash=e(t.name+t.size+t.lastModifiedDate));return r[n]?(this.trigger("error","F_DUPLICATE",t),!1):void 0}),t.on("fileQueued",function(e){var t=e.__hash;t&&(r[t]=!0)}),t.on("fileDequeued",function(e){var t=e.__hash;t&&delete r[t]}),t.on("reset",function(){r={}}))}),r}),t("lib/md5",["runtime/client","mediator"],function(e,t){function n(){e.call(this,"Md5")}return t.installTo(n.prototype),n.prototype.loadFromBlob=function(e){var t=this;t.getRuid()&&t.disconnectRuntime(),t.connectRuntime(e.ruid,function(){t.exec("init"),t.exec("loadFromBlob",e)})},n.prototype.getResult=function(){return this.exec("getResult")},n}),t("widgets/md5",["base","uploader","lib/md5","lib/blob","widgets/widget"],function(e,t,n,r){return t.register({name:"md5",md5File:function(t,s,o){var u=new n,a=e.Deferred(),f=t instanceof r?t:this.request("get-file",t).source;return u.on("progress load",function(e){e=e||{},a.notify(e.total?e.loaded/e.total:1)}),u.on("complete",function(){a.resolve(u.getResult())}),u.on("error",function(e){a.reject(e)}),arguments.length>1&&(s=s||0,o=o||0,0>s&&(s=f.size+s),0>o&&(o=f.size+o),o=Math.min(o,f.size),f=f.slice(s,o)),u.loadFromBlob(f),a.promise()}})}),t("runtime/compbase",[],function(){function e(e,t){this.owner=e,this.options=e.options,this.getRuntime=function(){return t},this.getRuid=function(){return t.uid},this.trigger=function(){return e.trigger.apply(e,arguments)}}return e}),t("runtime/html5/runtime",["base","runtime/runtime","runtime/compbase"],function(t,n,r){function i(){var e={},r=this,i=this.destroy;n.apply(r,arguments),r.type=s,r.exec=function(n,i){var s,u=this,f=u.uid,l=t.slice(arguments,2);return o[n]&&(s=e[f]=e[f]||new o[n](u,r),s[i])?s[i].apply(s,l):void 0},r.destroy=function(){return i&&i.apply(this,arguments)}}var s="html5",o={};return t.inherits(n,{constructor:i,init:function(){var e=this;setTimeout(function(){e.trigger("ready")},1)}}),i.register=function(e,n){var i=o[e]=t.inherits(r,n);return i},e.Blob&&e.FileReader&&e.DataView&&n.addRuntime(s,i),i}),t("runtime/html5/blob",["runtime/html5/runtime","lib/blob"],function(e,t){return e.register("Blob",{slice:function(e,n){var r=this.owner.source,i=r.slice||r.webkitSlice||r.mozSlice;return r=i.call(r,e,n),new t(this.getRuid(),r)}})}),t("runtime/html5/dnd",["base","runtime/html5/runtime","lib/file"],function(e,t,n){var r=e.$,i="webuploader-dnd-";return t.register("DragAndDrop",{init:function(){var t=this.elem=this.options.container;this.dragEnterHandler=e.bindFn(this._dragEnterHandler,this),this.dragOverHandler=e.bindFn(this._dragOverHandler,this),this.dragLeaveHandler=e.bindFn(this._dragLeaveHandler,this),this.dropHandler=e.bindFn(this._dropHandler,this),this.dndOver=!1,t.on("dragenter",this.dragEnterHandler),t.on("dragover",this.dragOverHandler),t.on("dragleave",this.dragLeaveHandler),t.on("drop",this.dropHandler),this.options.disableGlobalDnd&&(r(document).on("dragover",this.dragOverHandler),r(document).on("drop",this.dropHandler))},_dragEnterHandler:function(e){var t,n=this,r=n._denied||!1;return e=e.originalEvent||e,n.dndOver||(n.dndOver=!0,t=e.dataTransfer.items,t&&t.length&&(n._denied=r=!n.trigger("accept",t)),n.elem.addClass(i+"over"),n.elem[r?"addClass":"removeClass"](i+"denied")),e.dataTransfer.dropEffect=r?"none":"copy",!1},_dragOverHandler:function(e){var t=this.elem.parent().get(0);return t&&!r.contains(t,e.currentTarget)?!1:(clearTimeout(this._leaveTimer),this._dragEnterHandler.call(this,e),!1)},_dragLeaveHandler:function(){var e,t=this;return e=function(){t.dndOver=!1,t.elem.removeClass(i+"over "+i+"denied")},clearTimeout(t._leaveTimer),t._leaveTimer=setTimeout(e,100),!1},_dropHandler:function(e){var t,s,o=this,u=o.getRuid(),a=o.elem.parent().get(0);if(a&&!r.contains(a,e.currentTarget))return!1;e=e.originalEvent||e,t=e.dataTransfer;try{s=t.getData("text/html")}catch(f){}return s?void 0:(o._getTansferFiles(t,function(e){o.trigger("drop",r.map(e,function(e){return new n(u,e)}))}),o.dndOver=!1,o.elem.removeClass(i+"over"),!1)},_getTansferFiles:function(t,n){var r,i,s,o,u,a,f,l=[],c=[];for(r=t.items,i=t.files,f=!!r&&!!r[0].webkitGetAsEntry,u=0,a=i.length;a>u;u++)s=i[u],o=r&&r[u],f&&o.webkitGetAsEntry().isDirectory?c.push(this._traverseDirectoryTree(o.webkitGetAsEntry(),l)):l.push(s);e.when.apply(e,c).done(function(){l.length&&n(l)})},_traverseDirectoryTree:function(t,n){var r=e.Deferred(),i=this;return t.isFile?t.file(function(e){n.push(e),r.resolve()}):t.isDirectory&&t.createReader().readEntries(function(t){
var s,o=t.length,u=[],a=[];for(s=0;o>s;s++)u.push(i._traverseDirectoryTree(t[s],a));e.when.apply(e,u).then(function(){n.push.apply(n,a),r.resolve()},r.reject)}),r.promise()},destroy:function(){var e=this.elem;e&&(e.off("dragenter",this.dragEnterHandler),e.off("dragover",this.dragOverHandler),e.off("dragleave",this.dragLeaveHandler),e.off("drop",this.dropHandler),this.options.disableGlobalDnd&&(r(document).off("dragover",this.dragOverHandler),r(document).off("drop",this.dropHandler)))}})}),t("runtime/html5/filepaste",["base","runtime/html5/runtime","lib/file"],function(e,t,n){return t.register("FilePaste",{init:function(){var t,n,r,i,s=this.options,o=this.elem=s.container,u=".*";if(s.accept){for(t=[],n=0,r=s.accept.length;r>n;n++)i=s.accept[n].mimeTypes,i&&t.push(i);t.length&&(u=t.join(","),u=u.replace(/,/g,"|").replace(/\*/g,".*"))}this.accept=u=new RegExp(u,"i"),this.hander=e.bindFn(this._pasteHander,this),o.on("paste",this.hander)},_pasteHander:function(e){var t,r,i,s,o,u=[],a=this.getRuid();for(e=e.originalEvent||e,t=e.clipboardData.items,s=0,o=t.length;o>s;s++)r=t[s],"file"===r.kind&&(i=r.getAsFile())&&u.push(new n(a,i));u.length&&(e.preventDefault(),e.stopPropagation(),this.trigger("paste",u))},destroy:function(){this.elem.off("paste",this.hander)}})}),t("runtime/html5/filepicker",["base","runtime/html5/runtime"],function(e,t){var n=e.$;return t.register("FilePicker",{init:function(){var e,t,r,i,s=this.getRuntime().getContainer(),o=this,u=o.owner,a=o.options,f=this.label=n(document.createElement("label")),l=this.input=n(document.createElement("input"));if(l.attr("type","file"),l.css({position:"absolute",clip:"rect(1px,1px,1px,1px)"}),l.attr("name",a.name),l.addClass("webuploader-element-invisible"),f.on("click",function(){l.trigger("click")}),f.css({opacity:0,width:"100%",height:"100%",display:"block",cursor:"pointer",background:"#ffffff"}),a.multiple&&l.attr("multiple","multiple"),a.accept&&a.accept.length>0){for(e=[],t=0,r=a.accept.length;r>t;t++)e.push(a.accept[t].mimeTypes);l.attr("accept",e.join(","))}s.append(l),s.append(f),i=function(e){u.trigger(e.type)},l.on("change",function(e){var t,r=arguments.callee;o.files=e.target.files,t=this.cloneNode(!0),t.value=null,this.parentNode.replaceChild(t,this),l.off(),l=n(t).on("change",r).on("mouseenter mouseleave",i),u.trigger("change")}),f.on("mouseenter mouseleave",i)},getFiles:function(){return this.files},destroy:function(){this.input.off(),this.label.off()}})}),t("runtime/html5/util",["base"],function(t){var n=e.createObjectURL&&e||e.URL&&URL.revokeObjectURL&&URL||e.webkitURL,r=t.noop,i=r;return n&&(r=function(){return n.createObjectURL.apply(n,arguments)},i=function(){return n.revokeObjectURL.apply(n,arguments)}),{createObjectURL:r,revokeObjectURL:i,dataURL2Blob:function(e){var t,n,r,i,s,o;for(o=e.split(","),t=~o[0].indexOf("base64")?atob(o[1]):decodeURIComponent(o[1]),r=new ArrayBuffer(t.length),n=new Uint8Array(r),i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return s=o[0].split(":")[1].split(";")[0],this.arrayBufferToBlob(r,s)},dataURL2ArrayBuffer:function(e){var t,n,r,i;for(i=e.split(","),t=~i[0].indexOf("base64")?atob(i[1]):decodeURIComponent(i[1]),n=new Uint8Array(t.length),r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n.buffer},arrayBufferToBlob:function(t,n){var r,i=e.BlobBuilder||e.WebKitBlobBuilder;return i?(r=new i,r.append(t),r.getBlob(n)):new Blob([t],n?{type:n}:{})},canvasToDataUrl:function(e,t,n){return e.toDataURL(t,n/100)},parseMeta:function(e,t){t(!1,{})},updateImageHead:function(e){return e}}}),t("runtime/html5/imagemeta",["runtime/html5/util"],function(e){var t;return t={parsers:{65505:[]},maxMetaDataSize:262144,parse:function(e,t){var n=this,r=new FileReader;r.onload=function(){t(!1,n._parse(this.result)),r=r.onload=r.onerror=null},r.onerror=function(e){t(e.message),r=r.onload=r.onerror=null},e=e.slice(0,n.maxMetaDataSize),r.readAsArrayBuffer(e.getSource())},_parse:function(e,n){if(!(e.byteLength<6)){var r,i,s,o,u=new DataView(e),a=2,f=u.byteLength-4,l=a,c={};if(65496===u.getUint16(0)){for(;f>a&&(r=u.getUint16(a),r>=65504&&65519>=r||65534===r)&&(i=u.getUint16(a+2)+2,!(a+i>u.byteLength));){if(s=t.parsers[r],!n&&s)for(o=0;o<s.length;o+=1)s[o].call(t,u,a,i,c);a+=i,l=a}l>6&&(e.slice?c.imageHead=e.slice(2,l):c.imageHead=(new Uint8Array(e)).subarray(2,l))}return c}},updateImageHead:function(e,t){var n,r,i,s=this._parse(e,!0);return i=2,s.imageHead&&(i=2+s.imageHead.byteLength),r=e.slice?e.slice(i):(new Uint8Array(e)).subarray(i),n=new Uint8Array(t.byteLength+2+r.byteLength),n[0]=255,n[1]=216,n.set(new Uint8Array(t),2),n.set(new Uint8Array(r),t.byteLength+2),n.buffer}},e.parseMeta=function(){return t.parse.apply(t,arguments)},e.updateImageHead=function(){return t.updateImageHead.apply(t,arguments)},t}),t("runtime/html5/imagemeta/exif",["base","runtime/html5/imagemeta"],function(e,t){var n={};return n.ExifMap=function(){return this},n.ExifMap.prototype.map={Orientation:274},n.ExifMap.prototype.get=function(e){return this[e]||this[this.map[e]]},n.exifTagTypes={1:{getValue:function(e,t){return e.getUint8(t)},size:1},2:{getValue:function(e,t){return String.fromCharCode(e.getUint8(t))},size:1,ascii:!0},3:{getValue:function(e,t,n){return e.getUint16(t,n)},size:2},4:{getValue:function(e,t,n){return e.getUint32(t,n)},size:4},5:{getValue:function(e,t,n){return e.getUint32(t,n)/e.getUint32(t+4,n)},size:8},9:{getValue:function(e,t,n){return e.getInt32(t,n)},size:4},10:{getValue:function(e,t,n){return e.getInt32(t,n)/e.getInt32(t+4,n)},size:8}},n.exifTagTypes[7]=n.exifTagTypes[1],n.getExifValue=function(t,r,i,s,o,u){var a,f,l,c,h,p,d=n.exifTagTypes[s];if(!d)return void e.log("Invalid Exif data: Invalid tag type.");if(a=d.size*o,f=a>4?r+t.getUint32(i+8,u):i+8,f+a>t.byteLength)return void e.log("Invalid Exif data: Invalid data offset.");if(1===o)return d.getValue(t,f,u);for(l=[],c=0;o>c;c+=1)l[c]=d.getValue(t,f+c*d.size,u);if(d.ascii){for(h="",c=0;c<l.length&&(p=l[c],"\0"!==p);c+=1)h+=p;return h}return l},n.parseExifTag=function(e,t,r,i,s){var o=e.getUint16(r,i);s.exif[o]=n.getExifValue(e,t,r,e.getUint16(r+2,i),e.getUint32(r+4,i),i)},n.parseExifTags=function(t,n,r,i,s){var o,u,a;if(r+6>t.byteLength)return void e.log("Invalid Exif data: Invalid directory offset.");if(o=t.getUint16(r,i),u=r+2+12*o,u+4>t.byteLength)return void e.log("Invalid Exif data: Invalid directory size.");for(a=0;o>a;a+=1)this.parseExifTag(t,n,r+2+12*a,i,s);return t.getUint32(u,i)},n.parseExifData=function(t,r,i,s){var o,u,a=r+10;if(1165519206===t.getUint32(r+4)){if(a+8>t.byteLength)return void e.log("Invalid Exif data: Invalid segment size.");if(0!==t.getUint16(r+8))return void e.log("Invalid Exif data: Missing byte alignment offset.");switch(t.getUint16(a)){case 18761:o=!0;break;case 19789:o=!1;break;default:return void e.log("Invalid Exif data: Invalid byte alignment marker.")}if(42!==t.getUint16(a+2,o))return void e.log("Invalid Exif data: Missing TIFF marker.");u=t.getUint32(a+4,o),s.exif=new n.ExifMap,u=n.parseExifTags(t,a,a+u,o,s)}},t.parsers[65505].push(n.parseExifData),n}),t("runtime/html5/jpegencoder",[],function(e,t,n){function r(e){function t(e){for(var t=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],n=0;64>n;n++){var r=T((t[n]*e+50)/100);1>r?r=1:r>255&&(r=255),N[R[n]]=r}for(var i=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],s=0;64>s;s++){var o=T((i[s]*e+50)/100);1>o?o=1:o>255&&(o=255),C[R[s]]=o}for(var u=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],a=0,f=0;8>f;f++)for(var l=0;8>l;l++)k[a]=1/(N[R[a]]*u[f]*u[l]*8),L[a]=1/(C[R[a]]*u[f]*u[l]*8),a++}function n(e,t){for(var n=0,r=0,i=new Array,s=1;16>=s;s++){for(var o=1;o<=e[s];o++)i[t[r]]=[],i[t[r]][0]=n,i[t[r]][1]=s,r++,n++;n*=2}return i}function r(){b=n(U,z),w=n(V,$),E=n(W,X),S=n(J,K)}function i(){for(var e=1,t=2,n=1;15>=n;n++){for(var r=e;t>r;r++)O[32767+r]=n,A[32767+r]=[],A[32767+r][1]=n,A[32767+r][0]=r;for(var i=-(t-1);-e>=i;i++)O[32767+i]=n,A[32767+i]=[],A[32767+i][1]=n,A[32767+i][0]=t-1+i;e<<=1,t<<=1}}function s(){for(var e=0;256>e;e++)q[e]=19595*e,q[e+256>>0]=38470*e,q[e+512>>0]=7471*e+32768,q[e+768>>0]=-11059*e,q[e+1024>>0]=-21709*e,q[e+1280>>0]=32768*e+8421375,q[e+1536>>0]=-27439*e,q[e+1792>>0]=-5329*e}function o(e){for(var t=e[0],n=e[1]-1;n>=0;)t&1<<n&&(P|=1<<H),n--,H--,0>H&&(255==P?(u(255),u(0)):u(P),H=7,P=0)}function u(e){D.push(I[e])}function a(e){u(e>>8&255),u(255&e)}function f(e,t){var n,r,i,s,o,u,a,f,l,c=0,h=8,p=64;for(l=0;h>l;++l){n=e[c],r=e[c+1],i=e[c+2],s=e[c+3],o=e[c+4],u=e[c+5],a=e[c+6],f=e[c+7];var d=n+f,v=n-f,m=r+a,g=r-a,y=i+u,b=i-u,w=s+o,E=s-o,S=d+w,x=d-w,T=m+y,N=m-y;e[c]=S+T,e[c+4]=S-T;var C=.707106781*(N+x);e[c+2]=x+C,e[c+6]=x-C,S=E+b,T=b+g,N=g+v;var k=.382683433*(S-N),L=.5411961*S+k,A=1.306562965*N+k,O=.707106781*T,_=v+O,D=v-O;e[c+5]=D+L,e[c+3]=D-L,e[c+1]=_+A,e[c+7]=_-A,c+=8}for(c=0,l=0;h>l;++l){n=e[c],r=e[c+8],i=e[c+16],s=e[c+24],o=e[c+32],u=e[c+40],a=e[c+48],f=e[c+56];var P=n+f,H=n-f,B=r+a,j=r-a,F=i+u,I=i-u,q=s+o,R=s-o,U=P+q,z=P-q,W=B+F,X=B-F;e[c]=U+W,e[c+32]=U-W;var V=.707106781*(X+z);e[c+16]=z+V,e[c+48]=z-V,U=R+I,W=I+j,X=j+H;var $=.382683433*(U-X),J=.5411961*U+$,K=1.306562965*X+$,Q=.707106781*W,G=H+Q,Y=H-Q;e[c+40]=Y+J,e[c+24]=Y-J,e[c+8]=G+K,e[c+56]=G-K,c++}var Z;for(l=0;p>l;++l)Z=e[l]*t[l],M[l]=Z>0?Z+.5|0:Z-.5|0;return M}function l(){a(65504),a(16),u(74),u(70),u(73),u(70),u(0),u(1),u(1),u(0),a(1),a(1),u(0),u(0)}function c(e,t){a(65472),a(17),u(8),a(t),a(e),u(3),u(1),u(17),u(0),u(2),u(17),u(1),u(3),u(17),u(1)}function h(){a(65499),a(132),u(0);for(var e=0;64>e;e++)u(N[e]);u(1);for(var t=0;64>t;t++)u(C[t])}function p(){a(65476),a(418),u(0);for(var e=0;16>e;e++)u(U[e+1]);for(var t=0;11>=t;t++)u(z[t]);u(16);for(var n=0;16>n;n++)u(W[n+1]);for(var r=0;161>=r;r++)u(X[r]);u(1);for(var i=0;16>i;i++)u(V[i+1]);for(var s=0;11>=s;s++)u($[s]);u(17);for(var o=0;16>o;o++)u(J[o+1]);for(var f=0;161>=f;f++)u(K[f])}function d(){a(65498),a(12),u(3),u(1),u(0),u(2),u(17),u(3),u(17),u(0),u(63),u(0)}function v(e,t,n,r,i){for(var s,u=i[0],a=i[240],l=16,c=63,h=64,p=f(e,t),d=0;h>d;++d)_[R[d]]=p[d];var v=_[0]-n;n=_[0],0==v?o(r[0]):(s=32767+v,o(r[O[s]]),o(A[s]));for(var m=63;m>0&&0==_[m];m--);if(0==m)return o(u),n;for(var g,y=1;m>=y;){for(var b=y;0==_[y]&&m>=y;++y);var w=y-b;if(w>=l){g=w>>4;for(var E=1;g>=E;++E)o(a);w=15&w}s=32767+_[y],o(i[(w<<4)+O[s]]),o(A[s]),y++}return m!=c&&o(u),n}function m(){for(var e=String.fromCharCode,t=0;256>t;t++)I[t]=e(t)}function g(e){if(0>=e&&(e=1),e>100&&(e=100),x!=e){var n=0;n=50>e?Math.floor(5e3/e):Math.floor(200-2*e),t(n),x=e}}function y(){e||(e=50),m(),r(),i(),s(),g(e)}var b,w,E,S,x,T=(Math.round,Math.floor),N=new Array(64),C=new Array(64),k=new Array(64),L=new Array(64),A=new Array(65535),O=new Array(65535),M=new Array(64),_=new Array(64),D=[],P=0,H=7,B=new Array(64),j=new Array(64),F=new Array(64),I=new Array(256),q=new Array(2048),R=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],U=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],z=[0,1,2,3,4,5,6,7,8,9,10,11],W=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],X=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],V=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],$=[0,1,2,3,4,5,6,7,8,9,10,11],J=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],K=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];this.encode=function(e,t){t&&g(t),D=new Array,P=0,H=7,a(65496),l(),h(),c(e.width,e.height),p(),d();var n=0,r=0,i=0;P=0,H=7,this.encode.displayName="_encode_";for(var s,u,f,m,y,x,T,N,C,A=e.data,O=e.width,M=e.height,_=4*O,I=0;M>I;){for(s=0;_>s;){for(y=_*I+s,x=y,T=-1,N=0,C=0;64>C;C++)N=C>>3,T=4*(7&C),x=y+N*_+T,I+N>=M&&(x-=_*(I+1+N-M)),s+T>=_&&(x-=s+T-_+4),u=A[x++],f=A[x++],m=A[x++],B[C]=(q[u]+q[f+256>>0]+q[m+512>>0]>>16)-128,j[C]=(q[u+768>>0]+q[f+1024>>0]+q[m+1280>>0]>>16)-128,F[C]=(q[u+1280>>0]+q[f+1536>>0]+q[m+1792>>0]>>16)-128;n=v(B,k,n,b,E),r=v(j,L,r,w,S),i=v(F,L,i,w,S),s+=32}I+=8}if(H>=0){var R=[];R[1]=H+1,R[0]=(1<<H+1)-1,o(R)}a(65497);var U="data:image/jpeg;base64,"+btoa(D.join(""));return D=[],U},y()}return r.encode=function(e,t){var n=new r(t);return n.encode(e)},r}),t("runtime/html5/androidpatch",["runtime/html5/util","runtime/html5/jpegencoder","base"],function(e,t,n){var r,i=e.canvasToDataUrl;e.canvasToDataUrl=function(e,s,o){var u,a,f,l,c;return n.os.android?("image/jpeg"===s&&"undefined"==typeof r&&(l=i.apply(null,arguments),c=l.split(","),l=~c[0].indexOf("base64")?atob(c[1]):decodeURIComponent(c[1]),l=l.substring(0,2),r=255===l.charCodeAt(0)&&216===l.charCodeAt(1)),"image/jpeg"!==s||r?i.apply(null,arguments):(a=e.width,f=e.height,u=e.getContext("2d"),t.encode(u.getImageData(0,0,a,f),o))):i.apply(null,arguments)}}),t("runtime/html5/image",["base","runtime/html5/runtime","runtime/html5/util"],function(e,t,n){var r="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs%3D";return t.register("Image",{modified:!1,init:function(){var e=this,t=new Image;t.onload=function(){e._info={type:e.type,width:this.width,height:this.height},e._metas||"image/jpeg"!==e.type?e.owner.trigger("load"):n.parseMeta(e._blob,function(t,n){e._metas=n,e.owner.trigger("load")})},t.onerror=function(){e.owner.trigger("error")},e._img=t},loadFromBlob:function(e){var t=this,r=t._img;t._blob=e,t.type=e.type,r.src=n.createObjectURL(e.getSource()),t.owner.once("load",function(){n.revokeObjectURL(r.src)})},resize:function(e,t){var n=this._canvas||(this._canvas=document.createElement("canvas"));this._resize(this._img,n,e,t),this._blob=null,this.modified=!0,this.owner.trigger("complete","resize")},crop:function(e,t,n,r,i){var s=this._canvas||(this._canvas=document.createElement("canvas")),o=this.options,u=this._img,a=u.naturalWidth,f=u.naturalHeight,l=this.getOrientation();i=i||1,s.width=n,s.height=r,o.preserveHeaders||this._rotate2Orientaion(s,l),this._renderImageToCanvas(s,u,-e,-t,a*i,f*i),this._blob=null,this.modified=!0,this.owner.trigger("complete","crop")},getAsBlob:function(e){var t,r=this._blob,i=this.options;if(e=e||this.type,this.modified||this.type!==e){if(t=this._canvas,"image/jpeg"===e){if(r=n.canvasToDataUrl(t,e,i.quality),i.preserveHeaders&&this._metas&&this._metas.imageHead)return r=n.dataURL2ArrayBuffer(r),r=n.updateImageHead(r,this._metas.imageHead),r=n.arrayBufferToBlob(r,e)}else r=n.canvasToDataUrl(t,e);r=n.dataURL2Blob(r)}return r},getAsDataUrl:function(e){var t=this.options;return e=e||this.type,"image/jpeg"===e?n.canvasToDataUrl(this._canvas,e,t.quality):this._canvas.toDataURL(e)},getOrientation:function(){return this._metas&&this._metas.exif&&this._metas.exif.get("Orientation")||1},info:function(e){return e?(this._info=e,this):this._info},meta:function(e){return e?(this._meta=e,this):this._meta},destroy:function(){var e=this._canvas;this._img.onload=null,e&&(e.getContext("2d").clearRect(0,0,e.width,e.height),e.width=e.height=0,this._canvas=null),this._img.src=r,this._img=this._blob=null},_resize:function(e,t,n,r){var i,s,o,u,a,f=this.options,l=e.width,c=e.height,h=this.getOrientation();~[5,6,7,8].indexOf(h)&&(n^=r,r^=n,n^=r),i=Math[f.crop?"max":"min"](n/l,r/c),f.allowMagnify||(i=Math.min(1,i)),s=l*i,o=c*i,f.crop?(t.width=n,t.height=r):(t.width=s,t.height=o),u=(t.width-s)/2,a=(t.height-o)/2,f.preserveHeaders||this._rotate2Orientaion(t,h),this._renderImageToCanvas(t,e,u,a,s,o)},_rotate2Orientaion:function(e,t){var n=e.width,r=e.height,i=e.getContext("2d");switch(t){case 5:case 6:case 7:case 8:e.width=r,e.height=n}switch(t){case 2:i.translate(n,0),i.scale(-1,1);break;case 3:i.translate(n,r),i.rotate(Math.PI);break;case 4:i.translate(0,r),i.scale(1,-1);break;case 5:i.rotate(.5*Math.PI),i.scale(1,-1);break;case 6:i.rotate(.5*Math.PI),i.translate(0,-r);break;case 7:i.rotate(.5*Math.PI),i.translate(n,-r),i.scale(-1,1);break;case 8:i.rotate(-0.5*Math.PI),i.translate(-n,0)}},_renderImageToCanvas:function(){function t(e,t,n){var r,i,s,o=document.createElement("canvas"),u=o.getContext("2d"),a=0,f=n,l=n;for(o.width=1,o.height=n,u.drawImage(e,0,0),r=u.getImageData(0,0,1,n).data;l>a;)i=r[4*(l-1)+3],0===i?f=l:a=l,l=f+a>>1;return s=l/n,0===s?1:s}function n(e){var t,n,r=e.naturalWidth,i=e.naturalHeight;return r*i>1048576?(t=document.createElement("canvas"),t.width=t.height=1,n=t.getContext("2d"),n.drawImage(e,-r+1,0),0===n.getImageData(0,0,1,1).data[3]):!1}return e.os.ios?e.os.ios>=7?function(e,n,r,i,s,o){var u=n.naturalWidth,a=n.naturalHeight,f=t(n,u,a);return e.getContext("2d").drawImage(n,0,0,u*f,a*f,r,i,s,o)}:function(e,r,i,s,o,u){var a,f,l,c,h,p,d,v=r.naturalWidth,m=r.naturalHeight,g=e.getContext("2d"),y=n(r),b="image/jpeg"===this.type,w=1024,E=0,S=0;for(y&&(v/=2,m/=2),g.save(),a=document.createElement("canvas"),a.width=a.height=w,f=a.getContext("2d"),l=b?t(r,v,m):1,c=Math.ceil(w*o/v),h=Math.ceil(w*u/m/l);m>E;){for(p=0,d=0;v>p;)f.clearRect(0,0,w,w),f.drawImage(r,-p,-E),g.drawImage(a,0,0,w,w,i+d,s+S,c,h),p+=w,d+=c;E+=w,S+=h}g.restore(),a=f=null}:function(t){var n=e.slice(arguments,1),r=t.getContext("2d");r.drawImage.apply(r,n)}}()})}),t("runtime/html5/transport",["base","runtime/html5/runtime"],function(e,t){var n=e.noop,r=e.$;return t.register("Transport",{init:function(){this._status=0,this._response=null},send:function(){var t,n,s,o=this.owner,u=this.options,a=this._initAjax(),f=o._blob,l=u.server;u.sendAsBinary?(l+=(/\?/.test(l)?"&":"?")+r.param(o._formData),n=f.getSource()):(t=new FormData,r.each(o._formData,function(e,n){t.append(e,n)}),t.append(u.fileVal,f.getSource(),u.filename||o._formData.name||"")),u.withCredentials&&"withCredentials"in a?(a.open(u.method,l,!0),a.withCredentials=!0):a.open(u.method,l),this._setRequestHeader(a,u.headers),n?(a.overrideMimeType&&a.overrideMimeType("application/octet-stream"),e.os.android?(s=new FileReader,s.onload=function(){a.send(this.result),s=s.onload=null},s.readAsArrayBuffer(n)):a.send(n)):a.send(t)},getResponse:function(){return this._response},getResponseAsJson:function(){return this._parseJson(this._response)},getStatus:function(){return this._status},abort:function(){var e=this._xhr;e&&(e.upload.onprogress=n,e.onreadystatechange=n,e.abort(),this._xhr=e=null)},destroy:function(){this.abort()},_initAjax:function(){var e=this,t=new XMLHttpRequest,r=this.options;return!r.withCredentials||"withCredentials"in t||"undefined"==typeof XDomainRequest||(t=new XDomainRequest),t.upload.onprogress=function(t){var n=0;return t.lengthComputable&&(n=t.loaded/t.total),e.trigger("progress",n)},t.onreadystatechange=function(){return 4===t.readyState?(t.upload.onprogress=n,t.onreadystatechange=n,e._xhr=null,e._status=t.status,t.status>=200&&t.status<300?(e._response=t.responseText,e.trigger("load")):t.status>=500&&t.status<600?(e._response=t.responseText,e.trigger("error","server")):e.trigger("error",e._status?"http":"abort")):void 0},e._xhr=t,t},_setRequestHeader:function(e,t){r.each(t,function(t,n){e.setRequestHeader(t,n)})},_parseJson:function(e){var t;try{t=JSON.parse(e)}catch(n){t={}}return t}})}),t("runtime/html5/md5",["runtime/html5/runtime"],function(e){var t=function(e,t){return e+t&4294967295},n=function(e,n,r,i,s,o){return n=t(t(n,e),t(i,o)),t(n<<s|n>>>32-s,r)},r=function(e,t,r,i,s,o,u){return n(t&r|~t&i,e,t,s,o,u)},i=function(e,t,r,i,s,o,u){return n(t&i|r&~i,e,t,s,o,u)},s=function(e,t,r,i,s,o,u){return n(t^r^i,e,t,s,o,u)},o=function(e,t,r,i,s,o,u){return n(r^(t|~i),e,t,s,o,u)},u=function(e,n){var u=e[0],a=e[1],f=e[2],l=e[3];u=r(u,a,f,l,n[0],7,-680876936),l=r(l,u,a,f,n[1],12,-389564586),f=r(f,l,u,a,n[2],17,606105819),a=r(a,f,l,u,n[3],22,-1044525330),u=r(u,a,f,l,n[4],7,-176418897),l=r(l,u,a,f,n[5],12,1200080426),f=r(f,l,u,a,n[6],17,-1473231341),a=r(a,f,l,u,n[7],22,-45705983),u=r(u,a,f,l,n[8],7,1770035416),l=r(l,u,a,f,n[9],12,-1958414417),f=r(f,l,u,a,n[10],17,-42063),a=r(a,f,l,u,n[11],22,-1990404162),u=r(u,a,f,l,n[12],7,1804603682),l=r(l,u,a,f,n[13],12,-40341101),f=r(f,l,u,a,n[14],17,-1502002290),a=r(a,f,l,u,n[15],22,1236535329),u=i(u,a,f,l,n[1],5,-165796510),l=i(l,u,a,f,n[6],9,-1069501632),f=i(f,l,u,a,n[11],14,643717713),a=i(a,f,l,u,n[0],20,-373897302),u=i(u,a,f,l,n[5],5,-701558691),l=i(l,u,a,f,n[10],9,38016083),f=i(f,l,u,a,n[15],14,-660478335),a=i(a,f,l,u,n[4],20,-405537848),u=i(u,a,f,l,n[9],5,568446438),l=i(l,u,a,f,n[14],9,-1019803690),f=i(f,l,u,a,n[3],14,-187363961),a=i(a,f,l,u,n[8],20,1163531501),u=i(u,a,f,l,n[13],5,-1444681467),l=i(l,u,a,f,n[2],9,-51403784),f=i(f,l,u,a,n[7],14,1735328473),a=i(a,f,l,u,n[12],20,-1926607734),u=s(u,a,f,l,n[5],4,-378558),l=s(l,u,a,f,n[8],11,-2022574463),f=s(f,l,u,a,n[11],16,1839030562),a=s(a,f,l,u,n[14],23,-35309556),u=s(u,a,f,l,n[1],4,-1530992060),l=s(l,u,a,f,n[4],11,1272893353),f=s(f,l,u,a,n[7],16,-155497632),a=s(a,f,l,u,n[10],23,-1094730640),u=s(u,a,f,l,n[13],4,681279174),l=s(l,u,a,f,n[0],11,-358537222),f=s(f,l,u,a,n[3],16,-722521979),a=s(a,f,l,u,n[6],23,76029189),u=s(u,a,f,l,n[9],4,-640364487),l=s(l,u,a,f,n[12],11,-421815835),f=s(f,l,u,a,n[15],16,530742520),a=s(a,f,l,u,n[2],23,-995338651),u=o(u,a,f,l,n[0],6,-198630844),l=o(l,u,a,f,n[7],10,1126891415),f=o(f,l,u,a,n[14],15,-1416354905),a=o(a,f,l,u,n[5],21,-57434055),u=o(u,a,f,l,n[12],6,1700485571),l=o(l,u,a,f,n[3],10,-1894986606),f=o(f,l,u,a,n[10],15,-1051523),a=o(a,f,l,u,n[1],21,-2054922799),u=o(u,a,f,l,n[8],6,1873313359),l=o(l,u,a,f,n[15],10,-30611744),f=o(f,l,u,a,n[6],15,-1560198380),a=o(a,f,l,u,n[13],21,1309151649),u=o(u,a,f,l,n[4],6,-145523070),l=o(l,u,a,f,n[11],10,-1120210379),f=o(f,l,u,a,n[2],15,718787259),a=o(a,f,l,u,n[9],21,-343485551),e[0]=t(u,e[0]),e[1]=t(a,e[1]),e[2]=t(f,e[2]),e[3]=t(l,e[3])},a=function(e){var t,n=[];for(t=0;64>t;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n},f=function(e){var t,n=[];for(t=0;64>t;t+=4)n[t>>2]=e[t]+(e[t+1]<<8)+(e[t+2]<<16)+(e[t+3]<<24);return n},l=function(e){var t,n,r,i,s,o,f=e.length,l=[1732584193,-271733879,-1732584194,271733878];for(t=64;f>=t;t+=64)u(l,a(e.substring(t-64,t)));for(e=e.substring(t-64),n=e.length,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;n>t;t+=1)r[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(r[t>>2]|=128<<(t%4<<3),t>55)for(u(l,r),t=0;16>t;t+=1)r[t]=0;return i=8*f,i=i.toString(16).match(/(.*?)(.{0,8})$/),s=parseInt(i[2],16),o=parseInt(i[1],16)||0,r[14]=s,r[15]=o,u(l,r),l},c=function(e){var t,n,r,i,s,o,a=e.length,l=[1732584193,-271733879,-1732584194,271733878];for(t=64;a>=t;t+=64)u(l,f(e.subarray(t-64,t)));for(e=a>t-64?e.subarray(t-64):new Uint8Array(0),n=e.length,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;n>t;t+=1)r[t>>2]|=e[t]<<(t%4<<3);if(r[t>>2]|=128<<(t%4<<3),t>55)for(u(l,r),t=0;16>t;t+=1)r[t]=0;return i=8*a,i=i.toString(16).match(/(.*?)(.{0,8})$/),s=parseInt(i[2],16),o=parseInt(i[1],16)||0,r[14]=s,r[15]=o,u(l,r),l},h=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],p=function(e){var t,n="";for(t=0;4>t;t+=1)n+=h[e>>8*t+4&15]+h[e>>8*t&15];return n},d=function(e){var t;for(t=0;t<e.length;t+=1)e[t]=p(e[t]);return e.join("")},v=function(e){return d(l(e))},m=function(){this.reset()};return"5d41402abc4b2a76b9719d911017c592"!==v("hello")&&(t=function(e,t){var n=(65535&e)+(65535&t),r=(e>>16)+(t>>16)+(n>>16);return r<<16|65535&n}),m.prototype.append=function(e){return/[\u0080-\uFFFF]/.test(e)&&(e=unescape(encodeURIComponent(e))),this.appendBinary(e),this},m.prototype.appendBinary=function(e){this._buff+=e,this._length+=e.length;var t,n=this._buff.length;for(t=64;n>=t;t+=64)u(this._state,a(this._buff.substring(t-64,t)));return this._buff=this._buff.substr(t-64),this},m.prototype.end=function(e){var t,n,r=this._buff,i=r.length,s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;i>t;t+=1)s[t>>2]|=r.charCodeAt(t)<<(t%4<<3);return this._finish(s,i),n=e?this._state:d(this._state),this.reset(),n},m.prototype._finish=function(e,t){var n,r,i,s=t;if(e[s>>2]|=128<<(s%4<<3),s>55)for(u(this._state,e),s=0;16>s;s+=1)e[s]=0;n=8*this._length,n=n.toString(16).match(/(.*?)(.{0,8})$/),r=parseInt(n[2],16),i=parseInt(n[1],16)||0,e[14]=r,e[15]=i,u(this._state,e)},m.prototype.reset=function(){return this._buff="",this._length=0,this._state=[1732584193,-271733879,-1732584194,271733878],this},m.prototype.destroy=function(){delete this._state,delete this._buff,delete this._length},m.hash=function(e,t){/[\u0080-\uFFFF]/.test(e)&&(e=unescape(encodeURIComponent(e)));var n=l(e);return t?n:d(n)},m.hashBinary=function(e,t){var n=l(e);return t?n:d(n)},m.ArrayBuffer=function(){this.reset()},m.ArrayBuffer.prototype.append=function(e){var t,n=this._concatArrayBuffer(this._buff,e),r=n.length;for(this._length+=e.byteLength,t=64;r>=t;t+=64)u(this._state,f(n.subarray(t-64,t)));return this._buff=r>t-64?n.subarray(t-64):new Uint8Array(0),this},m.ArrayBuffer.prototype.end=function(e){var t,n,r=this._buff,i=r.length,s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;i>t;t+=1)s[t>>2]|=r[t]<<(t%4<<3);return this._finish(s,i),n=e?this._state:d(this._state),this.reset(),n},m.ArrayBuffer.prototype._finish=m.prototype._finish,m.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._state=[1732584193,-271733879,-1732584194,271733878],this},m.ArrayBuffer.prototype.destroy=m.prototype.destroy,m.ArrayBuffer.prototype._concatArrayBuffer=function(e,t){var n=e.length,r=new Uint8Array(n+t.byteLength);return r.set(e),r.set(new Uint8Array(t),n),r},m.ArrayBuffer.hash=function(e,t){var n=c(new Uint8Array(e));return t?n:d(n)},e.register("Md5",{init:function(){},loadFromBlob:function(e){var t,n,r=e.getSource(),i=2097152,s=Math.ceil(r.size/i),o=0,u=this.owner,a=new m.ArrayBuffer,f=this,l=r.mozSlice||r.webkitSlice||r.slice;n=new FileReader,(t=function(){var c,h;c=o*i,h=Math.min(c+i,r.size),n.onload=function(t){a.append(t.target.result),u.trigger("progress",{total:e.size,loaded:h})},n.onloadend=function(){n.onloadend=n.onload=null,++o<s?setTimeout(t,1):setTimeout(function(){u.trigger("load"),f.result=a.end(),t=e=r=a=null,u.trigger("complete")},50)},n.readAsArrayBuffer(l.call(r,c,h))})()},getResult:function(){return this.result}})}),t("runtime/flash/runtime",["base","runtime/runtime","runtime/compbase"],function(t,n,r){function i(){var e;try{e=navigator.plugins["Shockwave Flash"],e=e.description}catch(t){try{e=(new ActiveXObject("ShockwaveFlash.ShockwaveFlash")).GetVariable("$version")}catch(n){e="0.0"}}return e=e.match(/\d+/g),parseFloat(e[0]+"."+e[1],10)}function s(){function r(e,t){var n,r,i=e.type||e;n=i.split("::"),r=n[0],i=n[1],"Ready"===i&&r===f.uid?f.trigger("ready"):s[r]&&s[r].trigger(i.toLowerCase(),e,t)}var i={},s={},o=this.destroy,f=this,c=t.guid("webuploader_");n.apply(f,arguments),f.type=u,f.exec=function(e,n){var r,o=this,u=o.uid,c=t.slice(arguments,2);return s[u]=o,a[e]&&(i[u]||(i[u]=new a[e](o,f)),r=i[u],r[n])?r[n].apply(r,c):f.flashExec.apply(o,arguments)},e[c]=function(){var e=arguments;setTimeout(function(){r.apply(null,e)},1)},this.jsreciver=c,this.destroy=function(){return o&&o.apply(this,arguments)},this.flashExec=function(e,n){var r=f.getFlash(),i=t.slice(arguments,2);return r.exec(this.uid,e,n,i)}}var o=t.$,u="flash",a={};return t.inherits(n,{constructor:s,init:function(){var e,n=this.getContainer(),r=this.options;n.css({position:"absolute",top:"-8px",left:"-8px",width:"9px",height:"9px",overflow:"hidden"}),e='<object id="'+this.uid+'" type="application/x-shockwave-flash" data="'+r.swf+'" ',t.browser.ie&&(e+='classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" '),e+='width="100%" height="100%" style="outline:0"><param name="movie" value="'+r.swf+'" /><param name="flashvars" value="uid='+this.uid+"&jsreciver="+this.jsreciver+'" /><param name="wmode" value="transparent" /><param name="allowscriptaccess" value="always" /></object>',n.html(e)},getFlash:function(){return this._flash?this._flash:(this._flash=o("#"+this.uid).get(0),this._flash)}}),s.register=function(e,n){return n=a[e]=t.inherits(r,o.extend({flashExec:function(){var e=this.owner,t=this.getRuntime();return t.flashExec.apply(e,arguments)}},n))},i()>=11.4&&n.addRuntime(u,s),s}),t("runtime/flash/filepicker",["base","runtime/flash/runtime"],function(e,t){var n=e.$;return t.register("FilePicker",{init:function(e){var t,r,i=n.extend({},e);for(t=i.accept&&i.accept.length,r=0;t>r;r++)i.accept[r].title||(i.accept[r].title="Files");delete i.button,delete i.id,delete i.container,this.flashExec("FilePicker","init",i)},destroy:function(){this.flashExec("FilePicker","destroy")}})}),t("runtime/flash/image",["runtime/flash/runtime"],function(e){return e.register("Image",{loadFromBlob:function(e){var t=this.owner;t.info()&&this.flashExec("Image","info",t.info()),t.meta()&&this.flashExec("Image","meta",t.meta()),this.flashExec("Image","loadFromBlob",e.uid)}})}),t("runtime/flash/transport",["base","runtime/flash/runtime","runtime/client"],function(t,n,r){var i=t.$;return n.register("Transport",{init:function(){this._status=0,this._response=null,this._responseJson=null},send:function(){var e,t=this.owner,n=this.options,r=this._initAjax(),s=t._blob,o=n.server;r.connectRuntime(s.ruid),n.sendAsBinary?(o+=(/\?/.test(o)?"&":"?")+i.param(t._formData),e=s.uid):(i.each(t._formData,function(e,t){r.exec("append",e,t)}),r.exec("appendBlob",n.fileVal,s.uid,n.filename||t._formData.name||"")),this._setRequestHeader(r,n.headers),r.exec("send",{method:n.method,url:o,forceURLStream:n.forceURLStream,mimeType:"application/octet-stream"},e)},getStatus:function(){return this._status},getResponse:function(){return this._response||""},getResponseAsJson:function(){return this._responseJson},abort:function(){var e=this._xhr;e&&(e.exec("abort"),e.destroy(),this._xhr=e=null)},destroy:function(){this.abort()},_initAjax:function(){var t=this,n=new r("XMLHttpRequest");return n.on("uploadprogress progress",function(e){var n=e.loaded/e.total;return n=Math.min(1,Math.max(0,n)),t.trigger("progress",n)}),n.on("load",function(){var r,i=n.exec("getStatus"),s=!1,o="";return n.off(),t._xhr=null,i>=200&&300>i?s=!0:i>=500&&600>i?(s=!0,o="server"):o="http",s&&(t._response=n.exec("getResponse"),t._response=decodeURIComponent(t._response),r=e.JSON&&e.JSON.parse||function(e){try{return(new Function("return "+e)).call()}catch(t){return{}}},t._responseJson=t._response?r(t._response):{}),n.destroy(),n=null,o?t.trigger("error",o):t.trigger("load")}),n.on("error",function(){n.off(),t._xhr=null,t.trigger("error","http")}),t._xhr=n,n},_setRequestHeader:function(e,t){i.each(t,function(t,n){e.exec("setRequestHeader",t,n)})}})}),t("runtime/flash/blob",["runtime/flash/runtime","lib/blob"],function(e,t){return e.register("Blob",{slice:function(e,n){var r=this.flashExec("Blob","slice",e,n);return new t(r.uid,r)}})}),t("runtime/flash/md5",["runtime/flash/runtime"],function(e){return e.register("Md5",{init:function(){},loadFromBlob:function(e){return this.flashExec("Md5","loadFromBlob",e.uid)}})}),t("preset/all",["base","widgets/filednd","widgets/filepaste","widgets/filepicker","widgets/image","widgets/queue","widgets/runtime","widgets/upload","widgets/validator","widgets/md5","runtime/html5/blob","runtime/html5/dnd","runtime/html5/filepaste","runtime/html5/filepicker","runtime/html5/imagemeta/exif","runtime/html5/androidpatch","runtime/html5/image","runtime/html5/transport","runtime/html5/md5","runtime/flash/filepicker","runtime/flash/image","runtime/flash/transport","runtime/flash/blob","runtime/flash/md5"],function(e){return e}),t("widgets/log",["base","uploader","widgets/widget"],function(e,t){function n(e){var t=i.extend({},r,e),n=s.replace(/^(.*)\?/,"$1"+i.param(t)),o=new Image;o.src=n}var r,i=e.$,s=" http://static.tieba.baidu.com/tb/pms/img/st.gif??",o=(location.hostname||location.host||"protected").toLowerCase(),u=o&&/baidu/i
.exec(o);if(u)return r={dv:3,master:"webuploader",online:/test/.exec(o)?0:1,module:"",product:o,type:0},t.register({name:"log",init:function(){var e=this.owner,t=0,r=0;e.on("error",function(e){n({type:2,c_error_code:e})}).on("uploadError",function(e,t){n({type:2,c_error_code:"UPLOAD_ERROR",c_reason:""+t})}).on("uploadComplete",function(e){t++,r+=e.size}).on("uploadFinished",function(){n({c_count:t,c_size:r}),t=r=0}),n({c_usage:1})}})}),t("webuploader",["preset/all","widgets/log"],function(e){return e}),n("webuploader")})},function(e,t,n){"use strict";function r(){var e;try{e=navigator.plugins["Shockwave Flash"],e=e.description}catch(t){try{e=(new ActiveXObject("ShockwaveFlash.ShockwaveFlash")).GetVariable("$version")}catch(n){e="0.0"}}return e=e.match(/\d+/g),parseFloat(e[0]+"."+e[1],10)}function i(e){var t=$(e.pick.id||"#filePicker"),n=r();return!s.Uploader.support("flash")&&s.browser.ie?void (n?!function(t){window.expressinstallcallback=function(e){switch(e){case"Download.Cancelled":alert("\u60a8\u53d6\u6d88\u4e86\u66f4\u65b0\uff01");break;case"Download.Failed":alert("\u5b89\u88c5\u5931\u8d25");break;default:alert("\u5b89\u88c5\u5df2\u6210\u529f\uff0c\u8bf7\u5237\u65b0\uff01")}delete window.expressinstallcallback};var n=e.swf||"http://s1.pdim.gs/static/55803010f95d258a.swf",r='<object type="application/x-shockwave-flash" data="'+n+'" ';s.browser.ie&&(r+='classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" '),r+='width="100%" height="100%" style="outline:0"><param name="movie" value="'+n+'" /><param name="wmode" value="transparent" /><param name="allowscriptaccess" value="always" /></object>',t.html(r)}(t):t.html('<a href="http://www.adobe.com/go/getflashplayer" target="_blank" border="0"><img alt="get flash player" src="http://www.adobe.com/macromedia/style_guide/images/160x41_Get_Flash_Player.jpg" /></a>')):s.Uploader.support()?void 0:void alert("Web Uploader \u4e0d\u652f\u6301\u60a8\u7684\u6d4f\u89c8\u5668\uff01")}var s=n(216);e.exports={check:i}},function(e,t,n){var r=n(10);e.exports=(r["default"]||r).template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,r){return'<form class="room-report-form" action="/">\r\n    <div class="report-form-item">\r\n      <label class="report-form-item-title">\u623f\u95f4\u53f7\uff1a</label>\r\n      <input type="text" name="roomId" placeholder="\u4e3e\u62a5\u623f\u95f4\u53f7">\r\n    </div>\r\n    <div class="report-form-item">\r\n      <label class="report-form-item-title">\u4e3e\u62a5\u539f\u56e0\uff1a</label>\r\n      <label class="report-radio-wrap"><input type="radio" name="reason" value="1" checked="true">\u653f\u6cbb\u66b4\u529b\u53cd\u52a8</label>\r\n      <label class="report-radio-wrap"><input type="radio" name="reason" value="2">\u8272\u60c5\u4f4e\u4fd7\u64e6\u8fb9</label>\r\n      <label class="report-radio-wrap"><input type="radio" name="reason" value="3">\u5176\u4ed6</label>\r\n    </div>\r\n    <div class="report-form-item">\r\n      <label class="report-form-item-title">\u8be6\u7ec6\u8bf4\u660e\uff1a</label>\r\n      <textarea name="reportDetail" placeholder="\u8be6\u7ec6\u63cf\u8ff0\u88ab\u4e3e\u62a5\u4e3b\u64ad\u7684\u8fdd\u89c4\u884c\u4e3a"></textarea>\r\n    </div>\r\n    <div class="report-form-item clearfix">\r\n      <label class="report-form-item-title">\u622a\u56fe\u4e0a\u4f20\uff1a</label>\r\n      <div id="filePicker" class="report-form-screenshot-upload">\u4e0a\u4f20\u56fe\u7247</div>\r\n      <input type="hidden" name="screenshotUrl">\r\n      <span class="report-form-screenshot-notice">\u672a\u4e0a\u4f20\u6587\u4ef6</span>\r\n    </div>\r\n    <div class="report-form-item">\r\n      <label class="report-form-item-title">\u4e3e\u62a5\u4ebaQQ\uff1a</label>\r\n      <input type="text" name="reporterQQ">\r\n    </div>\r\n    <input type="hidden" name="rid">\r\n    <div class="report-form-btns">\r\n      <a class="report-submit-btn" href="javascript:;">\u786e\u5b9a</a>\r\n    </div>\r\n</form>'},useData:!0})},function(e,t){"use strict";function n(e,t,n){return t=t||{},n=n||{},$.ajax(e,$.extend({},n,{method:"POST",data:t,dataType:"json"}))}function r(e,t){var r=$.Deferred();return n(i+"/report/add",$.extend({},e,t)).done(function(e){e&&0==e.errno?r.resolve(e):r.reject(e.errmsg)}).fail(function(){r.reject("\u4e3e\u62a5\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5")}),r.promise()}var i="http://api.report.panda.tv";e.exports={reportRoom:r}},function(e,t){"use strict";function n(e){return""==e}function r(e,t){return e.length>t}function i(e){var t=$.Deferred(),n=/^[1-9][0-9]*$/;return n.test(e)?t.resolve(null):t.reject(a.roomNo),t.promise()}function s(e){var t=$.Deferred();return n(e)?t.reject(a.detailNull):r(e,100)?t.reject(a.detailLen):t.resolve(null),t.promise()}function o(e){var t=$.Deferred();return n(e)?t.reject(a.picNull):t.resolve(null),t.promise()}function u(e){var t=$.Deferred(),r=/^[1-9][0-9]{4,9}$/;return n(e)?t.reject(a.qqNull):r.test(e)?t.resolve(null):t.reject(a.qqInvalid),t.promise()}var a={roomNo:"\u4e3e\u62a5\u7684\u623f\u95f4\u53f7\u4e0d\u5408\u6cd5",detailNull:"\u8be6\u7ec6\u8bf4\u660e\u4e0d\u80fd\u4e3a\u7a7a",detailLen:"\u8be6\u7ec6\u8bf4\u660e\u8d85\u8fc7\u4e86100\u5b57",picNull:"\u8bf7\u5148\u4e0a\u4f20\u622a\u56fe",qqNull:"\u4e3e\u62a5\u4ebaQQ\u53f7\u7801\u4e0d\u80fd\u4e3a\u7a7a",qqInvalid:"\u4e3e\u62a5\u4ebaQQ\u53f7\u7801\u4e0d\u5408\u6cd5"};e.exports={checkEmpty:n,checkLen:r,checkRoomId:i,checkDetail:s,checkScreenshot:o,checkQQ:u}},function(e,t,n){var r=n(10);e.exports=(r["default"]||r).template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,r){var i,s=t.helperMissing,o="function",u=this.escapeExpression;return'<div class="sidebar-split-line"></div>\r\n<ul class="sidebar-list sidebar-list-3 clearfix">\r\n  <li>\r\n    <a href="/help" target="_blank">\u76f4\u64ad\u6307\u5bfc</a>\r\n  </li>\r\n  <li>\r\n    <a href="'+u((i=null!=(i=t.serviceUrl||(null!=e?e.serviceUrl:e))?i:s,typeof i===o?i.call(e,{name:"serviceUrl",hash:{},data:r}):i))+'" target="_blank">\u5ba2\u670d\u652f\u6301</a>\r\n  </li>\r\n  <li>\r\n    <a class="sidebar-room-report" href="'+u((i=null!=(i=t.serviceUrl||(null!=e?e.serviceUrl:e))?i:s,typeof i===o?i.call(e,{name:"serviceUrl",hash:{},data:r}):i))+'" target="_blank">\u623f\u95f4\u4e3e\u62a5</a>\r\n  </li>\r\n</ul>\r\n'},useData:!0})},function(e,t,n){"use strict";function r(e,t){return f=$(e),l=t||{},$.when(i()).then(s)}function i(){var e=l.userinfo;e&&e.rid>0&&(e.isLogin=!0),f.html(p($.extend(e,{serviceUrl:"http://wpa.b.qq.com/cgi/wpa.php?ln=1&key=XzgwMDA0MjgyOF8zMjA4NzZfODAwMDQyODI4XzJf"}))),u()}function s(){f.on("click",".sidebar-userinfo-login-btn",o),c.on("sidebar-scroller-need-update",a)}function o(e){e.preventDefault(),h.login()}function u(){f.find(".sidebar-collapse-content").perfectScrollbar({suppressScrollX:!1})}function a(){f.find(".sidebar-collapse-content").perfectScrollbar("update")}var f,l,c=n(2),h=(n(72),n(28)),p=n(223);e.exports={init:r,updateScroller:a}},function(e,t,n){var r=n(10);e.exports=(r["default"]||r).template({1:function(e,t,n,r){var i;return'    <li>\r\n      <a href="/personal" target="_top">\r\n        <i class="sidebar-icon sidebar-icon-personal"></i>\r\n        <span>\u6211</span>\r\n      </a>\r\n    </li>\r\n    <li>\r\n      <a href="/myfollow" target="_top">\r\n          <i class="sidebar-icon sidebar-icon-myfollow-big"></i>\r\n          <span>\u5173\u6ce8</span>\r\n      </a>\r\n    </li>\r\n    <li>\r\n      <a href="/watchhistory" target="_top">\r\n          <i class="sidebar-icon sidebar-icon-watchhistory-big"></i>\r\n          <span>\u8bb0\u5f55</span>\r\n      </a>\r\n    </li>\r\n    <li>\r\n      <a href="/all" target="_top">\r\n          <i class="sidebar-icon sidebar-icon-all-live-big"></i>\r\n          <span>\u76f4\u64ad</span>\r\n      </a>\r\n    </li>\r\n    <li>\r\n      <a href="/cate" target="_top">\r\n          <i class="sidebar-icon sidebar-icon-all-cate-big"></i>\r\n          <span>\u5206\u7c7b</span>\r\n      </a>\r\n    </li>\r\n'+(null!=(i=t["if"].call(e,null!=e?e.roomId:e,{name:"if",hash:{},fn:this.program(2,r,0),inverse:this.noop,data:r}))?i:"")},2:function(e,t,n,r){var i;return'    <li>\r\n      <a href="/'+this.escapeExpression((i=null!=(i=t.roomId||(null!=e?e.roomId:e))?i:t.helperMissing,"function"==typeof i?i.call(e,{name:"roomId",hash:{},data:r}):i))+'" target="_top">\r\n          <i class="sidebar-icon sidebar-icon-myroom-big"></i>\r\n          <span>\u4e3b\u64ad</span>\r\n      </a>\r\n    </li>\r\n'},4:function(e,t,n,r){return'    <li>\r\n      <a href="javascript:;" class="sidebar-userinfo-login-btn">\r\n        <i class="sidebar-icon sidebar-icon-personal"></i>\r\n        <span>\u767b\u5f55</span>\r\n      </a>\r\n    </li>\r\n    <li>\r\n      <a href="/all" target="_top">\r\n          <i class="sidebar-icon sidebar-icon-all-live-big"></i>\r\n          <span>\u76f4\u64ad</span>\r\n      </a>\r\n    </li>\r\n    <li>\r\n      <a href="/cate" target="_top">\r\n          <i class="sidebar-icon sidebar-icon-all-cate-big"></i>\r\n          <span>\u5206\u7c7b</span>\r\n      </a>\r\n    </li>\r\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,r){var i,s;return'<div class="sidebar-collapse-head">\r\n  <a href="/" target="_top">\r\n    <i class="sidebar-icon sidebar-icon-home"></i>\r\n  </a>\r\n</div>\r\n<div class="sidebar-collapse-content">\r\n  <ul class="sidebar-list sidebar-list-4">\r\n'+(null!=(i=t["if"].call(e,null!=e?e.isLogin:e,{name:"if",hash:{},fn:this.program(1,r,0),inverse:this.program(4,r,0),data:r}))?i:"")+'  </ul>\r\n</div>\r\n<div class="sidebar-collapse-foot">\r\n  <a href="'+this.escapeExpression((s=null!=(s=t.serviceUrl||(null!=e?e.serviceUrl:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{name:"serviceUrl",hash:{},data:r}):s))+'" class="service-button" target="_blank" title="\u5ba2\u670d">\r\n    <i class="sidebar-icon sidebar-icon-service-big"></i>\r\n    <span>\u5ba2\u670d</span>\r\n  </a>\r\n</div>\r\n'},useData:!0})},function(e,t){"use strict";function n(e,t){t=t||{},this.$box=r(e),this.initEvent(),this.beforePageUpdate=t.beforePageUpdate||function(){},this.onPageUpdate=t.onPageUpdate||function(){},this.data={totalPage:t.totalPage||0,current:t.current||0,total:t.total||0},this.data.totalPage>0&&this.setHtml()}var r=jQuery,i=n.prototype;i.initEvent=function(){var e=this;e.$box.on("click","a",function(t){t.preventDefault();var n=r(t.target);if(!n.is(".disabled")&&!n.is(".selected"))return n.is(".j-page-prev")?(e.update({current:e.data.current-1}),"prev"):n.is(".j-page-next")?(e.update({current:e.data.current+1}),"next"):n.is(".page-component-submit")?(e.goPage(),"custom"):void e.update({current:n.html()})})},i.getHtml=function(){var e={},t=this.data,n='<div class="page-component-container">';if(t.totalPage<=1)return n+"</div>";n+='<div class="page-component">',e.start=t.current-2,e.start<=3&&(e.start=1),e.end=t.current+2,1===e.start&&t.current<4&&(e.end=e.start+4),e.end>=t.totalPage-2&&(e.end=t.totalPage),5<t.totalPage&&4>e.end-e.start&&(e.start=e.end-4),4>e.start&&(e.start=1),n+=t.current>1?'<a href="#" class="j-page-prev">\u4e0a\u4e00\u9875</a>':'<a href="#" class="j-page-prev disabled">\u4e0a\u4e00\u9875</a>',e.start>3&&(n+='<a href="#">1</a><b>\u2026</b>');for(var r=e.start;r<=e.end;r++)n+=r===t.current?'<a href="#" class="selected">'+r+"</a>":'<a href="#">'+r+"</a>";return 2<=t.totalPage-e.end&&(n+='<b>\u2026</b><a href="#">'+t.totalPage+"</a>"),n+=t.current<t.totalPage?'<a href="#" class="j-page-next">\u4e0b\u4e00\u9875</a>':'<a href="#" class="j-page-next disabled">\u4e0b\u4e00\u9875</a>',n+='<span class="page-component-jumppage">\u8df3\u8f6c\u5230\uff1a</span><input type="text" class="page-component-jumptxt"><a href="#" class="page-component-submit">GO</a>',n+="</div></div>"},i.setHtml=function(){var e=this;r(".page-component-jumptxt",e.$box).off(),e.$box.html(e.getHtml()),r(".page-component-jumptxt",e.$box).on("keydown",function(t){13===t.which&&e.goPage()})},i.updateData=function(e){e=e||{},e.current&&(e.current=e.current-0),e.total&&(e.total=e.total-0),e.totalPage&&(e.totalPage=e.totalPage-0),r.extend(this.data,e)},i.update=function(e){this.beforePageUpdate&&this.beforePageUpdate(e)===!1||(this.updateData(e),this.setHtml(),this.onPageUpdate&&this.onPageUpdate(this.data))},i.goPage=function(){var e=r.trim(this.$box.find(".page-component-jumptxt").val());e&&(e=parseInt(e,10)||1,1>e?e=1:this.data.totalPage>0&&e>this.data.totalPage&&(e=this.data.totalPage),this.update({current:e}))},e.exports={init:function(e,t){return new n(e,t)}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function r(){h.initialize({api:"/ajax_sort",ajaxData:{classification:a}}),f.initialize({ulList:"video-list"}),c.init($("#side-tools-bar")),l.on("sidebar-collapsed",function(){$("#main-container").addClass("in-expand-state"),f.refresh()}),l.on("sidebar-expanded",function(){$("#main-container").removeClass("in-expand-state"),f.refresh()}),$("#main-container").css("visibility","visible").hide().fadeIn(200),o();var e=$("#sortdetail-container").data("total");u=d.init("#pages-container",{totalPage:Math.ceil(e/h.getPageNum()),total:e,current:1,beforePageUpdate:function(){return!h.isLoading()},onPageUpdate:function(e){h.loadPage(e.current,i,s)}})}function i(e){h.setTotal(e.total),$("#main-container").scrollTop(0),e.hideTag=!0,e.hideCate=!0;var t=p(e);$("#sortdetail-container").html(t),f.refresh(),o(),u.update({totalPage:Math.ceil(e.total/h.getPageNum()),total:e.total,current:h.getCurrent()})}function s(e){}function o(){$("#main-container .video-img-lazy").lazyload({placeholder_real_img:"http://i1.pdim.gs/t01638439de7595492d.gif",effect:"fadeIn",container:$("#main-container")})}var u,a=location.pathname.split("/").pop(),f=n(191),l=n(2),c=n(194),h=n(192),p=n(193),d=n(224);r()}]));
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>

<script src="jquery-1.12.4.min.js"></script>
<script>
    /**
     * 在drop事件触发后通过e.dataTransfer.files获取拖拽文件列表，在jQuery中是e.originalEvent.dataTransfer.files
     * 拖拽上传仅支持图片，文件对象中file.type标识了文件类型
     * 由于可能是多图拖拽，所以可以遍历图片上传，这里用了Underscore的each方法
     * 这里用readAsDataURL读取文件内容为二进制文件，你还可以将其转换为Base64方式上传，
     * 只是http协议里面存在对非二进制数据的上传大小限制为2M。
     */
    //dragenter
    $('textarea').on('dragenter',function(e){
        e.preventDefault();
    });

    //dragover
    $('textarea').on('dragover',function(e){
        e.preventDefault();
    });

    //drop

    $('textarea').on('drag',function(e){
        e.stopPropagation();
        e.preventDefault();

        var files = e.originalEvent.dataTransfer.files;

        _.each(files,function(file){
            if(!/^image*/.test(file.type)) {
                return;
            }
            var fileReader = new FileReader();
            fileReader.onload = function(){
                //upLoadFile(file)
            }
            fileReader.readAsDataURL(file);
        });
    });

</script>
</body>
</html>

